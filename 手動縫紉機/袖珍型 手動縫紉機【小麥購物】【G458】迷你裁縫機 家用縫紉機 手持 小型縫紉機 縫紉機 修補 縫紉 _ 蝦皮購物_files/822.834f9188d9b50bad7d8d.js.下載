(self.wpJsonpPcmallRating=self.wpJsonpPcmallRating||[]).push([[822],{6342:(e,t,a)=>{"use strict";a.d(t,{$3:()=>E,tD:()=>c,jP:()=>f,mx:()=>d,wl:()=>T,ge:()=>S,wr:()=>C,q3:()=>I,aJ:()=>b,e5:()=>M,h4:()=>N,te:()=>R,SQ:()=>O,wc:()=>w,N5:()=>k});var i=a(6704),o=a(3804),r=a.n(o);const n=`{{${Date.now()}}}`;function d(e,t){if(!t)return{comments:"",tmpTagsComments:{}};if(!e||!e.length)return{comments:t,tmpTagsComments:{}};const a=t.indexOf("\n\n"),i=Object.create(null);let o="",r="";if(a<0)o=t;else{const e=t.replace(/\n\n/,n).split(n);o=e[0]||"",r=e[1]||""}return o&&o.split("\n").forEach((t=>{const a=t.replace(":",n).split(n),o=a[0],r=a[1];o&&r&&e.includes(o)&&Object.assign(i,{[o]:r.replace(/\n/g,"")})})),{comments:r,tmpTagsComments:i}}const s="Rk6V+3",_="XgpZlY";function p(e){return e/16+"rem"}const c=function({isDeleted:e,isHidden:t,comment:a,templateTags:r,hasTemplateTag:n}){if(!a)return null;let c;if(e)c=i.I18n.t("pr_review_deleted");else{if(t)return null;if(n){const{tmpTagsComments:e,comments:t}=d(r,a),i=[];r.forEach(((t,a)=>{const r=e[t];r&&i.push(o.createElement("div",{key:a,style:{marginTop:a?p(6):0}},o.createElement("span",{className:_},t,": "),r))})),t&&i.push(o.createElement("div",{key:100,style:{marginTop:p(12)}},t)),c=i}else c=a}return o.createElement("div",{className:s},c)};var l=a(7359),m=a(2984),u=a(3569);const g=["thumbnail","id","alt"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},h.apply(this,arguments)}const y=4103,v=new l.ENDPOINT({biz:y,country:(0,u.Kd)(),uid:0,env:(0,u.dU)()});function f(e,t=!1){if(e&&(e.startsWith("https://")||e.startsWith("http://")||e.startsWith("file://")))return e;try{const{url:a}=v.getImgHttpsUrl(y,e,t?"_tn":"");return a}catch(a){return(0,m.Jn)(e,t)}}function E(e){let{thumbnail:t=!1,id:a,alt:i}=e,o=function(e,t){if(null==e)return{};var a,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,g);const n=f(a,t);return r().createElement("img",h({src:n,alt:i},o))}const b="5ae7a873244d8d6bc7b1fb4a452a5043660c6ea86718c7c2295b0a0862dcdd22",w="240250d341f7bbe8d81c08c6997ccc34765823b371e4962942f42699317415b6",C="b75ec9bfd0d07f044edb0f896d6b6d1804058e4aac11ca49cd9c7c68ad47e286",S="2384644a6b18e635dc58a2ba51c0ffced0f61bfafb5ae8aa841323ec1ddb8929",N="884b6e0ddffd87cf9bee32011bf8f6a69beefe31fc227a145d136bad8f2a25c5",R="0a771b5912c20216eb22922338eef601bb23d3a5b9adf84e82e97010e11eed22",k={my:"Malaysia",sg:"Singapore",tw:"Taiwan",th:"Thailand",br:"Brazil",mx:"Mexico",id:"Indonesia",co:"Colombia",cl:"Chile",vn:"Vietnam",ph:"Philippines"},O="70ea67ac6c484880784e7fed2e6037f98ce4151cb0e00ebc20855fada94ddead",M="afd10421c1cc0f5bd6336078f9ead3bdba5dcd8818e3c95da9f546f33d1b4bed",I="2e75a774de75f21e804948753322bbeda335ae321efe6772d6bbccdcc5e1feb3";function T(e){return i.I18n.withI18nCollections([178])(e)}},2337:(e,t,a)=>{"use strict";a.d(t,{Z:()=>S});var i=a(3804),o=a.n(i),r=a(4725),n=a.n(r),d=a(6342),s=a(6071);function _({url:e,needThumb:t,className:a,isVideoCover:i}){return o().createElement("div",{className:n()("shopee-rating-media-list-image__wrapper",a)},o().createElement("div",{className:"shopee-rating-media-list-image__place-holder"},o().createElement(s.Z,null)),o().createElement("div",{className:"shopee-rating-media-list-image__content",style:e&&e.length>0?{backgroundImage:i?`url("${e}")`:`url("${(0,d.jP)(e,t)}")`}:{}},o().createElement("div",{className:"shopee-rating-media-list-image__content--blur"}," ")))}var p=a(7243),c=a(8077);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},l.apply(this,arguments)}function m({direction:e,showArrowOnHover:t,isShown:a,handleClick:o,showArrowHint:r,isVisible:d,padding:s,IconArrow:_,style:m}){const u=t&&r&&!a;return s=s||"0px",i.createElement("div",{className:n()("rating-media-list-carousel-arrow rating-media-list-carousel-arrow--"+(e<0?"prev":"next"),u&&"rating-media-list-carousel-arrow--hint",!d&&"rating-media-list-carousel-arrow--hidden"),role:"button",tabIndex:0,style:l({opacity:!t||a||u?"1":"0",visibility:d?"visible":"hidden",transform:`translateX(calc(${e<0?"-50% + "+s:"50% - "+s}))`},m),onClick:o},_?i.createElement(_,null):e<0?i.createElement(p.Z,null):i.createElement(c.Z,null))}var u=a(2917);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},g.apply(this,arguments)}class h extends i.Component{constructor(e){super(e),this._carousel=null,this.handlePrevArrowClick=()=>{const e=this.state.position;let t=0;this.props.keepPreviousItemOnSlide&&(t=1);const a=this.props.slidesByOne?Math.max(e-1,0):Math.max(e-Math.ceil(this.props.numItemsPerRow)+t,0);this.slideTo(a)},this.handleNextArrowClick=()=>{const{items:e,numItemsPerRow:t,slidesByOne:a}=this.props,i=e.length-Math.floor(t),o=this.state.position;let r=0;this.props.keepPreviousItemOnSlide&&(r=1);const n=a?Math.min(o+1,i):Math.min(o+Math.ceil(t)-r,i);this.slideTo(n)},this.slideTo=e=>{if(this.state.isSliding&&!this.props.isOverrideSliding)return;this._finishSlidingTimeout&&window.clearTimeout(this._finishSlidingTimeout);const{transitionTime:t}=this.props;this.setState({isSliding:!0});const{_carousel:a}=this;a&&Object.assign(a.style,g({transition:`${t}ms`},this.getCurrentCarouselTransform(e))),"function"==typeof this.props.onSlide&&this.props.onSlide(e),this.props.isOverrideSliding&&this.setState({position:e}),this._finishSlidingTimeout=window.setTimeout((()=>{this.finishSliding(e)}),t)},this.finishSliding=e=>{this.setState({isSliding:!1,position:e}),this._finishSlidingTimeout&&window.clearTimeout(this._finishSlidingTimeout)},this.showArrows=()=>{this.setState({isShowArrows:!0})},this.hideArrows=()=>{this.setState({isShowArrows:!1})},this.state={position:0,isSliding:!1,isShowArrows:!1},this._carouselItems=[]}componentWillUnmount(){this._carousel=null,this._carouselItems=[]}componentDidMount(){const{numItemsPerRow:e,focusIndex:t}=this.props,a=this.props.items?this.props.items.length:0;if("number"==typeof t){const i=Math.floor(t/e)*e,o=Math.min(i,Math.max(a-Math.floor(e),0));this.setState({position:o},(()=>{const{_carousel:e}=this;e&&Object.assign(e.style,this.getCurrentCarouselTransform(o))}))}}renderDisplayedItems(){const{items:e,isFluid:t,padding:a,distributeCardWidthWhenFewerItems:o,numItemsPerRow:r}=this.props,d=e.length,s=o&&d<r?100/d:100/r;return e.map(((e,o)=>i.createElement("li",{key:o,className:n()("rating-media-list-image-carousel__item",t&&"rating-media-list-image-carousel__item--fluid"),style:{padding:`0 ${a}`,width:t?void 0:`${s}%`},ref:e=>{e&&(this._carouselItems[o]=e)}},e)))}render(){const{items:e,numItemsPerRow:t,showArrowOnHover:a,showArrowHint:o,isFluid:r,distributeCardWidthWhenFewerItems:d,itemPadding:s,className:_,IconArrowLeft:p,IconArrowRight:c,arrowStyle:l}=this.props,{isShowArrows:u,position:h}=this.state,y=e.length,v=y>t?(d&&y<t?100/y:100/t)*y:100,f=this._carouselItems&&this._carouselItems[this.state.position]?`${this._carouselItems[this.state.position].getBoundingClientRect().width}px`:void 0;return i.createElement("div",{className:n()("rating-media-list-image-carousel",_),onMouseEnter:this.showArrows,onMouseLeave:this.hideArrows,style:r?{width:f,transition:`${this.props.transitionTime}ms`}:{}},i.createElement("div",{className:"rating-media-list-image-carousel__item-list-wrapper"},i.createElement("ul",{className:"rating-media-list-image-carousel__item-list",style:g({width:r?void 0:`${v}%`},this.getCurrentCarouselTransform(h)),ref:e=>this._carousel=e},this.renderDisplayedItems())),i.createElement(m,{direction:-1,showArrowOnHover:a,isVisible:y>t&&h>0,isShown:u,handleClick:this.handlePrevArrowClick,showArrowHint:o,padding:s,IconArrow:p,style:l}),i.createElement(m,{direction:1,showArrowOnHover:a,isVisible:y>t&&h+t<y,isShown:u,handleClick:this.handleNextArrowClick,showArrowHint:o,padding:s,IconArrow:c,style:l}))}getCurrentCarouselTransform(e){const{_carousel:t,_carouselItems:a}=this;if(!t)return{};let i=0;return this.props.isFluid&&a?(i=a.map(((t,a)=>t&&a<e?t.getBoundingClientRect().width:0)).reduce(((e,t)=>e+t),0),{marginLeft:-i,marginTop:0}):(t.firstElementChild&&(i=t.firstElementChild.getBoundingClientRect().width),{marginLeft:-e*i,marginTop:0})}}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},y.apply(this,arguments)}h.defaultProps={transitionTime:500,showArrowOnHover:!1,padding:(0,u.Z)(10),keepPreviousItemOnSlide:!0,showArrowHint:!1,isFluid:!1,isOverrideSliding:!1,slidesByOne:!1};const v=function(e){return o().createElement("svg",y({width:"23",height:"18",viewBox:"0 0 23 18",fill:"none"},e),o().createElement("g",{filter:"url(#filter0_d)"},o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4C4.44772 4 4 4.44772 4 5V13C4 13.5523 4.44772 14 5 14H13C13.5523 14 14 13.5523 14 13V5C14 4.44772 13.5523 4 13 4H5ZM11.5 9C11.5 10.3807 10.3807 11.5 9 11.5C7.61929 11.5 6.5 10.3807 6.5 9C6.5 7.61929 7.61929 6.5 9 6.5C10.3807 6.5 11.5 7.61929 11.5 9ZM9 10.6667C9.92047 10.6667 10.6667 9.92047 10.6667 9C10.6667 8.07952 9.92047 7.33333 9 7.33333C8.07953 7.33333 7.33333 8.07952 7.33333 9C7.33333 9.92047 8.07953 10.6667 9 10.6667ZM18.1667 4.83333L14.8333 7.33306V10.6667L18.1667 13.1667V4.83333Z",fill:"white"})),o().createElement("defs",null,o().createElement("filter",{id:"filter0_d",x:"0",y:"0",width:"22.1667",height:"18",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),o().createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),o().createElement("feOffset",null),o().createElement("feGaussianBlur",{stdDeviation:"2"}),o().createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.26 0"}),o().createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),o().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))};var f=a(3381),E=a(6706);const b=["className","cover"];function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},w.apply(this,arguments)}class C extends i.PureComponent{constructor(...e){super(...e),this.state={pausing:!1,ended:!1},this.player=null,this.handleEnded=()=>{this.setState({ended:!0,pausing:!1})},this.handlePlay=()=>{this.setState({ended:!1,pausing:!1})},this.handlePause=()=>{this.setState({pausing:!0})},this.setVideoDomRef=e=>{e&&(this.player=e,this.player.addEventListener("ended",this.handleEnded,!1),this.player.addEventListener("play",this.handlePlay,!1),this.player.addEventListener("pause",this.handlePause,!1))}}UNSAFE_componentWillReceiveProps(e){this.player&&(!this.props.autoPlay&&e.autoPlay?this.player.play():this.props.autoPlay&&!e.autoPlay&&this.player.pause())}render(){const e=this.props,{className:t,cover:a}=e,o=function(e,t){if(null==e)return{};var a,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,b);return i.createElement("div",{className:"_7vELmB"},i.createElement("video",w({},o,{poster:a,className:n()("FUfYhl",t),ref:this.setVideoDomRef,controlsList:"nodownload"})),this.state.pausing?i.createElement(f.Z,{className:"CPwWRk"}):this.state.ended&&i.createElement(E.Z,{className:"m38bzp"}))}}class S extends i.Component{constructor(e){super(e),this._carousel=null,this.onCarouselSlide=e=>{e>=0&&e<this.props.urlList.length&&this.setState({zoomedIndex:e})},this.state={zoomedIndex:-1,carouselTransitionTime:0,expanded:!1}}handleImageClick(e){const{zoomedIndex:t,expanded:a}=this.state;a&&t===e?this.setState({expanded:!1,zoomedIndex:0,carouselTransitionTime:0}):this.setState({expanded:!0,zoomedIndex:e,carouselTransitionTime:500},(()=>{this._carousel&&this._carousel.slideTo(e)}))}render(){const{urlList:e}=this.props;if(!e||!e.length)return null;const{zoomedIndex:t,expanded:a}=this.state,o=e.map(((e,a)=>"string"==typeof e?i.createElement(d.$3,{alt:"rating",key:a,className:"rating-media-list__zoomed-image-item",id:e}):i.createElement(C,{src:e.url,key:a,className:"rating-media-list__zoomed-video-item",controls:!0,muted:!0,autoPlay:t===a})));return i.createElement("div",{className:"rating-media-list"},i.createElement("div",{className:"rating-media-list__container"},e.map(((e,o)=>i.createElement("div",{key:o,className:n()("rating-media-list__image-wrapper",a&&t===o?"rating-media-list__image-wrapper--active":"rating-media-list__image-wrapper--inactive"),onClick:this.handleImageClick.bind(this,o)},"string"==typeof e?i.createElement(_,{url:e,needThumb:!0}):i.createElement(i.Fragment,null,i.createElement(_,{url:e.cover,needThumb:!1,isVideoCover:!0}),i.createElement("div",{className:"rating-media-list__video-cover"},i.createElement(v,null),i.createElement("span",null,((e=0,t="m:ss")=>{const a=Math.ceil(e/1e3),i=Math.floor(a/60),o=a%60,r={mm:`0${i}`.substr(-2),m:i,ss:`0${o}`.substr(-2),s:o};return Object.keys(r).reduce(((e,t)=>e.replace(t,`${r[t]}`)),t)})(e.duration||0)))))))),i.createElement("div",{className:n()("rating-media-list__zoomed-image",a&&"rating-media-list__zoomed-image--active")},i.createElement(h,{items:o,showArrowOnHover:!0,numItemsPerRow:1,showArrowHint:!0,ref:e=>this._carousel=e,onSlide:this.onCarouselSlide,keepPreviousItemOnSlide:!1,transitionTime:this.state.carouselTransitionTime,isFluid:!0,isOverrideSliding:!0})))}}},5552:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var i=a(3804),o=a.n(i),r=a(4725),n=a.n(r),d=a(6704);const s={response:"fwJamt",title:"CaoTou",content:"_2kece8"},{t:_}=d.I18n;function p({response:e,titleText:t,className:a,isHidden:i}){return o().createElement("div",{className:n()(s.response,a)},o().createElement("div",{className:s.title},t||_("label_seller_response")),o().createElement("div",{className:s.content},i?`***${_("seller_reply_hidden")}***`:e))}},4674:(e,t,a)=>{"use strict";a.d(t,{DU:()=>O,kG:()=>C,TE:()=>f});var i=a(3804),o=a.n(i),r=a(2356),n=a(4747),d=a(4725),s=a.n(d);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},_.apply(this,arguments)}const p=function(e){return i.createElement("svg",_({viewBox:"0 0 30 30"},e),i.createElement("defs",null,i.createElement("linearGradient",{id:"star__solid",x1:"50%",x2:"50%",y1:"0%",y2:"100%"},i.createElement("stop",{offset:"0%",stopColor:"#FFCA11"}),i.createElement("stop",{offset:"100%",stopColor:"#FFAD27"}))),i.createElement("path",{fill:"url(#star__solid)",fillRule:"evenodd",d:"M14.9988798 25.032153l-8.522024 4.7551739c-.4785069.2670004-.7939037.0347448-.7072938-.5012115l1.6339124-10.1109185-6.8944622-7.1327607c-.3871203-.4005006-.2499178-.7947292.2865507-.8774654l9.5090982-1.46652789L14.5740199.51703028c.2346436-.50460972.6146928-.50543408.8497197 0l4.2693588 9.18141263 9.5090986 1.46652789c.545377.0841102.680337.4700675.28655.8774654l-6.894462 7.1327607 1.633912 10.1109185c.08788.5438118-.232337.7662309-.707293.5012115l-8.5220242-4.7551739z"}))};function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},c.apply(this,arguments)}const l=function(e){return i.createElement("svg",c({viewBox:"0 0 30 30"},e),i.createElement("defs",null,i.createElement("linearGradient",{id:"star__hollow",x1:"50%",x2:"50%",y1:"0%",y2:"99.0177926%"},i.createElement("stop",{offset:"0%",stopColor:"#FFD211"}),i.createElement("stop",{offset:"100%",stopColor:"#FFAD27"}))),i.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"url(#star__hollow)",strokeWidth:"2",d:"M23.226809 28.390899l-1.543364-9.5505903 6.600997-6.8291523-9.116272-1.4059447-4.01304-8.63019038-4.013041 8.63019038-9.116271 1.4059447 6.600997 6.8291523-1.543364 9.5505903 8.071679-4.5038874 8.071679 4.5038874z"}))},m={rating:"Hdwpes",icon:"Q3JZ62",starsContainer:"dmvG7c",title:"jcQ0KT",stars:"lmnPj6",definition:"_6m3yfK"};function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},u.apply(this,arguments)}const g=({onClick:e,value:t,size:a,classNames:i})=>o().createElement("div",{className:s()(i,m.rating),style:{width:a,height:a},onClick:e},o().createElement(l,{className:m.icon}),o().createElement(p,{className:m.icon,style:{width:100*t+"%"}}));function h(e){return o().createElement(g,u({},e,{value:1}))}function y(e){return o().createElement(g,u({},e,{value:0}))}g.defaultProps={size:"1.875rem"};const v=5;function f({rating:e=5,maxRating:t=v,onRatingChange:a,StarUIHollow:i=y,StarUISolid:d=h,size:s}){const _=t=>{t!==e&&a&&a(t)},p=["rating-stars__star"];a&&p.push("rating-stars__star--clickable");const c=[];for(let o=1;o<=t;o++)c.push(e>=o?"icon-rating-solid":"icon-rating");return o().createElement("div",{className:"rating-stars__container"},c.map(((t,a)=>a<=e-1?d?o().createElement(d,{key:a,size:s,classNames:p,onClick:_.bind(null,a+1)}):o().createElement(r.Z,{key:a,classNames:p,onClick:_.bind(null,a+1)}):i?o().createElement(i,{key:a,classNames:p,onClick:_.bind(null,a+1),size:s}):o().createElement(n.Z,{key:a,classNames:p,onClick:_.bind(null,a+1)}))))}var E=a(6704);const{t:b}=E.I18n,w=5;function C({title:e,rating:t=5,maxRating:a=w,onRatingChange:i,StarUIHollow:r=y,StarUISolid:n=h,size:d=26,space:s=5}){const _=e=>{e!==t&&i&&i(e)},p=[];i&&p.push("rating-stars__star--clickable");const c=[];for(let o=1;o<=a;o++)c.push(t>=o?"icon-rating-solid":"icon-rating");return o().createElement("div",{className:m.starsContainer},e?o().createElement("div",{className:m.title},o().createElement("span",null,e)):null,c.map(((e,a)=>{const i=a<t?n:r;return o().createElement("div",{key:a,style:{paddingLeft:`${s}px`}},o().createElement(i,{size:d,classNames:p,onClick:_.bind(null,a+1)}))})),o().createElement("span",{className:m.definition,style:{color:t>=4?"#eda500":"rgba(0, 0, 0, 0.54)"}},t>0?b(`star_definition_${t}`):""))}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},S.apply(this,arguments)}const N=function(e){return i.createElement("svg",S({width:"22",height:"21",viewBox:"0 0 22 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e,{style:{color:"#ffffff",display:"block",stroke:"currentcolor"}}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 16.9084L6.17879 19.5663C5.44805 19.9691 4.57443 19.3526 4.70912 18.5291L5.6419 12.8262L1.64766 8.74345C1.0779 8.16107 1.4064 7.17827 2.21184 7.05554L7.68852 6.22104L10.0952 1.1074C10.4555 0.341849 11.5445 0.341848 11.9048 1.1074L14.3115 6.22104L19.7882 7.05554C20.5937 7.17827 20.9222 8.16107 20.3524 8.74345L16.3582 12.8262L17.2909 18.5291C17.4256 19.3526 16.552 19.9691 15.8213 19.5663L11 16.9084Z",stroke:"#FFA727"}))};function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},R.apply(this,arguments)}const k=function(e){const t=`${Math.random()}_linear_gradient`;return i.createElement("svg",R({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 16.9084L5.17879 19.5663C4.44805 19.9691 3.57443 19.3526 3.70912 18.5291L4.6419 12.8262L0.647663 8.74345C0.077903 8.16107 0.406397 7.17827 1.21184 7.05554L6.68852 6.22104L9.09523 1.1074C9.45553 0.341849 10.5445 0.341848 10.9048 1.1074L13.3115 6.22104L18.7882 7.05554C19.5937 7.17827 19.9222 8.16107 19.3524 8.74345L15.3582 12.8262L16.2909 18.5291C16.4256 19.3526 15.552 19.9691 14.8213 19.5663L10 16.9084Z",fill:`url(#${t})`}),i.createElement("defs",null,i.createElement("linearGradient",{id:t,x1:"0",y1:"0",x2:"0",y2:"20",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFCA11"}),i.createElement("stop",{offset:"1",stopColor:"#FFAD27"}))))};function O({rating:e,className:t,useNew:a}){return o().createElement("div",{className:s()("shopee-rating-stars",t)},o().createElement("div",{className:"shopee-rating-stars__stars"},[1,2,3,4,5].map((t=>{const i=Math.max(0,Math.min(100*(e-t+1),100));return o().createElement("div",{className:"shopee-rating-stars__star-wrapper",key:t},o().createElement("div",{className:"shopee-rating-stars__lit",style:{width:`${i}%`}},a?o().createElement(k,null):o().createElement(r.Z,{classNames:["shopee-rating-stars__primary-star"]})),a?o().createElement(N,null):o().createElement(n.Z,{classNames:["shopee-rating-stars__hollow-star"]}))}))))}},5980:(e,t,a)=>{"use strict";a.d(t,{Vn:()=>o,C8:()=>n});var i=a(6704);const{fetchInfo:o,formPost:r,jsonPost:n,fetch:d,postFetchHandler:s,onFailHandler:_}=i.FetchUtils},2345:()=>{},5114:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>yi,S7:()=>gi,hR:()=>hi,mW:()=>ui});var i=a(3804),o=a.n(i),r=a(6704),n=a(1817),d=a(2676),s=a(1119),_=a.n(s),p=a(5325),c=a(4857),l=a(344),m=a(7762),u=a(7467),g=a(6679),h=a(3597),y=a(3820),v=a(282),f=a(8787),E=a(2308),b=a(6342),w=a(3202),C=a(5980);function S(e,t,a=!1){const i=(0,l.Z)(e,["toggles"],{});return void 0===i[t]?a:i[t]}var N=a(2513),R=a(1062);const k={mask:"znDU3g",popup:"_4pD4ke",popup_title:"nTNZdo",popup_message:"aLdjUS",action_group:"qIUcy-","stardust-button":"GCXFdm","stardust-button--primary":"tvVPpE"},{t:O}=r.I18n;function M({onSubmit:e,onCancel:t,title:a,message:i,showCancel:r=!0,cancelText:n,submitText:d}){return o().createElement("div",{className:k.mask},o().createElement("div",{className:k.popup},o().createElement("div",{className:k.popup_title},a||null),o().createElement("div",{className:k.popup_message},i),o().createElement("div",{className:k.action_group},o().createElement("div",{style:{display:r?"block":"none"}},o().createElement(R.Lw,{onClick:t,label:n||O("pr_order_purchase_label_cancel"),targetType:"CancelButton"})),o().createElement(N.nQ,{onClick:e,targetType:"SubmitButton"},d||O("pr_order_purchase_label_submit")))))}const I={mask:"X3MKeC",popup:"qbbH2a",popup_title:"FYCQpC",popup_message:"D0j3M5",action_group:"Ex9Xy9","stardust-button":"_7wIxgs","stardust-button--primary":"vWptg4"},{t:T}=r.I18n;function L({onSubmit:e,onCancel:t}){return o().createElement("div",{className:I.mask},o().createElement("div",{className:I.popup},o().createElement("div",{className:I.popup_title},T("pr_alert_submit_rating")),o().createElement("div",{className:I.popup_message},T("pr_alert_submit_rating_description")),o().createElement("div",{className:I.action_group},o().createElement(R.Lw,{onClick:t,label:T("pr_order_purchase_label_cancel"),targetType:"CancelButton"}),o().createElement(N.nQ,{onClick:e,targetType:"SubmitButton"},T("pr_order_purchase_label_submit")))))}const B={mask:"Gc6Qfo",popup:"AHVDeU",popup_title:"vr9nPu",popup_message:"_0bVi2F",action_group:"AEe7R0","stardust-button":"nRY52P","stardust-button--primary":"le+0nP"},{t:x}=r.I18n;function A({goRating:e,warningState:t}){return o().createElement("div",{className:B.mask},o().createElement("div",{className:B.popup},o().createElement("div",{className:B.popup_message},x("label_please_enter_rating","seller_service"===t?{label:x("low_rating_detail_seller_service")}:"delivery_service"===t?{label:x("low_rating_detail_logistic_service")}:{label:`${x("low_rating_detail_seller_service")} & ${x("low_rating_detail_logistic_service")}`})),o().createElement("div",{className:B.action_group},o().createElement(N.nQ,{onClick:e,targetType:"SubmitButton"},x("label_go_rating")))))}var D=a(4891),V=a(4674),q=a(5552),U=a(2337),W=a(2984),j=a(6567);const F=e=>{var t,a;const{followUp:i}=e,n=[...i.videos||[],...(null==(t=i.images)?void 0:t.map((e=>e.image_id)))||[]],d=i.after_days,s=null==i||null==(a=i.follow_up_reply)?void 0:a.comment;return o().createElement("div",null,o().createElement("div",{className:"shopee-product-rating__follow_up_content_title"},1===d?r.I18n.t("one_day_update",{period:d}):r.I18n.t("some_days_update",{period:d})),o().createElement(b.tD,{isHidden:!1,comment:i.comment||"",templateTags:[],hasTemplateTag:!1}),n.length?o().createElement("div",{className:"shopee-product-rating__medias"},o().createElement(U.Z,{urlList:n})):null,s?o().createElement(q.Z,{titleText:r.I18n.t("pr_order_purchase_label_seller_response"),response:s,isHidden:!1}):null)},$={tag:"Xmd0A5",tags:"NARdYq"};function P({tags:e}){return i.createElement("div",{className:$.tags},e.map((e=>i.createElement("span",{key:e.tag_id,className:$.tag},e.tag_description))))}var J=a(4725),H=a.n(J),X=a(191),G=a(8745);const Q={link:"PinpOp",imageWrapper:"tJpxcs",detail:"U2w1su",itemName:"D7LjRB",modelName:"q7YFPv"},{t:Z}=r.I18n;function z({item:e,className:t,bottomNode:a}){if(!e)return null;const i=e.model_name||e.model_names&&e.model_names.join(" , ");return o().createElement("div",{className:H()(Q.link,t),onClick:()=>{var t,a,i;window.open((t=e.shopid,a=e.itemid,(i=e.name)?G.Z.getUrl({seoName:i,shopId:t,itemId:a}):G.O.getUrl({shopId:t,itemId:a})))}},o().createElement(X.Ee,{url:e.image,needThumb:!0,className:Q.imageWrapper}),o().createElement("div",{className:Q.detail},o().createElement("div",{className:Q.itemName},e.name),i?o().createElement("div",{className:Q.modelName},`${Z("pr_order_purchase_label_variation")}: ${i}`):null,a||null))}var Y=a(974),K=a.n(Y),ee=a(3569);function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},te.apply(this,arguments)}const ae=self.__LOCALE__||"SG",ie=self.__ENV__||"test",oe=K().mall,re=K().env,ne=re[ie]+oe[ae],de=e=>`${e[0]}*****${e[e.length-1]}`,se=e=>{const t={};return e.forEach((e=>{const a=e.itemid;if(t[a]){const i=`${t[a].model_name||""} , ${e.model_name||""}`;t[a].model_name=i}else t[a]=te({},e)})),Object.keys(t).map((e=>t[e]))};var _e=function(e){return e[e.EX_LOW=-2]="EX_LOW",e[e.LOW=-1]="LOW",e[e.NORMAL=0]="NORMAL",e}(_e||{});const{t:pe}=r.I18n,{jsonPost:ce}=r.FetchUtils;function le(e){const{type:t=0,videos:a=0,photos:i=0}=e;let o="";if(t===_e.EX_LOW||t===_e.LOW){const{collectObj:r}=e,{blur:n,blank:d,dark:s}=r;let _=[n?"blur":void 0,d?"blank":void 0,s?"dark":void 0];_=_.filter((e=>void 0!==e)),a&&i?1===_.length?_.includes("blur")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_3_1"):pe("tips_medias_quality_low_3_1"):_.includes("blank")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_3_2"):pe("tips_medias_quality_low_3_2"):_.includes("dark")&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_3_3"):pe("tips_medias_quality_low_3_3")):2===_.length?_.includes("blur")&&_.includes("blank")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_3_4"):pe("tips_medias_quality_low_3_4"):_.includes("blur")&&_.includes("dark")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_3_5"):pe("tips_medias_quality_low_3_5"):_.includes("blank")&&_.includes("dark")&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_3_6"):pe("tips_medias_quality_low_3_6")):3===_.length&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_3_7"):pe("tips_medias_quality_low_3_7")):a&&!i?1===_.length?_.includes("blur")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_2_1"):pe("tips_medias_quality_low_2_1"):_.includes("blank")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_2_2"):pe("tips_medias_quality_low_2_2"):_.includes("dark")&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_2_3"):pe("tips_medias_quality_low_2_3")):2===_.length?_.includes("blur")&&_.includes("blank")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_2_4"):pe("tips_medias_quality_low_2_4"):_.includes("blur")&&_.includes("dark")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_2_5"):pe("tips_medias_quality_low_2_5"):_.includes("blank")&&_.includes("dark")&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_2_6"):pe("tips_medias_quality_low_2_6")):3===_.length&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_2_7"):pe("tips_medias_quality_low_2_7")):!a&&i&&(1===_.length?_.includes("blur")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_1_1"):pe("tips_medias_quality_low_1_1"):_.includes("blank")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_1_2"):pe("tips_medias_quality_low_1_2"):_.includes("dark")&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_1_3"):pe("tips_medias_quality_low_1_3")):2===_.length?_.includes("blur")&&_.includes("blank")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_1_4"):pe("tips_medias_quality_low_1_4"):_.includes("blur")&&_.includes("dark")?o=t===_e.EX_LOW?pe("tips_medias_quality_ex_1_5"):pe("tips_medias_quality_low_1_5"):_.includes("blank")&&_.includes("dark")&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_1_6"):pe("tips_medias_quality_low_1_6")):3===_.length&&(o=t===_e.EX_LOW?pe("tips_medias_quality_ex_1_7"):pe("tips_medias_quality_low_1_7")))}return o}const me=()=>"/api/v4/comment/text_quality_detection";async function ue(e){return await ce(me(),e)}function ge(e,t,a){const i=[];let o="";return e.includes("blur")&&i.push("blur"),e.includes("blank")&&i.push("blank"),e.includes("dark")&&i.push("dark"),a||t!==_e.LOW?(1===i.length?i.includes("blank")?o=pe("tips_media_check_new_1_"+(t===_e.EX_LOW?"exlow":"low")):i.includes("blur")?o=pe("tips_media_check_new_2_"+(t===_e.EX_LOW?"exlow":"low")):i.includes("dark")&&(o=pe("tips_media_check_new_3_"+(t===_e.EX_LOW?"exlow":"low"))):2===i.length?i.includes("blank")&&i.includes("blur")?o=pe("tips_media_check_new_4_"+(t===_e.EX_LOW?"exlow":"low")):i.includes("blank")&&i.includes("dark")?o=pe("tips_media_check_new_5_"+(t===_e.EX_LOW?"exlow":"low")):i.includes("blur")&&i.includes("dark")&&(o=pe("tips_media_check_new_6_"+(t===_e.EX_LOW?"exlow":"low"))):o=pe("tips_media_check_new_7_"+(t===_e.EX_LOW?"exlow":"low")),o):pe("tips_media_content_7_edit_low")}const he=(e,t,a)=>{let i=0,o=0;t&&(a&&a.length>0&&Object.keys(t).forEach((e=>{a.includes(e)||delete t[e]})),Object.values(t).forEach((e=>{i=Math.max((null==e?void 0:e.coins_earned_with_pictures_and_videos)||0,i),o=Math.max(e.coins_earned_with_pictures_or_videos||0,o)})));const r=i||0,n=o||0;return{show_pic_and_video:r>0,show_pic_or_video:n>0,pic_and_video:r,pic_or_video:n}},ye="lf+2Hr",{t:ve}=r.I18n,fe=({ratings:e,handleOpenEditRating:t,updateRatingAfterSetAnonymous:a,defaultRatingReviewTemplate:o,defaultRatingShowEditButton:r,isFollowUp:n})=>{if(!e)return null;const d=e.filter((e=>0!==e.status));if(0===d.length)return i.createElement("div",null,i.createElement("p",{className:ye},ve("pr_review_deleted")));const s=d.map(((e,a)=>{var d,s;const _=[...e.videos||[],...e.images||[]],p=e.ItemRatingReply?e.ItemRatingReply.comment:null,c=(0,j.mr)(e.ctime);return i.createElement(i.Fragment,{key:a},i.createElement("div",{className:"qR3ynI"},i.createElement(z,{item:se(e.product_items||[])[0],className:"UG4U2O"}),(()=>{if(e.is_hidden||0===e.status)return null;if(n){var o;if(null!=(o=e.follow_up)&&o.ctime)return null;if(null!=e&&e.can_follow_up)return i.createElement(R.Ig,{onClick:()=>t(a)},i.createElement("span",null,ve("add_updates")," "))}return(0,u.y9)(e)&&r?i.createElement(R.Ig,{onClick:()=>t(a)},i.createElement("span",null,ve("pr_order_purchase_label_edit")," ")):void 0})()),i.createElement("div",{className:"Ntzeq2"},i.createElement("div",{className:"lyRpxK"},i.createElement(D.Z,{className:"qcik5Y",imgSrc:(0,W.Jn)(e.author_portrait,!0)})),i.createElement("div",{className:"tIJkhK"},i.createElement("div",{className:"YsiKM+"},e.author_username),i.createElement(V.TE,{rating:null==(d=e.detailed_rating)?void 0:d.product_quality,size:14}),i.createElement("div",{className:"_9FCPuX"},o?i.createElement(b.tD,{isDeleted:0===e.status,isHidden:e.is_hidden,comment:e.comment,templateTags:e.template_tags||[],hasTemplateTag:!!e.has_template_tag}):e.comment?e.is_hidden?null:i.createElement("p",{className:ye},0===e.status?ve("pr_review_deleted"):e.comment):null,e.tags?i.createElement(P,{tags:e.tags}):null),_.length&&!e.is_hidden?i.createElement("div",{className:"f3niRM"},i.createElement("div",{className:"rating-modal__image-list-wrapper"},i.createElement(U.Z,{urlList:_}))):null,i.createElement("div",{className:"P0s0Dl"},c),p?i.createElement(q.Z,{className:"Qtmnou",titleText:ve("pr_order_purchase_label_seller_response"),response:p,isHidden:e.ItemRatingReply&&e.ItemRatingReply.is_hidden}):null,!e.is_hidden&&n&&null!=(s=e.follow_up)&&s.ctime?i.createElement(F,{followUp:e.follow_up}):null)))}));return i.createElement(i.Fragment,null,s)};var Ee=a(9747);const{t:be}=r.I18n;class we extends o().Component{constructor(e){super(e),this.state={reply:""}}onChange(e){this.setState({reply:e})}render(){const{placeholder:e=be("label_seller_response"),memo:t=be("label_seller_can_only_reply_once"),onClickSave:a,onClickCancel:i,error:r,textSave:n,textCancel:d}=this.props;return o().createElement("div",{className:"product-rating-reply"},o().createElement("div",{className:H()("product-rating-reply__input",{"product-rating-reply__input--error":r})},o().createElement(Ee.Z,{maxLength:500,placeholder:e,onChange:this.onChange.bind(this),errorT:be})),r&&o().createElement("div",{className:"product-rating-reply__error"},be(r)),o().createElement("div",{className:"product-rating-reply__actions"},o().createElement(R.oe,{modifiers:["primary"],classnames:["product-rating-reply__button","product-rating-reply__button--save"],onClick:a&&a.bind(this,this.state.reply)},n||be("label_save")),o().createElement(R.Ig,{classnames:["product-rating-reply__button","product-rating-reply__button--cancel"],onClick:i},d||be("label_cancel")),o().createElement("div",{className:"product-rating-reply__fatty"}),o().createElement("div",{className:"product-rating-reply__memo"},t)))}}const Ce=we,Se="wAkLXf",Ne="ji2WwG",{t:Re}=r.I18n;class ke extends i.Component{constructor(e){var t;super(e),t=this,this.onClickReplyButton=()=>{this.setState({inReplyMode:!0})},this.onClickCancelReplyButton=()=>{this.setState({inReplyMode:!1})},this.onClickSaveReplyButton=async function(e){const a=t.props.rating,{orderid:i,cmtid:o,shopid:r}=a;await t.props.replyBuyerRating(o,i,r,e)},this.onSaveReplyError=e=>{this.setState({replyError:e})},this.onSaveReplySuccess=e=>{this.setState({responseText:e})},this.state={inReplyMode:!1,responseText:"",replyError:"",rating:e.rating}}render(){const{rating:e}=this.state;if(0===Object.keys(e).length)return o().createElement("div",null,o().createElement("p",{className:Se},Re("pr_review_deleted")));const t=[...e.videos||[],...e.images||[]],a=e.UserRatingReply,i=a&&a.comment||this.props.replyText||this.state.responseText,r=(0,j.mr)(e.ctime);return o().createElement(o().Fragment,null,o().createElement("div",{className:"NIsN22"},o().createElement(D.Z,{imgSrc:(0,W.Jn)(e.author_pic,!0)}),o().createElement("div",{className:"H3kky5"},e.author_name),i||this.state.inReplyMode?null:o().createElement("div",{onClick:this.onClickReplyButton,className:"trpyqn"},Re("pr_label_reply"))),o().createElement("div",{className:"-NCXfU"},o().createElement(V.TE,{rating:e.rating_star,size:14}),e.comment?o().createElement("div",{className:Se},e.comment):null,t.length?o().createElement("div",{className:"feD7OV"},o().createElement("div",{className:"rating-modal__image-list-wrapper"},o().createElement(U.Z,{urlList:t}))):null,o().createElement("div",{className:"_68aZKU"},r),!i&&this.state.inReplyMode?o().createElement("div",{className:Ne},o().createElement(Ce,{placeholder:Re("pr_order_purchase_label_buyer_response"),memo:Re("pr_text_you_can_only_reply_rating_once"),onClickSave:this.onClickSaveReplyButton,onClickCancel:this.onClickCancelReplyButton,textSave:Re("pr_order_purchase_label_save"),textCancel:Re("pr_order_purchase_label_cancel"),error:this.state.replyError})):null,i?o().createElement("div",{className:Ne},o().createElement(q.Z,{titleText:Re("pr_label_your_response"),response:i})):null))}}const Oe=(0,p.connect)(((e,t)=>({replyText:e.rating&&e.rating.ratingReplies[t.rating.cmtid]})),{replyBuyerRating:u.YA})(ke);var Me=a(1211),Ie=a(8866);const{t:Te,tNode:Le}=r.I18n;class Be extends i.PureComponent{constructor(...e){super(...e),this.renderText=(e,t)=>{const{requirement:a}=this.props,i=e||t?["pr_label_rating_hint",e>0&&"X_word"+(e>1?"s":""),t>0&&"Y_picture"+(t>1?"s":""),"Z_coin"].filter(Boolean).join("_"):"pr_label_rating_hint_submit_to_win";return a.coins_earned?Te(i,{word:e,picture:t,coins_earned:a.coins_earned}):""},this.keywordColorful=e=>{const{enableRatingCreationUIRevamp:t}=this.props,a="en"===(0,ee.of)();return t?i.createElement("span",{className:"bMPOc7"},`${e} ${Te("coins")}`):a?`${e} ${Te("coins")}`:e},this.renderReviewText=({wordOk:e,imageOK:t,videoOk:a,imageToGo:i,videoToGo:o,wordToGo:r})=>{const{categoryCoin:n,enableRatingCreationUIRevamp:d}=this.props,s=d?Le:Te;let _;const p=(null==n?void 0:n.coins_earned_with_pictures_and_videos)||0,c=(null==n?void 0:n.coins_earned_with_pictures_or_videos)||0;if(!c&&!p)return"";if(!p)return _;const l=this.keywordColorful(c),m=this.keywordColorful(p);return _=e&&t&&a?s("new_msg_submit_rating_to_earn_coins",{coins_earned:m}):e&&t?!c&&p?s("msg_add_video_to_earn_coins_two",{needed_video:o,coins_earned_with_video:m}):s("msg_add_video_to_earn_coins",{coins_earned:l,needed_video:o,coins_earned_with_video:m}):e&&a?!c&&p?s("msg_add_pics_to_earn_coins_two",{needed_pictures:i,coins_earned_with_pics:m}):s("msg_add_pics_to_earn_coins",{coins_earned:l,needed_pictures:i,coins_earned_with_pics:m}):e?s("msg_add_pics_and_video_to_earn_coins",{needed_video:o,needed_pictures:i,coins_earned_with_pics_and_videos:m}):t&&a?s("msg_add_words_to_earn_coins",{needed_characters:r,coins_earned_with_pics_and_videos:m}):t?s("msg_add_words_and_video_to_earn_coins",{needed_characters:r,needed_video:o,coins_earned_with_pics_and_videos:m}):a?s("msg_add_words_and_pics_to_earn_coins",{needed_characters:r,needed_pictures:i,coins_earned_with_pics_and_videos:m}):s("msg_add_words_and_medias_to_earn_coins",{needed_characters:r,needed_pictures:i,needed_video:o,coins_earned_with_pics_and_videos:m}),_}}render(){const{requirement:e,characterCount:t,imageCount:a,videoCount:o=0,defaultVideoReview:r}=this.props,n=Math.max(0,e.minimum_characters-t),d=Math.max(0,e.minimum_pictures-a),s=Math.max(0,(e.minimum_videos||0)-o),_=!n,p=!d,c=!s;let l;return l=r?this.renderReviewText({wordOk:_,imageOK:p,videoOk:c,imageToGo:d,videoToGo:s,wordToGo:n}):this.renderText(n,d),i.createElement("div",{className:"p9mPpj"},l)}}function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},xe.apply(this,arguments)}const Ae=function(e){return o().createElement("svg",xe({width:"20",height:"15",viewBox:"0 0 20 15",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 0.0769043C0.447715 0.0769043 0 0.524619 0 1.0769V13.1945C0 13.7468 0.447715 14.1945 1 14.1945H13.1176C13.6699 14.1945 14.1176 13.7468 14.1176 13.1945V1.0769C14.1176 0.52462 13.6699 0.0769043 13.1176 0.0769043H1ZM10.5883 7.1356C10.5883 9.08484 9.00811 10.665 7.05887 10.665C5.10963 10.665 3.52946 9.08484 3.52946 7.1356C3.52946 5.18636 5.10963 3.60619 7.05887 3.60619C9.00811 3.60619 10.5883 5.18636 10.5883 7.1356ZM7.05916 9.48862C8.35865 9.48862 9.4121 8.43517 9.4121 7.13568C9.4121 5.83619 8.35865 4.78274 7.05916 4.78274C5.75966 4.78274 4.70622 5.83619 4.70622 7.13568C4.70622 8.43517 5.75966 9.48862 7.05916 9.48862ZM20.0003 1.25341L15.2944 4.78244V9.4887L20.0003 13.0181V1.25341Z",fill:"#EE4D2D"}))};function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},De.apply(this,arguments)}const Ve=function(e){return o().createElement("svg",De({width:"20",height:"15",viewBox:"0 0 20 15",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 0.0769348C0.447715 0.0769348 0 0.52465 0 1.07693V13.1946C0 13.7469 0.447715 14.1946 1 14.1946H13.1176C13.6699 14.1946 14.1176 13.7469 14.1176 13.1946V1.07693C14.1176 0.52465 13.6699 0.0769348 13.1176 0.0769348H1ZM10.5883 7.13563C10.5883 9.08487 9.00811 10.665 7.05887 10.665C5.10963 10.665 3.52946 9.08487 3.52946 7.13563C3.52946 5.18639 5.10963 3.60622 7.05887 3.60622C9.00811 3.60622 10.5883 5.18639 10.5883 7.13563ZM7.05916 9.48865C8.35865 9.48865 9.4121 8.4352 9.4121 7.13571C9.4121 5.83622 8.35865 4.78277 7.05916 4.78277C5.75966 4.78277 4.70622 5.83622 4.70622 7.13571C4.70622 8.4352 5.75966 9.48865 7.05916 9.48865ZM20.0003 1.25344L15.2944 4.78247V9.48873L20.0003 13.0181V1.25344Z",fill:"black",fillOpacity:"0.26"}))};function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},qe.apply(this,arguments)}const Ue=function(e){return o().createElement("svg",qe({width:"20",height:"18",viewBox:"0 0 20 18",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.15377 9.76895C6.15377 11.8927 7.87492 13.6151 9.99992 13.6151C12.1236 13.6151 13.8461 11.8927 13.8461 9.76895C13.8461 7.6446 12.1236 5.9228 9.99992 5.9228C7.87492 5.9228 6.15377 7.6446 6.15377 9.76895ZM5 9.76896C5 7.00771 7.23813 4.76896 10 4.76896C12.7613 4.76896 15 7.00771 15 9.76896C15 12.5296 12.7613 14.769 10 14.769C7.23813 14.769 5 12.5296 5 9.76896ZM1.15385 17.2606C0.489784 17.2606 0 16.7249 0 16.0662V4.12218C0 3.46224 0.489784 2.8459 1.15385 2.8459H4.61538L5.21635 1.73267C5.21635 1.73267 5.75421 0.538208 6.41827 0.538208H13.5817C14.2452 0.538208 14.7837 1.73267 14.7837 1.73267L15.3846 2.8459H18.8462C19.5096 2.8459 20 3.46224 20 4.12218V16.0662C20 16.7249 19.5096 17.2606 18.8462 17.2606H1.15385Z",fill:"#EE4D2D"}))};function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},We.apply(this,arguments)}const je=function(e){return o().createElement("svg",We({width:"20",height:"18",viewBox:"0 0 20 18",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.15377 9.76902C6.15377 11.8927 7.87492 13.6152 9.99992 13.6152C12.1236 13.6152 13.8461 11.8927 13.8461 9.76902C13.8461 7.64466 12.1236 5.92286 9.99992 5.92286C7.87492 5.92286 6.15377 7.64466 6.15377 9.76902ZM5 9.76902C5 7.00777 7.23813 4.76902 10 4.76902C12.7613 4.76902 15 7.00777 15 9.76902C15 12.5296 12.7613 14.769 10 14.769C7.23813 14.769 5 12.5296 5 9.76902ZM1.15385 17.2607C0.489784 17.2607 0 16.725 0 16.0662V4.12224C0 3.4623 0.489784 2.84596 1.15385 2.84596H4.61538L5.21635 1.73273C5.21635 1.73273 5.75421 0.538269 6.41827 0.538269H13.5817C14.2452 0.538269 14.7837 1.73273 14.7837 1.73273L15.3846 2.84596H18.8462C19.5096 2.84596 20 3.4623 20 4.12224V16.0662C20 16.725 19.5096 17.2607 18.8462 17.2607H1.15385Z",fill:"black",fillOpacity:"0.26"}))};function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Fe.apply(this,arguments)}const $e=function(e){return o().createElement("svg",Fe({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.28268 0.908882C8.47794 0.71362 8.79452 0.71362 8.98978 0.908882L9.0908 1.0099C9.28606 1.20516 9.28606 1.52174 9.0908 1.717L1.71669 9.09112C1.52142 9.28638 1.20484 9.28638 1.00958 9.09112L0.908564 8.9901C0.713301 8.79484 0.713301 8.47826 0.908563 8.283L8.28268 0.908882Z",fill:"#F6F6F6"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.00973 0.908882C1.20499 0.71362 1.52157 0.71362 1.71683 0.908882L9.09095 8.28299C9.28621 8.47826 9.28621 8.79484 9.09095 8.9901L8.98993 9.09112C8.79467 9.28638 8.47809 9.28638 8.28283 9.09112L0.908713 1.717C0.713451 1.52174 0.71345 1.20516 0.908713 1.0099L1.00973 0.908882Z",fill:"#F6F6F6"}))};function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Pe.apply(this,arguments)}const Je=function(e){return o().createElement("svg",Pe({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none"},e),o().createElement("g",{filter:"url(#filter0_d)"},o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4C4.44772 4 4 4.44772 4 5V13C4 13.5523 4.44772 14 5 14H13C13.5523 14 14 13.5523 14 13V5C14 4.44772 13.5523 4 13 4H5ZM11.5 9C11.5 10.3807 10.3807 11.5 9 11.5C7.61929 11.5 6.5 10.3807 6.5 9C6.5 7.61929 7.61929 6.5 9 6.5C10.3807 6.5 11.5 7.61929 11.5 9ZM9 10.6667C9.92047 10.6667 10.6667 9.92047 10.6667 9C10.6667 8.07952 9.92047 7.33333 9 7.33333C8.07953 7.33333 7.33333 8.07952 7.33333 9C7.33333 9.92047 8.07953 10.6667 9 10.6667ZM18.1667 4.83333L14.8333 7.33306V10.6667L18.1667 13.1667V4.83333Z",fill:"white"})),o().createElement("defs",null,o().createElement("filter",{id:"filter0_d",x:"0",y:"0",width:"22.1667",height:"18",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),o().createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),o().createElement("feOffset",null),o().createElement("feGaussianBlur",{stdDeviation:"2"}),o().createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.26 0"}),o().createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),o().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))},He="HGMOn+",Xe=({width:e,height:t,duration:a=1e3})=>{const[i,r]=o().useState(0),n=Math.sqrt(e*e+t*t);return o().useEffect((()=>{const e=Math.max(1e3,a/6);let t=0;const i=setInterval((()=>{t+=20,t>e-50&&clearInterval(i),r(Math.floor(100*t/e))}),20);return()=>clearInterval(i)}),[a]),o().createElement("div",{className:"WHgrSs"},i<100?o().createElement("div",{style:{width:n,height:n,top:(t-n)/2},className:H()(He,"_2Od7PB")},o().createElement("div",{style:i>50?{transform:`rotate(${Math.PI*((i-50)/50)}rad)`}:{}})):null,i<50?o().createElement("div",{style:{width:n,height:n,top:(t-n)/2},className:H()(He,"w6xXks")},o().createElement("div",{style:{transform:`rotate(${Math.PI*(i/50)}rad)`}})):null,o().createElement("div",null,i,"%"))};a(7852);var Ge=a(1099),Qe=a.n(Ge);function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Ze.apply(this,arguments)}const ze=self.__LOCALE__||"SG",Ye=self.__ENV__||"test",Ke=132.5,et=1080,tt=K().mall,at=K().env,it=at[Ye]+tt[ze];function ot(e,t,a){const i={};e<a||t<a?e/t>1?(i.height=t,i.width=1*t):(i.width=e,i.height=e/1):(i.width=a,i.height=a);const o=Math.min(e/i.width,t/i.height);return i.srcHeight=t/o,i.srcWidth=e/o,i.y=(i.srcHeight-i.width)/2,i.x=(i.srcWidth-i.height)/2,i}function rt(e,t,a){const i=Math.max(e,t);if(i>a){const o=i/a;e/=o,t/=o}return{width:e,height:t,x:0,y:0,srcWidth:e,srcHeight:t}}function nt(e){return new Promise((function(t){const a=document.createElement("canvas"),i=new FileReader;i.onload=e=>{const i=new Image,o=e.target.result;i.onload=()=>{const e=[Ke,et].map(((e,t)=>{const o=(0===t?ot:rt)(i.width,i.height,e);a.width=o.width,a.height=o.height;const r=a.getContext("2d");return r&&r.drawImage(i,-o.x,-o.y,o.srcWidth,o.srcHeight),a.toDataURL("image/jpeg",.6)}));var o;t({key:(o=e[0],o.substr(20+Math.floor(80*Math.random()),50)),thumbnail:e[0],image:e[1]})},i.src=o},i.readAsDataURL(e)}))}const dt=e=>new Promise(((t,a)=>{const i=document.createElement("video"),o=URL.createObjectURL(e),r={url:o,size:e.size},n=()=>{r.cover&&r.duration&&t(r)};i.addEventListener("timeupdate",(e=>{r.cover||(r.cover=((e,t)=>{const a=document.createElement("canvas"),i=a.getContext("2d");a.width=e.videoWidth,a.height=e.videoHeight,i&&i.drawImage(e,0,0),a.toBlob((e=>{if(!e)return;const t=e;t.lastModifiedDate=new Date,t.name="cover.jpg",(({cover:e,coverFile:t})=>{r.cover=e,r.coverFile=t,n()})({cover:URL.createObjectURL(e),coverFile:t})}),"image/jpeg"),e.pause()})(e.target))}),!1),i.addEventListener("error",(()=>{a(Ze({type:"VIDEO_PLAY_ERROR"},i.error))})),i.addEventListener("loadedmetadata",(e=>{r.duration=Math.ceil(1e3*e.target.duration),n()}),!1),i.src=o,i.muted=!0,i.play()})),st=async({file:e,coverFile:t,duration:a})=>{var i,o;const r=await fetch(`https://rating.${"AR"!==ze?it:at[Ye]+"shopee.com.ar"}/api/v1/video/video_preupload`,{method:"POST",credentials:"include"}).then((e=>e.json())).catch((e=>Promise.reject(e)));if(!r)return Promise.reject("service is empty");const{vid:n,services:d}=r.data,{serviceid:s,token:_,upload_domain:p,bucket:c,domain:l,slicesize:m}=d[0],u=new(Qe())([{serviceID:s,authorization:_,sliceSize:m,uploadDomain:p.replace(/^https?/,"https"),domain:l.replace(/^https?/,"https"),bucket:c,vid:n,env:Ye,country:ze,serviceIndex:0,biz:103}]),g=(new Date).getTime(),h=await u.upload({mediaFile:e,coverFile:t,mediaType:Ge.MediaType.video}),y=await h.done().catch((e=>Promise.reject(e))),v={vid:n,serviceid:s,extendid:null==y||null==(i=y.video)?void 0:i.extendId,fsize:e.size,md5:null==y||null==(o=y.video)?void 0:o.md5,videourl:null==y?void 0:y.video.url,cover:null==y?void 0:y.cover.url,code:0,reportdata:{cost:Date.now()-g},fileinfos:{duration:a}};return await fetch(`https://rating.${"AR"!==ze?it:at[Ye]+"shopee.com.ar"}/api/v1/video/video_reportupload`,{method:"POST",credentials:"include",headers:{"content-type":"application/json; charset=utf-8"},body:JSON.stringify(v)}),Promise.resolve({id:n,url:null==y?void 0:y.video.url,cover:null==y?void 0:y.cover.url,duration:a,upload_time:Date.now()-g})},_t=async(e,t)=>{const a={image_ids:e,video_ids:t},i=await fetch(`https://rating.${"AR"!==ze?it:at[Ye]+"shopee.com.ar"}/api/v1/comment/media_quality_detection`,{method:"POST",credentials:"include",headers:{"content-type":"application/json; charset=utf-8"},body:JSON.stringify(a)});return await i.json()},pt="C7VJzu",ct="JiUFY3",lt="zcGDMl",mt="r-KiXX",ut=["type","key"];function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},gt.apply(this,arguments)}const{t:ht}=r.I18n;let yt=function(e){return e[e.IMAGE=0]="IMAGE",e[e.VIDEO=1]="VIDEO",e}({});const vt=({type:e,onChange:t,fileKey:a})=>{const i=e===yt.IMAGE?"image/*":"video/mp4";return o().createElement("label",{className:"Vad+7d"},e===yt.IMAGE?o().createElement(Ue,null):o().createElement(Ae,null),o().createElement("span",{className:pt},e===yt.IMAGE?ht("label_add_photo"):ht("rating_entrance_name_video")),o().createElement("input",{key:a,className:ct,type:"file",onChange:t,accept:i}))},ft=({type:e,onChange:t,currentLength:a,fileKey:i})=>{const r=e===yt.IMAGE?Et:bt,n=r-a;if(!n)return null;const d=e===yt.IMAGE?"image/*":"video/mp4";return o().createElement("label",{className:"--ENop"},e===yt.IMAGE?o().createElement(je,null):o().createElement(Ve,null),o().createElement("span",{className:pt},n,"/",r),o().createElement("input",{key:i,className:ct,type:"file",onChange:t,accept:d}))};let Et=6;const bt=1,wt=(0,p.connect)(null,{})((({images:e=[],videos:t=[],pendingImagesLength:a=0,pendingVideosLength:r=0,orderId:n,onMediaChange:d,onUploadSuccess:s,defaultVideoReview:_})=>{const p=e.length+a,c=t.length+r,[l,m]=(0,i.useState)(Math.random());if(p>=Et&&c>=bt)return null;const u=e=>t=>{m(Math.random());const a=`${Date.now()}`,i=t.target.files[0];if(e===yt.IMAGE)nt(i).then((t=>{d({type:e,key:a,media:t.image},1),(async(t,i,o)=>{const r={};try{const e=new Ge.MMSImg({env:Ye,country:ze,biz:4103});e.base64Upload([t]);const a=await e.done();r.response=a[0]}catch(n){r.error=n}var n,_;n=r.error,_=r.response,d({type:e,key:a},-1),_&&!n&&s(e,a,_.img_id)})(t.image,i.name)}));else{const i=t.target.files[0];dt(i).then((t=>{if(!(t.duration>=3e3&&t.duration<=6e4))throw new Error("duration");if(t.size>1e7)throw new Error("filesize");return d({type:e,key:a,media:t.cover,duration:t.duration},1),gt({file:i,orderid:n},t)})).then(st).then((t=>{d({type:e,key:a},-1),s(e,a,t)})).catch((t=>{"VIDEO_PLAY_ERROR"===t.type?window.alert(ht("rating_upload_video_fail_toast")):"filesize"===t.message?window.alert(ht("rating_toast_video_upload_size_limit")):"duration"===t.message?window.alert(ht("rating_toast_video_uploadlimit",{min:3,max:60})):d({type:e,key:a},-1)}))}};return p||c?o().createElement(i.Fragment,null,o().createElement(ft,{type:yt.IMAGE,onChange:u(yt.IMAGE),fileKey:`${yt.IMAGE}_${l}`,currentLength:p}),_?o().createElement(ft,{type:yt.VIDEO,onChange:u(yt.VIDEO),fileKey:`${yt.VIDEO}_${l}`,currentLength:c}):null):o().createElement(i.Fragment,null,o().createElement(vt,{type:yt.IMAGE,onChange:u(yt.IMAGE),fileKey:`${yt.IMAGE}_${l}`}),_?o().createElement(vt,{type:yt.VIDEO,onChange:u(yt.VIDEO),fileKey:`${yt.IMAGE}_${l}`}):null)})),Ct=e=>({media:e,type:yt.IMAGE,key:e}),St=e=>({media:e,type:yt.VIDEO,key:e.url}),Nt=({videos:e=[],images:t=[],onRemove:a,pendingVideos:r,pendingImages:n,cannotRedShow:d})=>o().createElement(i.Fragment,null,e.map((({media:e,key:t,type:i,quality:r})=>o().createElement("div",{key:t,className:lt,style:{backgroundImage:`url(${e.cover})`,border:d?"none":r?"string"==typeof r?"none":Object.values(r).includes(-2)||Object.values(r).includes(-1)?"2px solid #EE2C4A":"none":"none"}},o().createElement("button",{onClick:()=>a({type:i,key:t})},o().createElement($e,null)),o().createElement("div",{className:"_83XIDF"},o().createElement(Je,null),o().createElement("span",null,e.duration?((e=0,t="m:ss")=>{const a=Math.ceil(e/1e3),i=Math.floor(a/60),o=a%60,r={mm:`0${i}`.substr(-2),m:i,ss:`0${o}`.substr(-2),s:o};return Object.keys(r).reduce(((e,t)=>e.replace(t,`${r[t]}`)),t)})(e.duration):null))))),r.map(((e,t)=>o().createElement("div",{key:t,className:H()(lt,mt)},o().createElement("img",{src:e.media}),o().createElement(Xe,{width:54,height:54,duration:e.duration})))),t.map((({media:e,key:t,type:i,quality:r})=>o().createElement("div",{key:t,className:lt,style:{backgroundImage:`url(${(0,b.jP)(e)})`,border:d?"none":r?"string"==typeof r?"none":Object.values(r).includes(-2)||Object.values(r).includes(-1)?"2px solid #EE2C4A":"none":"none"}},o().createElement("button",{onClick:()=>a({type:i,key:t})},o().createElement($e,null))))),n.map(((e,t)=>o().createElement("div",{key:t,className:H()(lt,mt)},o().createElement("img",{src:e.media}),o().createElement(Xe,{width:54,height:54})))));class Rt extends i.Component{constructor(e){var t;super(e),t=this,this.timeoutTag=!1,this.currentImages=[],this.currentVideos=[],this.currentPendingImages=[],this.currentPendingVideos=[],this.handleRemoveMedia=({type:e,key:t})=>{const{defaultRatingMediaQualityCheck:a}=this.props,{images:i,videos:o}=this.state;e===yt.IMAGE?this.setState({images:i.filter((e=>e.key!==t))},(()=>{this.handleMediasChange(),a&&this.reportMediaCheck()})):this.setState({videos:o.filter((e=>e.key!==t))},(()=>{this.handleMediasChange(),a&&this.reportMediaCheck()}))},this.handleUploadSuccess=(e,t,a)=>{const{images:i,videos:o}=this.state,{defaultRatingMediaQualityCheck:r}=this.props;e===yt.IMAGE?this.setState({images:[...i,{key:t,type:e,media:a}]},(()=>{this.handleMediasChange(),r&&(this.timeoutTag=!1,this.uploadCheck(e,t,a))})):this.setState({videos:[...o,{key:t,type:e,media:a}]},(()=>{this.handleMediasChange(),r&&(this.timeoutTag=!1,this.uploadCheck(e,t,a))}))},this.clearMediaTimeout=()=>{},this.uploadCheck=async function(e,a,i,o=1){let r;const n=[],d=[],{collectAllMedia:s,itemId:_,cancelCollectMedia:p}=t.props;if(e===yt.IMAGE?(r=i,n.push(r)):(r=i.id,d.push(r)),o>10){if(e===yt.IMAGE){const e=t.state.images;e.forEach((e=>{e.media===i&&(e.quality={blur:0,blank:0,dark:0})})),t.setState({images:e},(()=>{clearTimeout(t.timeoutCheckMedia),p&&p(`${_}_${r}`),t.reportMediaCheck()}))}else if(e===yt.VIDEO){const e=t.state.videos;e.forEach((e=>{e.media.id===i.id&&(e.quality={blur:0,blank:0,dark:0})})),t.setState({videos:e},(()=>{clearTimeout(t.timeoutVideo),p&&p(`${_}_${r}`),t.reportMediaCheck()}))}return}if(t.timeoutTag)return;let c;s&&s(`${_}_${r}`);try{c=await _t(n,d)}catch(l){c={code:1e4}}if(0!==c.code)if(e===yt.VIDEO){const r=t.state.videos;t.setState({videos:r},(()=>{clearTimeout(t.timeoutVideo),t.timeoutVideo=setTimeout((()=>{t.uploadCheck(e,a,i,o+1)}),1e3)}))}else{const r=t.state.images;t.setState({images:r},(()=>{clearTimeout(t.timeoutCheckMedia),t.timeoutCheckMedia=setTimeout((()=>{t.uploadCheck(e,a,i,o+1)}),1e3)}))}else if(0===c.code)if(e===yt.IMAGE){const e=t.state.images;e.forEach((e=>{e.media===i&&(e.quality=c.data.image[0].quality)})),t.setState({images:e},(()=>{clearTimeout(t.timeoutCheckMedia),p&&p(`${_}_${r}`),t.reportMediaCheck()}))}else if(e===yt.VIDEO){const e=t.state.videos;e.forEach((e=>{e.media.id===i.id&&(e.quality=c.data.video[0].quality)})),t.setState({videos:e},(()=>{clearTimeout(t.timeoutVideo),p&&p(`${_}_${r}`),t.reportMediaCheck()}))}},this.reportMediaCheck=()=>{const{images:e,videos:t}=this.state,{isShowMediaCheckErr:a,itemId:i,collectMediaCheck:o}=this.props,r=[],n=[],d=[],s=[],_=[];let p;if(e.forEach((e=>{if(e.quality){const{blur:t,blank:a,dark:i}=e.quality,o=[],d=[];-2===t?o.push("blur"):-1===t&&d.push("blur"),-2===a?o.push("blank"):-1===a&&d.push("blank"),-2===i?o.push("dark"):-1===i&&d.push("dark"),o.length&&r.push(o),d.length&&n.push(d)}})),t.forEach((e=>{if(e.quality)if("string"==typeof e.quality)_.push(e.media.id);else{const{blur:t,blank:a,dark:i}=e.quality,o=[],r=[];-2===t?o.push("blur"):-1===t&&r.push("blur"),-2===a?o.push("blank"):-1===a&&r.push("blank"),-2===i?o.push("dark"):-1===i&&r.push("dark"),o.length&&d.push(o),r.length&&s.push(r)}})),_.length)if(r.length+d.length>0){let e=[];r.forEach((t=>{e=e.concat(t)})),d.forEach((t=>{e=e.concat(t)})),e=Array.from(new Set(e));const t={blur:e.includes("blur"),blank:e.includes("blank"),dark:e.includes("dark")};p={type:-3,videos:d.length,photos:r.length,collectObj:t}}else if(n.length+s.length>0){let e=[];n.forEach((t=>{e=e.concat(t)})),s.forEach((t=>{e=e.concat(t)})),e=Array.from(new Set(e));const t={blur:e.includes("blur"),blank:e.includes("blank"),dark:e.includes("dark")};p={type:-3,videos:s.length,photos:n.length,collectObj:t}}else p={type:-3,videos:0,photos:0,collectObj:{blur:!1,blank:!1,dark:!1}};else if(r.length+d.length>0){let e=[];r.forEach((t=>{e=e.concat(t)})),d.forEach((t=>{e=e.concat(t)})),e=Array.from(new Set(e));const t={blur:e.includes("blur"),blank:e.includes("blank"),dark:e.includes("dark")};p={type:-2,videos:d.length,photos:r.length,collectObj:t}}else if(n.length+s.length>0){let e=[];n.forEach((t=>{e=e.concat(t)})),s.forEach((t=>{e=e.concat(t)})),e=Array.from(new Set(e));const t={blur:e.includes("blur"),blank:e.includes("blank"),dark:e.includes("dark")};p={type:-1,videos:s.length,photos:n.length,collectObj:t}}else p={type:0,videos:0,photos:0,collectObj:{blur:!1,blank:!1,dark:!1}};a&&a(p),o&&o(i,p)},this.handleMediasChange=()=>{const{images:e,videos:t}=this.state;this.props.onMediasChange({images:e.map((({media:e})=>e)),videos:t.map((({media:e})=>e))})},this.isWebUrl=(e="")=>!!e.startsWith("http://")||!!e.startsWith("https://"),this.getValue=()=>{const{images:e,videos:t}=this.state;return[void 0,{photos:e.map((({media:e})=>e)),videos:t.map((({media:e})=>({url:e.url,id:e.id,cover:e.cover,duration:e.duration,upload_time:e.upload_time,cover_image_id:e.cover})))}]},this.handleMediaChange=(e,t=0)=>{let{type:a,key:i}=e,o=function(e,t){if(null==e)return{};var a,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,ut);const r=a===yt.IMAGE?"pendingImages":"pendingVideos",n=this.state[r];t>0?this.setState(gt({},this.state,{[r]:[...n,gt({key:i},o)]}),this.handleReadyStateChange):t<0&&this.setState(gt({},this.state,{[r]:n.filter((e=>e.key!==i))}),this.handleReadyStateChange)},this.handleReadyStateChange=()=>{const{pendingImages:e,pendingVideos:t}=this.state;this.props.onStateChange({ready:!(e.length||t.length)})},this.initCheckMedia=async function(e=1){if(e>10)return;if(t.timeoutTag)return;const{images:a,videos:i}=t.state;if(a.length+i.length===0)return;const o=[],r=[];let n;a.forEach((e=>o.push(e.media))),i.forEach((e=>r.push(e.media.id)));try{n=await _t(o,r)}catch(d){n={code:1e4}}0===n.code?(n.data&&n.data.image.forEach((e=>{a.forEach((t=>{t.media===e.image_id&&(t.quality=e.quality)}))})),n.data&&n.data.video.forEach((e=>{i.forEach((t=>{t.media.id===e.video_id&&(t.quality=e.quality)}))})),t.setState({images:a,videos:i},(()=>{t.reportMediaCheck()}))):(clearTimeout(t.initTimeoutCheck),t.initTimeoutCheck=setTimeout((()=>{t.initCheckMedia(e+1)}),1e3))},this.UNSAFE_componentWillReceiveProps=e=>{const{showDialogNow:t,cannotRedShow:a}=this.props;e.showDialogNow!==t&&this.setState({showDialogNow:e.showDialogNow}),(null==e?void 0:e.cannotRedShow)!==a&&this.setState({})},this.state={images:(e.images||[]).map(Ct),videos:(e.videos||[]).map(St),pendingImages:[],pendingVideos:[],showDialogNow:!1},e.defaultVideoReview&&(Et=5)}componentDidMount(){const{defaultRatingMediaQualityCheck:e}=this.props;e&&(this.timeoutTag=!1,this.initCheckMedia())}componentWillUnmount(){this.clearMediaTimeout()}render(){const{images:e,videos:t,pendingImages:a,pendingVideos:i,showDialogNow:r}=this.state,{defaultRatingCommentCheck:n,cannotRedShow:d}=this.props;return r||(this.currentImages=e,this.currentVideos=t,this.currentPendingImages=a,this.currentPendingVideos=i),o().createElement("div",{className:"_46Yt1i"},n?o().createElement(o().Fragment,null,o().createElement(Nt,{pendingImages:a,pendingVideos:i,images:e,videos:t,onRemove:this.handleRemoveMedia,cannotRedShow:d}),o().createElement(wt,{images:e,videos:t,pendingImagesLength:a.length,pendingVideosLength:i.length,orderId:this.props.orderId,onMediaChange:this.handleMediaChange,onUploadSuccess:this.handleUploadSuccess,defaultVideoReview:this.props.defaultVideoReview,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck})):o().createElement(o().Fragment,null,o().createElement(Nt,{pendingImages:this.currentPendingImages,pendingVideos:this.currentPendingVideos,images:this.currentImages,videos:this.currentVideos,onRemove:this.handleRemoveMedia,cannotRedShow:d}),o().createElement(wt,{images:this.currentImages,videos:this.currentVideos,pendingImagesLength:this.currentPendingImages.length,pendingVideosLength:this.currentPendingVideos.length,orderId:this.props.orderId,onMediaChange:this.handleMediaChange,onUploadSuccess:this.handleUploadSuccess,defaultVideoReview:this.props.defaultVideoReview,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck})))}}const kt="_2LhMgE",{t:Ot}=r.I18n;function Mt(e){return e/16+"rem"}const It=/(\r\n)|\r|\n/g;class Tt extends i.Component{constructor(e){super(e),this.textareaRef=null,this.handleChange=e=>{this.textareaRef&&(this.textareaRef.style.height="auto",this.textareaRef.style.height=Mt(this.textareaRef.scrollHeight)),this.setState({value:e}),this.props.onTemplateChange(this.props.template,e.replace(It," "))},this.handleKeydown=e=>{13===e.keyCode&&e.preventDefault()},this.handleSelect=e=>{e.preventDefault();const{template:t}=this.state;if(this.textareaRef){const e=this.textareaRef.selectionStart,a=this.textareaRef.selectionEnd;e<=t.length&&this.textareaRef.setSelectionRange(t.length,a)}},this.handleMouseMove=e=>{e.preventDefault()};const{value:t,index:a}=e;this.holderText=0===a?`${Ot("label_review_template_hint")}`:"",this.state={template:"",value:`${t||""}`}}shouldComponentUpdate(e,t){return t!==this.state}componentDidMount(){this.props.onTemplateChange(this.props.template,this.state.value),window.document.body.style.userSelect="none",this.textareaRef&&this.state.value&&(this.textareaRef.style.height="auto",this.textareaRef.style.height=Mt(this.textareaRef.scrollHeight))}render(){const{value:e}=this.state;return i.createElement("div",{className:"UzvaFO"},i.createElement("div",{className:"ej4ckG",style:{fontWeight:e?600:"normal"}},this.props.template.trim(),":"),i.createElement("textarea",{className:kt,value:e,onChange:e=>{let t=e.target.value;this.handleChange(t)},onKeyDown:this.handleKeydown,onMouseMove:this.handleMouseMove,rows:1,placeholder:this.holderText,ref:e=>{this.textareaRef=e}}))}componentWillUnmount(){window.document.body.style.userSelect="auto"}}const Lt=Tt;function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Bt.apply(this,arguments)}const{t:xt}=r.I18n;var At=function(e){return e[e.normal=0]="normal",e[e.low=-1]="low",e[e.exLow=-2]="exLow",e}(At||{});class Dt extends i.Component{constructor(e){super(e),this.textareaRef=null,this.text=`${xt("label_review_template_newhint")}`,this.onChangeTemplateText=(e,t)=>{const{value:a,templateMap:i}=this.state,{onTemplateChange:o}=this.props,r=Bt({},i,{[e]:t});this.setState({templateMap:r,ratingComments:Object.values(r).join("")+a}),"function"==typeof o&&o(e,t)},this.handleChange=e=>{const{templateMap:t}=this.state;this.textareaRef&&(this.textareaRef.style.height="auto",this.textareaRef.style.height=this.textareaRef.scrollHeight/16+"rem"),this.setState({value:e,ratingComments:Object.values(t).join("")+e}),this.props.onCommentChange(e)},this.handleFocus=()=>{},this.handleBlur=()=>{},this.handleMouseMove=e=>{e.preventDefault()},this.state={value:e.value||"",placeholder:this.text,templateMap:{},ratingComments:""}}shouldComponentUpdate(e,t){return t!==this.state||e!==this.props}render(){const{value:e,placeholder:t,ratingComments:a}=this.state,{templateTags:o,templateTagComments:r,commentQuality:n,canGetCoin:d,mediaQuantity:s,minimum_characters:_}=this.props;return i.createElement("div",{className:n===At.exLow||s===Zt.EX_LOW&&n!==At.normal||n!==At.normal&&d?"BKScP5":"X3Qjvs"},o.map(((e,t)=>i.createElement(Lt,{template:e,onTemplateChange:this.onChangeTemplateText,key:e,value:r[e],index:t}))),i.createElement("div",{className:"CLFTQP"}),i.createElement("div",{style:{position:"relative"}},i.createElement("textarea",{className:kt,value:e,onChange:e=>{let t=e.target.value;this.handleChange(t)},onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseMove:this.handleMouseMove,style:{minHeight:"100px",color:"rgba(0, 0, 0, 0.87)"},rows:3,placeholder:t,ref:e=>{this.textareaRef=e}})))}}Dt.defaultProps={templateTagComments:{}};const Vt=Dt,qt=(0,a(4189).Z)(),Ut="text",Wt=(e="")=>{let t=0;const a=((e="")=>{const t=[];let a=e.replace(/\s+|\t|\n|\v|\r|\f|[\ufe00-\ufe0f]/g,"");for(;a.length>0;){var i;const e=null==(i=a.match(qt))?void 0:i[0];if(e){const i=a.indexOf(e);i>0&&t.push({text:a.slice(0,i).replace(/\u200d/,""),type:Ut}),t.push({text:e,type:"other"}),a=a.slice(i+e.length)}else t.push({text:a.replace(/\u200d/,""),type:Ut}),a=""}return t})(e);for(let i=0;i<a.length;i++)a[i].type===Ut?t+=a[i].text.length:t+=1;return t};function jt(e){return e?Wt(e):0}var Ft=function(e){return e[e.normal=0]="normal",e[e.elow=-2]="elow",e[e.low=-1]="low",e[e.notready=-3]="notready",e}(Ft||{}),$t=function(e){return e[e.normal=0]="normal",e[e.low=-1]="low",e[e.exLow=-2]="exLow",e}($t||{});const{t:Pt}=r.I18n;function Jt(e,t,a,i,o,r,n){let d="",s=0,_=0;return!t&&a?s=1:t&&!a?s=2:t&&a&&(s=3),r===o&&n!==o?_=1:r!==o&&n===o?_=2:r===o&&n===o&&(_=3),o===$t.normal?1===i.length?i.includes("blur")?d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_1`):Pt(`tips_medias_quality_low_${s}_1`):i.includes("blank")?d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_2`):Pt(`tips_medias_quality_low_${s}_2`):i.includes("dark")&&(d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_3`):Pt(`tips_medias_quality_low_${s}_3`)):2===i.length?i.includes("blur")&&i.includes("blank")?d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_4`):Pt(`tips_medias_quality_low_${s}_4`):i.includes("blur")&&i.includes("dark")?d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_5`):Pt(`tips_medias_quality_low_${s}_5`):i.includes("blank")&&i.includes("dark")&&(d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_6`):Pt(`tips_medias_quality_low_${s}_6`)):3===i.length&&(d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_7`):Pt(`tips_medias_quality_low_${s}_7`)):o===$t.low?e===Ft.normal||e===Ft.notready?d=Pt(`tips_comment_check_low_1_${_}`):e===Ft.low?1===i.length?i.includes("blur")?d=Pt(`tips_media_comment_check_low_${s}_1_${_}`):i.includes("blank")?d=Pt(`tips_media_comment_check_low_${s}_2_${_}`):i.includes("dark")&&(d=Pt(`tips_media_comment_check_low_${s}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?d=Pt(`tips_media_comment_check_low_${s}_4_${_}`):i.includes("blur")&&i.includes("dark")?d=Pt(`tips_media_comment_check_low_${s}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(d=Pt(`tips_media_comment_check_low_${s}_6_${_}`)):3===i.length&&(d=Pt(`tips_media_comment_check_low_${s}_7_${_}`)):e===Ft.elow&&(1===i.length?i.includes("blur")?d=Pt(`tips_media_comment_check_ex_${s}_1_${_}`):i.includes("blank")?d=Pt(`tips_media_comment_check_ex_${s}_2_${_}`):i.includes("dark")&&(d=Pt(`tips_media_comment_check_ex_${s}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?d=Pt(`tips_media_comment_check_ex_${s}_4_${_}`):i.includes("blur")&&i.includes("dark")?d=Pt(`tips_media_comment_check_ex_${s}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(d=Pt(`tips_media_comment_check_ex_${s}_6_${_}`)):3===i.length&&(d=Pt(`tips_media_comment_check_ex_${s}_7_${_}`))):o===$t.exLow&&(e===Ft.elow||e===Ft.low?1===i.length?i.includes("blur")?d=Pt(`tips_media_comment_check_ex_${s}_1_${_}`):i.includes("blank")?d=Pt(`tips_media_comment_check_ex_${s}_2_${_}`):i.includes("dark")&&(d=Pt(`tips_media_comment_check_ex_${s}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?d=Pt(`tips_media_comment_check_ex_${s}_4_${_}`):i.includes("blur")&&i.includes("dark")?d=Pt(`tips_media_comment_check_ex_${s}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(d=Pt(`tips_media_comment_check_ex_${s}_6_${_}`)):3===i.length&&(d=Pt(`tips_media_comment_check_ex_${s}_7_${_}`)):d=Pt("tips_comment_check_dialog_exlow")),d}function Ht(e,t,a,i,o,r,n){let d="",s=0,_=0;return!t&&a?s=1:t&&!a?s=2:t&&a&&(s=3),r===o&&n!==o?_=1:r!==o&&n===o?_=2:r===o&&n===o&&(_=3),o===$t.normal?1===i.length?i.includes("blur")?d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_1`):Pt(`tips_medias_quality_low_edit_${s}_1`):i.includes("blank")?d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_2`):Pt(`tips_medias_quality_low_edit_${s}_2`):i.includes("dark")&&(d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_3`):Pt(`tips_medias_quality_low_edit_${s}_3`)):2===i.length?i.includes("blur")&&i.includes("blank")?d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_4`):Pt(`tips_medias_quality_low_edit_${s}_4`):i.includes("blur")&&i.includes("dark")?d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_5`):Pt(`tips_medias_quality_low_edit_${s}_5`):i.includes("blank")&&i.includes("dark")&&(d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_6`):Pt(`tips_medias_quality_low_edit_${s}_6`)):3===i.length&&(d=e===Ft.elow?Pt(`tips_medias_quality_ex_${s}_7`):Pt(`tips_medias_quality_low_edit_${s}_7`)):o===$t.low?e===Ft.normal||e===Ft.notready?d=Pt(`tips_comment_check_low_edit_1_${_}`):e===Ft.low?1===i.length?i.includes("blur")?d=Pt(`tips_media_comment_check_low_edit_${s}_1_${_}`):i.includes("blank")?d=Pt(`tips_media_comment_check_low_edit_${s}_2_${_}`):i.includes("dark")&&(d=Pt(`tips_media_comment_check_low_edit_${s}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?d=Pt(`tips_media_comment_check_low_edit_${s}_4_${_}`):i.includes("blur")&&i.includes("dark")?d=Pt(`tips_media_comment_check_low_edit_${s}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(d=Pt(`tips_media_comment_check_low_edit_${s}_6_${_}`)):3===i.length&&(d=Pt(`tips_media_comment_check_low_edit_${s}_7_${_}`)):e===Ft.elow&&(1===i.length?i.includes("blur")?d=Pt(`tips_media_comment_check_ex_${s}_1_${_}`):i.includes("blank")?d=Pt(`tips_media_comment_check_ex_${s}_2_${_}`):i.includes("dark")&&(d=Pt(`tips_media_comment_check_ex_${s}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?d=Pt(`tips_media_comment_check_ex_${s}_4_${_}`):i.includes("blur")&&i.includes("dark")?d=Pt(`tips_media_comment_check_ex_${s}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(d=Pt(`tips_media_comment_check_ex_${s}_6_${_}`)):3===i.length&&(d=Pt(`tips_media_comment_check_ex_${s}_7_${_}`))):o===$t.exLow&&(e===Ft.elow||e===Ft.low?1===i.length?i.includes("blur")?d=Pt(`tips_media_comment_check_ex_${s}_1_${_}`):i.includes("blank")?d=Pt(`tips_media_comment_check_ex_${s}_2_${_}`):i.includes("dark")&&(d=Pt(`tips_media_comment_check_ex_${s}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?d=Pt(`tips_media_comment_check_ex_${s}_4_${_}`):i.includes("blur")&&i.includes("dark")?d=Pt(`tips_media_comment_check_ex_${s}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(d=Pt(`tips_media_comment_check_ex_${s}_6_${_}`)):3===i.length&&(d=Pt(`tips_media_comment_check_ex_${s}_7_${_}`)):d=Pt("tips_comment_check_dialog_exlow")),d}function Xt(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Gt.apply(this,arguments)}const{t:Qt}=r.I18n;let Zt=function(e){return e[e.NO_READY=-3]="NO_READY",e[e.EX_LOW=-2]="EX_LOW",e[e.LOW=-1]="LOW",e[e.NORMAL=0]="NORMAL",e}({});var zt=function(e){return e[e.normal=0]="normal",e[e.low=-1]="low",e[e.exLow=-2]="exLow",e}(zt||{});const Yt=[];class Kt extends i.Component{constructor(e){var t,a;super(e),this.mediaRef=null,this.useReviewTemplate=!1,this.templateTagComments={},this.commentQuality=zt.normal,this.showErrContentForCheckResult=!1,this.showErrMsgForCheckResult="",this.canGetCoin=!1,this.initMedias=()=>{const{rating:e,isFollowUp:t}=this.props;return t?{videos:Yt,images:Yt}:{images:e&&e.images?e.images:Yt,videos:e&&e.videos?e.videos:Yt}},this.initComments=()=>{const{isUpdating:e,rating:t,originTemplateTags:a,isFollowUp:i}=this.props,o=t?t.comment:"",r=!!t&&!!t.has_template_tag;if(i)return{comment:""};if(!e||!this.useReviewTemplate||!r)return{comment:o};const{tmpTagsComments:n,comments:d}=(0,b.mx)(a||[],o);return this.templateTagComments=Gt({},n),{comment:d}},this.toggleRatingAnonymous=()=>{this.setState({ratingAnonymous:!this.state.ratingAnonymous},(()=>{this.handleReadyStateChange()}))},this.handleMediasChange=({images:e,videos:t})=>{this.setState({images:e,videos:t},(()=>{this.canGetCoins(),this.handleReadyStateChange()}))},this.onCommentChange=e=>{const{deleteCommentCheckItemId:t,item:a}=this.props;this.setState({comment:e},(()=>{this.canGetCoins(),this.handleReadyStateChange()})),t&&t(a.itemid)},this.onTemplateChange=(e,t)=>{const{deleteCommentCheckItemId:a,item:i}=this.props;this.templateTagComments=Gt({},this.templateTagComments,{[e]:t}),Object.keys(this.templateTagComments).forEach((e=>{this.templateTagComments[e]=Xt(this.templateTagComments[e])})),this.setState({},(()=>{this.handleReadyStateChange()})),this.canGetCoins(),a&&a(i.itemid)},this.getRatingComments=()=>{if(!this.useReviewTemplate)return this.state.comment;let e=this.state.comment;return Object.values(this.templateTagComments).forEach((t=>{e+=t})),e},this.isShowMediaCheckErr=e=>{const{type:t=0,videos:a=0,photos:i=0}=e,{isUpdating:o,isItemValidationCheckPass:r}=this.props;let n="";if(t===Zt.EX_LOW||t===Zt.LOW||t===Zt.NO_READY){const{defaultRatingCommentCheck:d}=this.props,{collectObj:s}=e,{blur:_,blank:p,dark:c}=s;let l=[_?"blur":void 0,p?"blank":void 0,c?"dark":void 0];l=l.filter((e=>void 0!==e)),d?1===l.length?l.includes("blank")?n=Qt("tips_media_content_1_"+(t===Zt.EX_LOW?"exlow":o||!r?"edit_low":"low")):l.includes("blur")?n=Qt("tips_media_content_2_"+(t===Zt.EX_LOW?"exlow":o||!r?"edit_low":"low")):l.includes("dark")&&(n=Qt("tips_media_content_3_"+(t===Zt.EX_LOW?"exlow":o||!r?"edit_low":"low"))):2===l.length?l.includes("blank")&&l.includes("blur")?n=Qt("tips_media_content_4_"+(t===Zt.EX_LOW?"exlow":o||!r?"edit_low":"low")):l.includes("blank")&&l.includes("dark")?n=Qt("tips_media_content_5_"+(t===Zt.EX_LOW?"exlow":o||!r?"edit_low":"low")):l.includes("blur")&&l.includes("dark")&&(n=Qt("tips_media_content_6_"+(t===Zt.EX_LOW?"exlow":o||!r?"edit_low":"low"))):n=Qt("tips_media_content_7_"+(t===Zt.EX_LOW?"exlow":o||!r?"edit_low":"low")):a&&i?1===l.length?l.includes("blur")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_3_1"):Qt(o||!r?"tips_medias_quality_low_edit_3_1":"tips_medias_quality_low_3_1"):l.includes("blank")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_3_2"):Qt(o||!r?"tips_medias_quality_low_edit_3_2":"tips_medias_quality_low_3_2"):l.includes("dark")&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_3_3"):Qt(o||!r?"tips_medias_quality_low_edit_3_3":"tips_medias_quality_low_3_3")):2===l.length?l.includes("blur")&&l.includes("blank")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_3_4"):Qt(o||!r?"tips_medias_quality_low_edit_3_4":"tips_medias_quality_low_3_4"):l.includes("blur")&&l.includes("dark")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_3_5"):Qt(o||!r?"tips_medias_quality_low_edit_3_5":"tips_medias_quality_low_3_5"):l.includes("blank")&&l.includes("dark")&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_3_6"):Qt(o||!r?"tips_medias_quality_low_edit_3_6":"tips_medias_quality_low_3_6")):3===l.length&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_3_7"):Qt(o||!r?"tips_medias_quality_low_edit_3_7":"tips_medias_quality_low_3_7")):a&&!i?1===l.length?l.includes("blur")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_2_1"):Qt(o||!r?"tips_medias_quality_low_edit_2_1":"tips_medias_quality_low_2_1"):l.includes("blank")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_2_2"):Qt(o||!r?"tips_medias_quality_low_edit_2_2":"tips_medias_quality_low_2_2"):l.includes("dark")&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_2_3"):Qt(o||!r?"tips_medias_quality_low_edit_2_3":"tips_medias_quality_low_2_3")):2===l.length?l.includes("blur")&&l.includes("blank")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_2_4"):Qt(o||!r?"tips_medias_quality_low_edit_2_4":"tips_medias_quality_low_2_4"):l.includes("blur")&&l.includes("dark")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_2_5"):Qt(o||!r?"tips_medias_quality_low_edit_2_5":"tips_medias_quality_low_2_5"):l.includes("blank")&&l.includes("dark")&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_2_6"):Qt(o||!r?"tips_medias_quality_low_edit_2_6":"tips_medias_quality_low_2_6")):3===l.length&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_2_7"):Qt(o||!r?"tips_medias_quality_low_edit_2_7":"tips_medias_quality_low_2_7")):!a&&i&&(1===l.length?l.includes("blur")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_1_1"):Qt(o||!r?"tips_medias_quality_low_edit_1_1":"tips_medias_quality_low_1_1"):l.includes("blank")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_1_2"):Qt(o||!r?"tips_medias_quality_low_edit_1_2":"tips_medias_quality_low_1_2"):l.includes("dark")&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_1_3"):Qt(o||!r?"tips_medias_quality_low_edit_1_3":"tips_medias_quality_low_1_3")):2===l.length?l.includes("blur")&&l.includes("blank")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_1_4"):Qt(o||!r?"tips_medias_quality_low_edit_1_4":"tips_medias_quality_low_1_4"):l.includes("blur")&&l.includes("dark")?n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_1_5"):Qt(o||!r?"tips_medias_quality_low_edit_1_5":"tips_medias_quality_low_1_5"):l.includes("blank")&&l.includes("dark")&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_1_6"):Qt(o||!r?"tips_medias_quality_low_edit_1_6":"tips_medias_quality_low_1_6")):3===l.length&&(n=t===Zt.EX_LOW?Qt("tips_medias_quality_ex_1_7"):Qt(o||!r?"tips_medias_quality_low_edit_1_7":"tips_medias_quality_low_1_7"))),this.setState({showMediaCheckErrContent:!!n,showMediaErrContent:n,mediaQualityType:t,photosCheckLength:i,videosCheckLength:a,badTypeArr:l},(()=>{const{defaultRatingCommentCheck:e}=this.props;e&&this.controlContent(),this.canGetCoins()}))}else this.setState({showMediaCheckErrContent:!1,mediaQualityType:Zt.NORMAL,photosCheckLength:0,videosCheckLength:0,badTypeArr:[]},(()=>{const{defaultRatingCommentCheck:e}=this.props;e&&this.controlContent(),this.canGetCoins()}))},this.canGetCoins=()=>{const{ratingMeta:e,defaultVideoReview:t,categoryCoin:a,isUpdating:i,collectCoinItem:o,item:r,isFollowUp:n}=this.props,{videos:d,images:s}=this.state,_=jt(this.getRatingComments());if(n)this.canGetCoin=!1;else if(!i)if(e&&e.coins_earned>=0){const i=Math.max(0,(null==e?void 0:e.minimum_characters)-_),n=Math.max(0,(null==e?void 0:e.minimum_pictures)-s.length),p=!i,c=!n,l=!Math.max(0,((null==e?void 0:e.minimum_videos)||0)-d.length);if(t){const t=(null==a?void 0:a.coins_earned_with_pictures_and_videos)||(null==e?void 0:e.coins_earned_with_pics_and_videos)||0,i=(null==a?void 0:a.coins_earned_with_pictures_or_videos)||(null==e?void 0:e.coins_earned)||0;if(!t&&!i)return o&&o(r.itemid,!1),void(this.canGetCoin=!1);p&&c&&l?t||i?(o&&o(r.itemid,!0),this.canGetCoin=!0):(o&&o(r.itemid,!1),this.canGetCoin=!1):p&&c?i?(o&&o(r.itemid,!0),this.canGetCoin=!0):(o&&o(r.itemid,!1),this.canGetCoin=!1):p&&l&&i?(o&&o(r.itemid,!0),this.canGetCoin=!0):(o&&o(r.itemid,!1),this.canGetCoin=!1)}else null!=e&&e.coins_earned?i||n?(o&&o(r.itemid,!1),this.canGetCoin=!1):(o&&o(r.itemid,!0),this.canGetCoin=!0):(o&&o(r.itemid,!1),this.canGetCoin=!1)}else o&&o(r.itemid,!1),this.canGetCoin=!0},this.clearMediaTimeout=()=>{var e;null==(e=this.mediaRef)||e.clearMediaTimeout()},this.getCommentCheck=()=>{const{commentCheckMap:e,item:t}=this.props,{itemid:a}=t,i=e&&e[Number(a)]?e[Number(a)]:{text:0,emoji:0,total:0};return this.commentQuality=i.total,i},this.renderTipsForComment=()=>{const{isUpdating:e,isItemValidationCheckPass:t}=this.props;this.getCommentCheck(),this.commentQuality===zt.normal?(this.showErrContentForCheckResult=!1,this.showErrMsgForCheckResult=""):this.commentQuality===zt.low?(this.showErrContentForCheckResult=!0,this.showErrMsgForCheckResult=Qt(e||!t?"tips_comment_content_edit_low":"tips_comment_content_low")):this.commentQuality===zt.exLow&&(this.showErrContentForCheckResult=!0,this.showErrMsgForCheckResult=Qt("tips_comment_content_exlow"))},this.renderTipsForMediaCheckAndComment=()=>{const{mediaQualityType:e,photosCheckLength:t,videosCheckLength:a,badTypeArr:i}=this.state,{isUpdating:o}=this.props,r=this.getCommentCheck();this.commentQuality===zt.normal?e===Zt.NORMAL||e===Zt.NO_READY?(this.showErrContentForCheckResult=!1,this.showErrMsgForCheckResult=""):(this.showErrContentForCheckResult=!0,this.showErrMsgForCheckResult=o?Ht(e,a,t,i,this.commentQuality,(null==r?void 0:r.text)||0,(null==r?void 0:r.emoji)||0):Jt(e,a,t,i,this.commentQuality,(null==r?void 0:r.text)||0,(null==r?void 0:r.emoji)||0)):(this.commentQuality===zt.low||this.commentQuality===zt.exLow)&&(this.showErrContentForCheckResult=!0,this.showErrMsgForCheckResult=o?Ht(e,a,t,i,this.commentQuality,(null==r?void 0:r.text)||0,(null==r?void 0:r.emoji)||0):Jt(e,a,t,i,this.commentQuality,(null==r?void 0:r.text)||0,(null==r?void 0:r.emoji)||0))},this.getHeight=()=>{var e;if(this.ratingHandlerDivRef)return null==(e=this.ratingHandlerDivRef)?void 0:e.offsetHeight},this.controlContent=(e="useTag")=>{if("useTag"===e){const{showDialogNow:e}=this.props;e||this.setState({currentMediaErrStatus:this.state.showMediaCheckErrContent,currentMediaErrContent:this.state.showMediaErrContent})}else e||this.setState({currentMediaErrStatus:this.state.showMediaCheckErrContent,currentMediaErrContent:this.state.showMediaErrContent})},this.handleRatingCommentChange=e=>{const{deleteCommentCheckItemId:t,item:a}=this.props;this.setState({comment:e},(()=>{this.canGetCoins(),this.handleReadyStateChange()})),t&&t(a.itemid)},this.onTagsChanged=e=>{this.setState({tags:e},(()=>{this.handleReadyStateChange()}))},this.handleRatingChange=e=>{if(e!==this.state.ratingStar){let t={ratingStar:e,tags:{},ratingReady:this.state.ratingReady};this.state.ratingReady||(t=Gt({},t,{ratingReady:!0})),this.setState(t,(()=>{this.handleReadyStateChange()}))}},this.handleReadyStateChange=()=>{this.props.onReadyStateChange&&this.props.onReadyStateChange()};const{rating:i,defaultRatingAnonymous:o,defaultRatingReviewTemplate:r,item:n,isUpdating:d,ratingMeta:s,isFollowUp:_}=e;this.templateTags=d?i?i.template_tags:[]:n.template_tags;const p=!(!this.templateTags||!this.templateTags.length);this.useReviewTemplate=r&&p,this.isExclude=["TW","MY","CO","CL"].includes((0,ee.Kd)()),this.state=Gt({ratingReady:!!(_||(i?null!=(t=i.detailed_rating)&&t.product_quality?i.detailed_rating.product_quality:i.rating_star:null!=s&&s.default_rating_star&&null!=s&&s.default_rating_star)),ratingStar:(null==i||null==(a=i.detailed_rating)?void 0:a.product_quality)||(null==i?void 0:i.rating_star)||(null==s?void 0:s.default_rating_star)||0,ratingAnonymous:o||!1,tags:_?{}:i&&i.tags?i.tags.reduce(((e,t)=>(e[t.tag_id]=!0,e)),{}):{}},this.initMedias(),this.initComments(),{showMediaCheckErrContent:!1,showMediaErrContent:"",mediaQualityType:Zt.NORMAL,videosCheckLength:0,photosCheckLength:0,badTypeArr:[],currentMediaErrContent:"",currentMediaErrStatus:!1})}convertUrlsToImageData(e){return e.map((e=>({image:e,thumbnail:e})))}renderName(){const{ratingAnonymous:e}=this.state,{username:t}=this.props,a=e?de(t):t;return i.createElement(i.Fragment,null,i.createElement("div",{className:"rating-modal-handler__rating-anonymous-hint"},Qt(this.isExclude?"pr_label_rate_anonymously":"label_show_username_on_your_review")),i.createElement("div",{className:"rating-modal-handler__rating-anonymous-username"},Qt("pr_label_rate_anonymous_preview",{name:a})))}UNSAFE_componentWillReceiveProps(e){const{showDialogNow:t,defaultRatingCommentCheck:a,isUpdating:i,cannotRedShow:o}=this.props;a&&e.showDialogNow!==t&&this.controlContent(e.showDialogNow),i||(null==e?void 0:e.cannotRedShow)!==o&&this.setState({})}render(){const{ratingMeta:e,isItemValidationCheckPass:t,isUpdating:a,rating:o,defaultVideoReview:n,enableRatingCreationUIRevamp:d,defaultRatingCommentCheck:s,cannotRedShow:_,isFollowUp:p=!1}=this.props,{comment:c,showMediaCheckErrContent:l,showMediaErrContent:m,currentMediaErrContent:u,currentMediaErrStatus:g,mediaQualityType:h}=this.state,y=o||{images:[],videos:[]},v=this.getRatingComments();return s&&this.renderTipsForComment(),i.createElement("div",{className:H()("rating-modal-handler__container",!this.props.showBottomBorder&&"rating-modal-handler__container--last"),ref:e=>{this.ratingHandlerDivRef=e}},i.createElement(z,{item:p?Gt({},this.props.item,{name:r.I18n.t("product_quality_rating"),model_name:"",model_names:[]}):this.props.item,className:"UYED6+",bottomNode:p?i.createElement("div",{style:{marginLeft:-5,marginTop:"8px"},onClick:e=>{e.stopPropagation()}},i.createElement(V.kG,{size:29,rating:this.state.ratingStar,onRatingChange:this.handleRatingChange})):void 0}),i.createElement("div",{style:{margin:"20px 0"}},p?null:i.createElement(V.kG,{title:Qt("low_rating_detail_product_quality"),rating:this.state.ratingStar,onRatingChange:this.handleRatingChange})),this.state.ratingReady?i.createElement(i.Fragment,null,i.createElement("div",{className:"jz-Ezz"},this.useReviewTemplate?i.createElement(Vt,{templateTags:this.templateTags||[],onCommentChange:this.onCommentChange,onTemplateChange:this.onTemplateChange,value:c,templateTagComments:this.templateTagComments,commentQuality:this.commentQuality,canGetCoin:this.canGetCoin,mediaQuantity:h,minimum_characters:(null==e?void 0:e.minimum_characters)||0}):i.createElement("div",{style:{position:"relative"}},i.createElement(Me.Z,{value:c,onChange:e=>{const t=e.target.value;this.handleRatingCommentChange(t)},placeholder:Qt("label_review_template_newhint"),style:this.commentQuality===zt.exLow||h===Zt.EX_LOW&&this.commentQuality!==zt.normal||this.commentQuality!==zt.normal&&this.canGetCoin?{border:"2px solid #EE2C4A",transition:"none"}:{}})),i.createElement(Rt,{ref:e=>{this.mediaRef=e},orderId:this.props.orderId,images:p?[]:y.images||[],videos:p?[]:y.videos||[],onStateChange:this.props.onImageReadyStateChange,defaultVideoReview:n,onMediasChange:this.handleMediasChange,itemId:this.props.item.itemid,isShowMediaCheckErr:this.isShowMediaCheckErr,collectMediaCheck:this.props.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.props.collectAllMedia,cancelCollectMedia:this.props.cancelCollectMedia,showDialogNow:this.props.showDialogNow,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,cannotRedShow:!a&&_}),_?t?i.createElement(Be,{classname:"rating-hint-text-coin",requirement:e,imageCount:this.state.images.length,videoCount:this.state.videos.length,defaultVideoReview:n,enableRatingCreationUIRevamp:d,categoryCoin:this.props.categoryCoin,characterCount:jt(v)}):null:(s?g:l)||this.showErrContentForCheckResult?i.createElement("div",{className:"rating-modal-handler_media-err-content"},s&&this.showErrContentForCheckResult?i.createElement("div",null,this.showErrMsgForCheckResult):null,s?g?i.createElement("div",{className:this.showErrContentForCheckResult?"rating-comment-check-with-media-check":""},u):null:l?i.createElement("div",{className:this.showErrContentForCheckResult?"rating-comment-check-with-media-check":""},m):null):t?i.createElement(Be,{classname:"rating-hint-text-coin",requirement:e,imageCount:this.state.images.length,videoCount:this.state.videos.length,defaultVideoReview:n,enableRatingCreationUIRevamp:d,categoryCoin:this.props.categoryCoin,characterCount:jt(v)}):null),p?null:i.createElement("div",{className:"rating-modal-handler__rating-anonymous-wrapper"},i.createElement(Ie.Z,{checked:this.isExclude?this.state.ratingAnonymous:!this.state.ratingAnonymous,onClick:this.toggleRatingAnonymous}),i.createElement("div",{style:{marginLeft:4},onClick:this.toggleRatingAnonymous},this.renderName()))):null)}getData(){if(!this.mediaRef)return null;const[e,t]=this.mediaRef.getValue();return e?null:Gt({itemid:this.props.item.itemid,product_quality:this.state.ratingStar,comment:this.state.comment},t,{tagids:Object.keys(this.state.tags).map(Number).filter((e=>this.state.tags[e])),anonymous:this.state.ratingAnonymous,template_tag_comments:Gt({},this.templateTagComments)})}getEditData(){if(!this.mediaRef)return null;const[e,t]=this.mediaRef.getValue();return e?null:Gt({itemid:this.props.item.itemid,comment:this.state.comment},t,{tagids:Object.keys(this.state.tags).map(Number).filter((e=>this.state.tags[e])),anonymous:this.state.ratingAnonymous,detailed_rating:{product_quality:this.state.ratingStar,seller_service:this.props.detailedRating.seller_service,delivery_service:this.props.detailedRating.delivery_service},template_tag_comments:Gt({},this.templateTagComments)})}}Kt.defaultProps={showBottomBorder:!1};const ea=Kt;var ta=a(4875);const aa="vTGJzu",ia="izk1hM",oa="_1oVQkX";var ra=a(9060),na=a(4296),da=a(3391),sa=a(3788);const _a="K21XuF",pa="-i3zLJ",{t:ca}=r.I18n,la=e=>{const{direction:t,meta:a,categoryCoinList:r,coinLimitSetting:n}=e,d=(()=>{let e;switch((0,ee.Kd)()){case"MX":case"CL":case"CO":e="";break;case"SG":e="https://help.shopee.sg/s/article/How-to-write-a-high-quality-product-review-0222";break;case"ID":e="https://help.shopee.co.id/s/article/Bagaimana-cara-menulis-ulasan-yang-baik";break;case"VN":e="https://help.shopee.vn/s/article/Lam-The-Nao-De-Co-1-Bai-Viet-Danh-Gia-Chat-Luong";break;case"MY":e="https://help.shopee.com.my/my/s/article/How-to-write-a-high-quality-product-review";break;case"TW":e="https://help.shopee.tw/tw/s/article/%E5%A6%82%E4%BD%95%E6%92%B0%E5%AF%AB%E6%9C%89%E5%B9%AB%E5%8A%A9%E7%9A%84%E5%95%86%E5%93%81%E8%A9%95%E5%83%B";break;case"TH":e="https://help.shopee.co.th/s/article/%E0%B8%81%E0%B8%B2%E0%B8%A3%E0%B8%A3%E0%B8%B5%E0%B8%A7%E0%B8%B4%E0%B8%A7%E0%B8%AA%E0%B8%B4%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B9%83%E0%B8%AB%E0%B9%89%E0%B8%A1%E0%B8%B5%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%AA%E0%B8%B4%E0%B8%97%E0%B8%98%E0%B8%B4%E0%B8%A0%E0%B8%B2%E0%B8%9E";break;case"BR":e="https://help.shopee.com.br/s/article/Como-ajudar-os-compradores-dando-avalia%C3%A7%C3%B5es-de-qualidade";break;case"PH":e="https://help.shopee.ph/ph/s/article/How-to-write-a-high-quality-product-review-ph";break;case"PL":e="https://help.shopee.pl/portal/article/183";break;case"ES":e="https://help.shopee.es/portal/article/69241-%C2%BFC%C3%B3mo-escribir-una-rese%C3%B1a-de-producto-de-alta-calidad?previousPage=secondary%20category&previousPage=other%20articles";break;case"AR":e="https://help.shopee.com.ar/portal/article/86827 "}return e})(),{show_pic_and_video:s,pic_and_video:_,show_pic_or_video:p,pic_or_video:c}=he(0,r),l=n&&n.threshold>0,m=n&&n.max_times>0&&n.duration>0,u={shopid:null==a?void 0:a.shopId,orderid:null==a?void 0:a.orderId},g=(0,i.useRef)(null),h=(0,da.Z)("RATING.imprReviewRewardCriteriaPanel",u),y=(0,sa.Z)("RATING.clickReviewRewardCriteriaPanel",{});return(0,i.useEffect)((()=>{h(g.current)}),[h]),o().createElement(na.Z,{arrowWidth:28,arrowHeight:10,margin:0,arrowBackgroundColor:"#fff",position:"top"===t?na.I.BOTTOM_RIGHT:na.I.TOP_LEFT,fixedPosition:!0,showArrow:!0,showBorder:!0,useSafeMargin:!1,target:o().createElement("span",{onClick:()=>{y({targetData:u})}},"top"===t?o().createElement("span",{className:"V-sGOI"},o().createElement("span",{className:"ej1BZw"})):o().createElement("span",{className:"_6-3Yc3"},"?")),popover:o().createElement("div",{className:"MENgN5",ref:g},o().createElement("div",{className:"KCnyCs"},o().createElement("div",{className:"_2xgmwo"},ca("coins_panel_title")),o().createElement("div",{className:"mmBt8Y"},ca("coins_panel_tip",{minimum_characters:null==a?void 0:a.minimum_characters}))),o().createElement("div",{className:"sfB8We",style:{display:p||s?void 0:"none"}},o().createElement("div",{className:"HXri3i"},ca("coins_content_title")),p?o().createElement("div",{className:_a},o().createElement("div",null,ca("coins_review_least_media",{minimum_pictures:(null==a?void 0:a.minimum_pictures)||1,minimum_videos:(null==a?void 0:a.minimum_videos)||1})),o().createElement("div",{className:pa},c," ",ca("coins"))):null,s?o().createElement("div",{className:_a},o().createElement("div",null,ca("coins_review_media")),o().createElement("div",{className:pa},_," ",ca("coins"))):null),o().createElement("div",{className:"AyEyx4"},o().createElement("div",null,ca("coins_panel_footer_tips_one")),o().createElement("div",null,ca("coins_panel_footer_tips_two")),o().createElement("div",null,ca("coins_panel_footer_tips_three")),o().createElement("div",null,ca("coins_panel_footer_tips_four")),l?o().createElement("div",null,ca("coins_panel_footer_tips_six",{threshold:(0,ra.JL)((null==n?void 0:n.threshold)||0)})):null,m?o().createElement("div",null,ca("coins_panel_footer_tips_seven",{duration:null==n?void 0:n.duration,max_times:null==n?void 0:n.max_times})):null,o().createElement("div",null,ca("coins_panel_footer_tips_five"),o().createElement("a",{href:d,target:"_blank",rel:"noopener noreferrer",style:d?{color:"#3789f7",marginLeft:(4,"0.25rem")}:{display:"none"}},ca("tips_see_examples"))),"max_coins_varies_depending_on_item"===ca("max_coins_varies_depending_on_item")?null:o().createElement("div",null,ca("max_coins_varies_depending_on_item"))))})},{t:ma,tNode:ua}=r.I18n;class ga extends i.PureComponent{constructor(e){super(e),this.node=null,this.corner=null,this.renderText=e=>{const{enableRatingCreationUIRevamp:t}=this.props;return t?ua("coins_earned_tip",{coins_earned:o().createElement("span",{className:"_5c1DB5"},`${e} ${ma("coins")}`)}):ma("prev_old_coins_earned_tip",{coins_earned:e})},this.state={shown:!1,top:0}}componentDidMount(){const{getBannerHeight:e}=this.props;e&&e(this.node&&Number(this.node.clientHeight)||0)}render(){const{meta:e,isMultiple:t,defaultVideoReview:a,categoryCoinList:i,coinLimitSetting:r}=this.props,{pic_and_video:n}=he(0,i);return a?o().createElement("div",{className:aa,ref:e=>{this.node=e}},o().createElement(ta.Z,{className:ia}),o().createElement("span",{className:oa},this.renderText(n)),o().createElement(la,{direction:"top",meta:e,categoryCoinList:i,coinLimitSetting:r})):o().createElement("div",{className:aa},o().createElement(ta.Z,{className:ia}),o().createElement("span",{className:oa},ma(t?"label_rating_banner_multiple_copy":"pr_label_rating_banner",e)))}}const ha="u-INmW";function ya(){return ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},ya.apply(this,arguments)}const{t:va}=r.I18n,fa={product_quality:0,seller_service:0,delivery_service:0};class Ea extends i.Component{constructor(e){super(e),this.handleRatingChange=(e,t)=>{const a=this.props.detailed_rating;switch(e){case"SELLER":this.props.onRatingChange(ya({},a,{seller_service:t}));break;case"DELIVERY":this.props.onRatingChange(ya({},a,{delivery_service:t}))}}}render(){const{detailed_rating:e=fa}=this.props;return i.createElement("div",null,i.createElement("div",{className:"wQt6l3"},va("label_about_service")),i.createElement("div",{className:"HiyfuD"},i.createElement("div",{className:ha},i.createElement(V.kG,{title:va("low_rating_detail_seller_service"),rating:e.seller_service,onRatingChange:this.handleRatingChange.bind(this,"SELLER"),size:26})),i.createElement("div",{className:ha},i.createElement(V.kG,{title:va("low_rating_detail_logistic_service"),rating:e.delivery_service,onRatingChange:this.handleRatingChange.bind(this,"DELIVERY"),size:26}))))}}const ba=Ea,wa="_3C1aoU",Ca="U-g0QB",Sa="bZja-w";function Na(){return Na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Na.apply(this,arguments)}const{t:Ra}=r.I18n,ka=[],Oa={product_quality:0,seller_service:0,delivery_service:0};class Ma extends i.PureComponent{constructor(e){super(e),this._ratingHandlers=[],this.bannerHeight=0,this.handleImageReadyStateChange=e=>{this.setState({isImageReady:e.ready},this.props.forceFormUpdate)},this.handleReadyStateChange=()=>{this.props.forceFormUpdate()},this.getFilteredItems=()=>this.props.items||ka,this.getRatingTemplateTags=()=>[],this.getData=()=>{const e=this.props.items.length,t=[];for(let a=0;a<e;a++)if(this._ratingHandlers[a]){const e=this._ratingHandlers[a].getData();e&&t.push(e)}return{seller_service:this.state.detailed_rating.seller_service,delivery_service:this.state.detailed_rating.delivery_service,rate_items_data:t}},this.handleRatingDetailChangeService=e=>{this.props.updateSellerService(e),this.props.forceFormUpdate(),this.setState({detailed_rating:e})},this.isReady=()=>{const{rate_items_data:e}=this.getData();return this.props.items.length===e.length&&this.state.isImageReady},this.clearMediaTimeout=()=>{Object.values(this._ratingHandlers).forEach((e=>{null==e||e.clearMediaTimeout()}))},this.isShowCriteriaBottom=()=>{const{limitValidationMap:e}=this.props,t=e&&Object.values(e)[0].limits_info;return{passItemArray:e&&Object.keys(e).filter((t=>e[t].passed)),coinLimitSetting:t}},this.isShowBanner=()=>{const{ratingMeta:e,categoryCoinList:t}=this.props,{passItemArray:a}=this.isShowCriteriaBottom(),{pic_and_video:i}=he(0,t,a);return!!((!a||a&&a.length>0)&&i>0)},this.getBannerHeight=e=>{this.bannerHeight=e},this.scrollToBottom=()=>{const e=document.getElementById("wrapper");e&&e.scrollIntoView()};const{ratingMeta:t}=this.props;this.state={isImageReady:!0,detailed_rating:Na({},null!=t&&t.default_rating_star?{product_quality:t.default_rating_star,seller_service:t.default_rating_star,delivery_service:t.default_rating_star}:Oa)}}componentDidMount(){const{isShowCoinBanner:e}=this.props;this.props.updateSellerService(this.state.detailed_rating),e&&e(this.isShowBanner(),this.bannerHeight)}render(){const{limitValidationMap:e,shopId:t,orderId:a}=this.props,o=this.getFilteredItems(),{commentCheckMap:r,deleteCommentCheckItemId:n,collectLocationMap:d}=this.props,s=o.length,_=this.isShowBanner(),{coinLimitSetting:p}=this.isShowCriteriaBottom(),c=Na({},this.props.ratingMeta,{shopId:t,orderId:a});return i.createElement(i.Fragment,null,_?i.createElement(ga,{isMultiple:o.length>1,orderLen:o.length,meta:c,categoryCoinList:this.props.categoryCoinList,defaultVideoReview:this.props.defaultVideoReview,getBannerHeight:this.getBannerHeight,coinLimitSetting:p,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp}):null,o.map(((t,a)=>{var o,_;return d&&d(t.itemid,a+1),i.createElement(ea,{key:a,ref:e=>{this._ratingHandlers[a]=e},item:t,rating:null,ratingMeta:this.props.ratingMeta,detailedRating:this.state.detailed_rating,onReadyStateChange:this.handleReadyStateChange,onImageReadyStateChange:this.handleImageReadyStateChange,showBottomBorder:a<s-1,orderId:this.props.orderId,userId:this.props.userId,categoryCoin:null==(o=this.props.categoryCoinList)?void 0:o[t.itemid],isItemValidationCheckPass:(!e||(null==(_=e[t.itemid])?void 0:_.passed))&&this.props.ratingMeta&&this.props.ratingMeta.coins_earned>0,username:this.props.username,defaultRatingAnonymous:this.props.defaultRatingAnonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,collectMediaCheck:this.props.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.props.collectAllMedia,cancelCollectMedia:this.props.cancelCollectMedia,commentCheckMap:r,deleteCommentCheckItemId:n,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.props.showDialogNow,collectCoinItem:this.props.collectCoinItem,cannotRedShow:this.props.cannotRedShow})})),i.createElement("div",{id:"wrapper"},i.createElement(ba,{detailed_rating:this.state.detailed_rating,onRatingChange:this.handleRatingDetailChangeService})),!_&&i.createElement("div",{className:"EYYqg6"},i.createElement("span",null,Ra("coins_panel_title")),i.createElement(la,{direction:"bottom",meta:c,categoryCoinList:this.props.categoryCoinList,coinLimitSetting:p})))}}function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Ia.apply(this,arguments)}const{t:Ta}=r.I18n,{fetchInfo:La}=r.FetchUtils,Ba={seller_service:0,delivery_service:0};class xa extends i.Component{constructor(e){var t,a,i,o;super(e),this._ratingHandler=null,this.originTemplateTags=[],this.getLatestTags=()=>{const{rating:e}=this.state;this.props.defaultRatingReviewTemplate&&(this.setState({loading:!0}),La(`/api/v2/item/get_rating${(0,d.Wc)({cmtid:e.cmtid,is_seller:0,shopid:e.shopid})}`).then((e=>{const t=(0,l.Z)(e,["response","data"],{});this.setState({rating:Ia({},this.state.rating,{template_tags:t.template_tags||[]}),loading:!1,error:!1})})).catch((()=>{this.setState({loading:!1,error:!0})})))},this.handleImageReadyStateChange=e=>{this.setState({isImageReady:e.ready},this.props.forceFormUpdate)},this.handleReadyStateChange=()=>{this.props.forceFormUpdate()},this.handleRatingDetailChange=()=>{this.props.forceFormUpdate()},this.handleRatingDetailChangeService=e=>{this.props.updateSellerService(e),this.props.forceFormUpdate(),this.setState({detailed_rating:e})},this.setRatingHandler=e=>{this._ratingHandler=e},this.getData=()=>this._ratingHandler?this._ratingHandler.getEditData():null,this.getRatingTemplateTags=()=>this.state.rating.template_tags||[],this.isReady=()=>this.state.isImageReady,this.scrollToBottom=()=>{const e=document.getElementById("wrapper");e&&e.scrollIntoView()},this.clearMediaTimeout=()=>{var e;null==(e=this._ratingHandler)||e.clearMediaTimeout()};const{ratingMeta:r}=this.props;this.state={isImageReady:!0,loading:!1,error:!1,rating:Ia({},e.rating),detailed_rating:Ia({},null!=(t=e.rating)&&null!=(a=t.detailed_rating)&&a.delivery_service&&null!=(i=e.rating)&&null!=(o=i.detailed_rating)&&o.seller_service?e.rating.detailed_rating:r?{seller_service:r.default_rating_star,delivery_service:r.default_rating_star}:Ba)},this.originTemplateTags=e.rating.template_tags||[]}componentDidMount(){this.props.forceFormUpdate(),this.getLatestTags(),this.props.updateSellerService(this.state.detailed_rating)}renderNewLoading(){return i.createElement(v.Z,{hideOverlay:!0,show:!0})}renderError(){return i.createElement("div",{className:wa},i.createElement("span",{className:Ca},Ta("rating_loading_failed")),i.createElement("div",{className:Sa,onClick:this.getLatestTags},Ta("rating_btn_name_retry")))}render(){const{rating:e,loading:t,error:a}=this.state,{ratingMeta:o,orderId:r,userId:n}=this.props;return t?this.renderNewLoading():a?this.renderError():i.createElement("div",{className:"rating-modal-edit-item__container"},i.createElement(ea,{ref:this.setRatingHandler,item:e.product_items&&e.product_items[0],rating:e,ratingMeta:o,originTemplateTags:this.originTemplateTags,onReadyStateChange:this.handleReadyStateChange,onImageReadyStateChange:this.handleImageReadyStateChange,detailedRating:this.state.detailed_rating,orderId:r,userId:n,username:this.props.username,defaultRatingAnonymous:this.props.defaultRatingAnonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,isUpdating:!0,collectMediaCheck:this.props.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.props.collectAllMedia,cancelCollectMedia:this.props.cancelCollectMedia,commentCheckMap:this.props.commentCheckMap,deleteCommentCheckItemId:this.props.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.props.showDialogNow}),i.createElement("div",{id:"wrapper"},i.createElement(ba,{detailed_rating:this.state.detailed_rating,onRatingChange:this.handleRatingDetailChangeService})))}}const Aa={popup:"C6b5v1",icon:"Ojnwnu",title:"hBcfMh"},{t:Da}=r.I18n;function Va({coinsAwarded:e}){return o().createElement("div",{className:Aa.popup},o().createElement(ta.Z,{className:Aa.icon}),o().createElement("div",{className:Aa.title},Da("pr_label_rating_coins_awarded",{coins_earned:e})))}function qa(){return qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},qa.apply(this,arguments)}const Ua=function(e){return o().createElement("svg",qa({width:"54",height:"54",viewBox:"0 0 54 54",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 53C41.3594 53 53 41.3594 53 27C53 12.6406 41.3594 1 27 1C12.6406 1 1 12.6406 1 27C1 41.3594 12.6406 53 27 53Z",stroke:"#66CC00",strokeWidth:"2"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.7985 36.098L40.3628 22.263C41.273 21.3528 41.1992 19.8032 40.198 18.802C39.1968 17.8008 37.6472 17.727 36.737 18.6372L24.7717 30.8413L17.263 24.0774C16.3528 23.1672 14.8032 23.241 13.802 24.2422C12.8008 25.2435 12.727 26.7931 13.6372 27.7033L23.2458 36.3588C24.156 37.269 25.7056 37.1952 26.7069 36.194C26.7383 36.1625 26.7689 36.1305 26.7985 36.098Z",fill:"#66CC00"}))},Wa={popup:"NZsEu+",icon:"Jh6p7h",title:"LrAZsY"},{t:ja}=r.I18n;function Fa(e){const{text:t}=e;return o().createElement("div",{className:Wa.popup},o().createElement(Ua,{className:Wa.icon}),o().createElement("div",{className:Wa.title},t||ja("pr_toast_rating_success")))}const $a=a.p+"a02ade81006a12b6a5c4c2a2002b35bc.png",Pa={mask:"fgUihE",maskIE:"wL5oHJ",popup:"vH0uka",rotating:"LIAsM4"},Ja=48;function Ha(){const e=window.document.documentMode;return o().createElement("div",{className:e?Pa.maskIE:Pa.mask},o().createElement("div",{className:Pa.popup},o().createElement("img",{src:$a,width:Ja,height:Ja})))}function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Xa.apply(this,arguments)}const{t:Ga}=r.I18n,Qa={seller_service:0,delivery_service:0,product_quality:0};class Za extends i.Component{constructor(e){super(e),this._ratingHandler=null,this.handleImageReadyStateChange=e=>{this.setState({isImageReady:e.ready},this.props.forceFormUpdate)},this.handleReadyStateChange=()=>{this.props.forceFormUpdate()},this.handleRatingDetailChange=()=>{this.props.forceFormUpdate()},this.setRatingHandler=e=>{this._ratingHandler=e},this.getRatingTemplateTags=()=>[],this.getData=()=>this._ratingHandler?this._ratingHandler.getEditData():null,this.isReady=()=>{var e,t;const a=this.getData();return this.state.isImageReady&&((null==a?void 0:a.comment)||(null==a||null==(e=a.photos)?void 0:e.length)||(null==a||null==(t=a.videos)?void 0:t.length))},this.scrollToBottom=()=>{const e=document.getElementById("wrapper");e&&e.scrollIntoView()},this.clearMediaTimeout=()=>{var e;null==(e=this._ratingHandler)||e.clearMediaTimeout()},this.handleRatingChange=(e,t)=>{this.setState({detailed_rating:Xa({},this.state.detailed_rating,{[e]:t})})},this.state={isImageReady:!0,loading:!1,rating:Xa({},e.rating),detailed_rating:e.rating.detailed_rating||Qa}}componentDidMount(){this.props.forceFormUpdate(),this.props.updateSellerService(this.state.detailed_rating)}renderNewLoading(){return i.createElement(v.Z,{hideOverlay:!0,show:!0})}render(){const{rating:e,loading:t}=this.state,{ratingMeta:a,orderId:o,userId:r}=this.props;return t?this.renderNewLoading():i.createElement("div",{className:"rating-modal-edit-item__container"},i.createElement(ea,{ref:this.setRatingHandler,item:e.product_items&&e.product_items[0],rating:e,ratingMeta:a,originTemplateTags:[],onReadyStateChange:this.handleReadyStateChange,onImageReadyStateChange:this.handleImageReadyStateChange,detailedRating:this.state.detailed_rating,orderId:o,userId:r,username:this.props.username,defaultRatingAnonymous:this.props.defaultRatingAnonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,isUpdating:!0,collectMediaCheck:this.props.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.props.collectAllMedia,cancelCollectMedia:this.props.cancelCollectMedia,commentCheckMap:this.props.commentCheckMap,deleteCommentCheckItemId:this.props.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.props.showDialogNow,isFollowUp:!0}))}}function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},za.apply(this,arguments)}const{fetchInfo:Ya}=r.FetchUtils,{t:Ka}=r.I18n;let ei=function(e){return e[e.VIEW_MODE=1]="VIEW_MODE",e[e.RATE_MODE=2]="RATE_MODE",e[e.EDIT_MODE=3]="EDIT_MODE",e[e.VIEW_BUYER_RATING_MODE=4]="VIEW_BUYER_RATING_MODE",e[e.FOLLOW_UP=5]="FOLLOW_UP",e}({});var ti=function(e){return e[e.EX_LOW=-2]="EX_LOW",e[e.LOW=-1]="LOW",e[e.NORMAL=0]="NORMAL",e}(ti||{}),ai=function(e){return e[e.EX_LOW=-2]="EX_LOW",e[e.LOW=-1]="LOW",e[e.NORMAL=0]="NORMAL",e}(ai||{}),ii=function(e){return e.SELLER_SERVICE="seller_service",e.DELIVERY_SERVICE="delivery_service",e.BOTH_SERVICE="delivery_service and seller_service",e}(ii||{});const oi=[];class ri extends i.Component{constructor(e){var t;super(e),t=this,this._contentContainer=null,this._modalRef=null,this._itemToMediasMap={},this._allMediaCheck={},this.loadingNow=!1,this.commentCheckMap={},this.commentQuality=0,this.waitCommentLoading=!1,this.showCoinBanner=!1,this.showCoinHeight=0,this.itemIdLocationMap={},this.getCoinItemList={},this.scrollToBottom=i.createRef(),this.detailed_rating={delivery_service:0,seller_service:0,product_quality:0},this.collectCoinItem=(e,t)=>{this.getCoinItemList[e]=t},this.formattedRatings=e=>(e||[]).map((e=>{const t=e.author_pic||e.user_pic||e.author_portrait||"",a=e.author_name||e.username||e.author_username||"";return za({},e,{author_portrait:t,author_username:e.anonymous?de(a):a,author_name:a})})),this.updateDetailedRating=e=>{const{isServiceEvaluationCanEmpty:t,isFollowUp:a}=this.props;this.detailed_rating=e,e.delivery_service&&e.seller_service||t||a?this.setState({scrollBottom:!1}):e.delivery_service&&!e.seller_service?this.setState({warningState:ii.SELLER_SERVICE}):!e.delivery_service&&e.seller_service?this.setState({warningState:ii.DELIVERY_SERVICE}):e.delivery_service||e.seller_service||this.setState({warningState:ii.BOTH_SERVICE})},this.getTime=async function(){const e=await async function(){try{const e=await fetch(`https://rating.${"AR"!==ae?ne:re[ie]+"shopee.com.ar"}/api/v1/comment/rating_submit_wait_time`,{credentials:"include"});return await e.json()}catch(e){return{code:-1}}}();0===e.code&&t.setState({mediaCheckWaitTime:e.data.wait_time})},this.setModalRef=e=>{this._modalRef=e},this.renderViewRating=()=>i.createElement(fe,{ratings:this.state.ratings||[],handleOpenEditRating:this.handleOpenEditRating,updateRatingAfterSetAnonymous:this.updateRatingAfterSetAnonymous,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,defaultRatingShowEditButton:this.props.defaultRatingShowEdit,isFollowUp:this.props.isFollowUp}),this.updateRatingAfterSetAnonymous=e=>{const t=this.state.ratings[e];if(!t)return;this.reloadOrderAfterRating();const a=[...this.state.ratings],i=t.author_name||t.username||t.author_username||"";a[e]=za({},t,{anonymous:!t.anonymous,author_username:t.anonymous?i:de(i)}),this.setState({ratings:a})},this.getTitle=()=>{const{mode:e,isFollowUp:t}=this.props,{editingRatingIndex:a,ratings:i}=this.state,o=i[a];switch(e){case ei.EDIT_MODE:case ei.RATE_MODE:return Ka("pr_label_rate_product");case ei.FOLLOW_UP:return Ka("add_updates");case ei.VIEW_MODE:return this.state.editing?t&&null!=o&&o.can_follow_up?Ka("add_updates"):Ka("pr_label_rate_product"):Ka("pr_label_shop_rating");case ei.VIEW_BUYER_RATING_MODE:return Ka("pr_label_buyer_rating")}return""},this.getModalBody=()=>{const{isFollowUp:e}=this.props,{editingRatingIndex:t,ratings:a}=this.state,i=a[t];let o=null;switch(this.props.mode){case ei.EDIT_MODE:o=this.renderEditing();break;case ei.FOLLOW_UP:o=this.renderAddFollowUp();break;case ei.RATE_MODE:o=this.state.isRatingLoading?this.renderNewLoading():this.state.getEditOrderDetailSucess?this.renderRating():this.renderError();break;case ei.VIEW_MODE:o=this.state.editing?e&&null!=i&&i.can_follow_up?this.renderAddFollowUp():this.renderEditing():this.renderViewRating();break;case ei.VIEW_BUYER_RATING_MODE:o=this.renderViewBuyerRating()}return o},this.handleOpenEditRating=e=>{this.setState({editing:!0,editingRatingIndex:e}),this.scrollToTopContentContainer()},this.backToView=()=>{this.setState({editing:!1}),this.clearTimeoutCheck(),this.scrollToTopContentContainer()},this.handleConfirm=()=>{var e;if(this.state.scrollBottom)return null==(e=this._modalRef)||e.scrollToBottom(),void this.setState({isConfirming:!1,showWaringPop:!0});this.setState({isConfirming:!0})},this.handleConfirmClose=()=>{this.setState({isConfirming:!1})},this.handleGoRating=()=>{this.setState({showWaringPop:!1})},this.getComments=(e,t)=>{const{defaultRatingReviewTemplate:a}=this.props;if(!a)return{comment:e?e.comment:"",template_tags:t};const i=e?e.template_tag_comments:{},o=[],r=e?e.comment:"";let n=!1;t.forEach((e=>{i[e]&&(o.push(`${e}:${i[e]}`),n=!0)}));const d=r?"\n\n":"";return{comment:o.length?[o.join("\n"),r].join(d):r,template_tags:n?t:[],has_template_tag:n}},this.handlePreCommit=()=>{const{mode:e}=this.props;this.setState({isConfirming:!1});const t=[ei.VIEW_MODE,ei.EDIT_MODE,ei.FOLLOW_UP].includes(this.props.mode)?this.props.ratings[this.state.editingRatingIndex]:this.props.rating;let a;const i=this._modalRef?this._modalRef.getData():null;var o,r;return a=e===ei.FOLLOW_UP?[]:this._modalRef?null==(o=(r=this._modalRef).getRatingTemplateTags)?void 0:o.call(r):[],{rating:t,ratingData:i,templateTags:a}},this.handleSubmitEditRating=async function(){const{rating:e,ratingData:a,templateTags:i}=t.handlePreCommit(),o=a;if(o&&o.comment&&"string"==typeof o.comment&&(o.comment=o.comment.trim()),t.setState({isLoading:!0}),!(await t.props.editRating(t.props.shopId,t.props.orderId,e.cmtid,o?[o]:[],2)).error&&[ei.VIEW_MODE,ei.EDIT_MODE].includes(t.props.mode)){var r,n,d;t._itemToMediasMap={};const{editingRatingIndex:s,ratings:_}=t.state,p=[..._],c=e.author_pic||e.user_pic||e.author_portrait||"";let l=e.author_name||e.username||e.author_username||"";t.props.mode===ei.EDIT_MODE&&(l=t.props.accountInfo.username);const m=a?o.anonymous:e.anonymous;p[s]=za({},e,t.getComments(o,i),{detailed_rating:{product_quality:null==o||null==(r=o.detailed_rating)?void 0:r.product_quality,seller_service:(null==o||null==(n=o.detailed_rating)?void 0:n.seller_service)||t.detailed_rating.seller_service,delivery_service:(null==o||null==(d=o.detailed_rating)?void 0:d.delivery_service)||t.detailed_rating.delivery_service},images:o?o.photos:[],videos:o?o.videos:[],editable:u.Sc.EDITED_AND_CANT_EDIT,tags:t.getTagsByIds(o?o.tagids:[]),anonymous:m,author_username:m?de(l):l,author_portrait:c}),t.setState({ratings:p}),t.reloadOrderAfterRating(),t.setState({isLoading:!1}),t.backToView(),"myRating"===t.props.fromSource&&t.props.rateSuccessCallback&&(t.props.rateSuccessCallback(p[s]),t.closeRating())}else t.closeRating()},this.handleAddFollowUp=async function(){var e,a;const{rating:o,ratingData:r}=t.handlePreCommit(),n=r;n&&n.comment&&"string"==typeof n.comment&&(n.comment=n.comment.trim()),t.setState({isLoading:!0});const{cmtid:d,orderid:s,shopid:_,detailed_rating:p}=o,c=n.detailed_rating;if(p)for(const t in n.detailed_rating){const e=t;n.detailed_rating[e]===p[e]&&c&&delete c[e]}const l=await(0,C.C8)("/api/v4/item/add_follow_up",{cmt_id:d,order_id:s,shop_id:_,comment:n.comment,photos:null==(e=n.photos)?void 0:e.map((e=>({image_id:e}))),videos:n.videos,detailed_rating:c});if(null!=l&&null!=(a=l.response)&&a.error)t.closeRating();else{var m,u,g,h;t.context.showPopup(i.createElement(Fa,{text:Ka("followup_successfully_submitted")}),!1,null,null,!0);const{editingRatingIndex:e,ratings:a}=t.state,r=[...a],d=(null==n||null==(m=n.detailed_rating)?void 0:m.product_quality)||t.detailed_rating.product_quality;r[e]=za({},o,{detailed_rating:{product_quality:d,seller_service:(null==n||null==(u=n.detailed_rating)?void 0:u.seller_service)||t.detailed_rating.seller_service,delivery_service:(null==n||null==(g=n.detailed_rating)?void 0:g.delivery_service)||t.detailed_rating.delivery_service},follow_up:{comment:null==n?void 0:n.comment,videos:n?n.videos:[],images:n?null==n||null==(h=n.photos)?void 0:h.map((e=>({image_id:e,cover_image_id:e}))):[],after_days:1,ctime:Date.now()},can_follow_up:!1,rating_star:d||0}),t.setState({ratings:r}),t.reloadOrderAfterRating(),t.setState({isLoading:!1}),t.backToView(),t.props.rateSuccessCallback&&t.props.rateSuccessCallback(r[e]),t.closeRating()}},this.getTagsByIds=e=>{let t=[];const a=this.props.ratingMeta?this.props.ratingMeta.tags:[];return a&&a.forEach((a=>{t=t.concat(a.tags.filter((t=>-1!==e.indexOf(t.tag_id))))})),t},this.handleSubmitRating=async function(){if(!t._modalRef)return;const{seller_service:e,delivery_service:a,rate_items_data:o}=t._modalRef.getData();var r;if(t.state.scrollBottom)return null==(r=t._modalRef)||r.scrollToBottom(),void t.setState({showWaringPop:!0});o instanceof Array&&o.forEach((e=>{"string"==typeof e.comment&&(e.comment=e.comment.trim())})),t.setState({isLoading:!0});const n=await t.props.rateProduct(t.props.shopId,t.props.orderId,t.props.useDetect,o,t.props.defaultRatingMediaQualityCheck,e,a,2);if(n.error)if(n.error===w.Z.EXIST)t.setState({isLoading:!1}),t.closeRating(),t.context.showPopup(i.createElement(f.OK,{text:Ka("pr_alert_please_reload_view_rating_page")}),!0,null,null,!0);else{if(18900004===n.error)return window.alert("The template tags are invalid"),void t.closeRating();t.setState({isLoading:!1})}else{if(n.response.data.extra_info&&!1===n.response.data.extra_info.coin_succ)t.setState({isLoading:!1}),t.context.showPopup(i.createElement(f.a$,{message:Ka("msg_coins_error"),showCancel:!1,confirmText:"OK"}),!0,null,null,!0);else{t._itemToMediasMap={};const e=n.response.data.coins_earned;t.reloadOrderAfterRating(),t.setState({isLoading:!1}),t.closeRating();const a=e>0;t.context.showPopup(a?i.createElement(Va,{coinsAwarded:e}):i.createElement(Fa,null),a,null,null,!0)}"myRating"===t.props.fromSource&&t.props.rateSuccessCallback&&t.props.rateSuccessCallback()}},this.reloadOrderAfterRating=()=>{var e,t;null==(e=(t=this.props).reloadOrder)||e.call(t)},this.checkSubmit=()=>{const{isFollowUp:e}=this.props;this.props.mode===ei.VIEW_MODE?this.state.isShowMediaErr===ti.EX_LOW||this.state.isShowMediaErr===ai.EX_LOW?this.setState({isShowMediaErr:ti.NORMAL,showDialogNow:!1}):this.state.isShowMediaErr!==ti.LOW&&this.state.isShowMediaErr!==ai.LOW||this.setState({isShowMediaErr:ti.NORMAL,showDialogNow:!1},(()=>{this.state.editing?e?this.handleAddFollowUp():this.handleSubmitEditRating():this.closeRating()})):this.props.mode===ei.RATE_MODE&&(this.state.isShowMediaErr===ti.EX_LOW||this.state.isShowMediaErr===ai.EX_LOW?this.setState({isShowMediaErr:ti.NORMAL,showDialogNow:!1}):this.state.isShowMediaErr!==ti.LOW&&this.state.isShowMediaErr!==ai.LOW||this.setState({isShowMediaErr:ti.NORMAL,showDialogNow:!1},(()=>{this.handleSubmitRating()})))},this.collectMediaCheck=(e,t)=>{this._itemToMediasMap[e]=t},this.collectAllMedia=e=>{this._allMediaCheck[e]=!0},this.cancelCollectMedia=e=>{const{defaultRatingCommentCheck:t}=this.props;delete this._allMediaCheck[e];const a=Object.keys(this._allMediaCheck).length,i=Object.keys(this._itemToMediasMap).filter((e=>-3===this._itemToMediasMap[e].type));0===a&&(!t||i.length<=0)&&this.loadingNow&&(this.waitCommentLoading||this.setState({isLoading:!1},(()=>{clearTimeout(this.timeoutCheck),this.loadingNow=!1,t?this.commentMediaCheckShowDialog():this.checkMediaSubmit()})))},this.clearTimeoutCheck=()=>{var e;null==(e=this._modalRef)||e.clearMediaTimeout()},this.preCheck=async function(){Object.keys(t._allMediaCheck).length>0?(t.loadingNow=!0,t.setState({isLoading:!0},(()=>{t.timeoutCheck=setTimeout((()=>{t.setState({isLoading:!1},(()=>{t.loadingNow=!1,t._allMediaCheck={},t.clearTimeoutCheck(),t.checkMediaSubmit()}))}),t.state.mediaCheckWaitTime)}))):(t._allMediaCheck={},t.clearTimeoutCheck(),t.checkMediaSubmit())},this.commentMediaCheckShowDialog=()=>{this.getHeight();const{mode:e}=this.props,{isOrderValidationCheckPass:t}=this.state,a=Object.keys(this._itemToMediasMap),i=a.filter((e=>-2===this._itemToMediasMap[e].type)),o=a.filter((e=>-1===this._itemToMediasMap[e].type)),r=i.length>0?ti.EX_LOW:o.length>0?ti.LOW:ti.NORMAL;this.commentQuality===ai.EX_LOW?r===ti.NORMAL?this.setState({isShowMediaErr:ai.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:Ka("tips_comment_only_dialog_elow"),showDialogNow:!0}):this.setState({isShowMediaErr:ai.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:Ka("tips_comment_media_check_dialog_exlow"),showDialogNow:!0}):this.commentQuality===ai.LOW?e===ei.VIEW_MODE?r===ti.NORMAL||r===ti.LOW?this.setState({isShowMediaErr:ai.LOW,mediaCheckTitle:Ka("title_check_submit"),mediaCheckMessage:Ka("tips_comment_check_dialog_low"),showDialogNow:!0}):r===ti.EX_LOW&&this.setState({isShowMediaErr:ti.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:Ka("tips_comment_media_check_dialog_exlow"),showDialogNow:!0}):r===ti.NORMAL?Object.values(this.getCoinItemList).filter((e=>!0===e)).length>0?this.setState({isShowMediaErr:ai.LOW,mediaCheckTitle:Ka("title_check_submit"),mediaCheckMessage:Ka(t?"tips_comment_only_dialog_low":"tips_comment_content_edit_low"),showDialogNow:!0}):this.setState({cannotRedShow:!0},(()=>{this.handleSubmitRating()})):r===ti.LOW?Object.values(this.getCoinItemList).filter((e=>!0===e)).length>0?this.setState({isShowMediaErr:ai.LOW,mediaCheckTitle:Ka("title_check_submit"),mediaCheckMessage:Ka(t?"tips_comment_media_new_check_dialog_low":"tips_comment_media_check_dialog_exlow"),showDialogNow:!0}):this.setState({cannotRedShow:!0},(()=>{this.handleSubmitRating()})):r===ti.EX_LOW&&this.setState({isShowMediaErr:ti.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:Ka("tips_comment_media_check_dialog_exlow"),showDialogNow:!0}):this.checkMediaSubmitNew()},this.checkMediaSubmit=()=>{const e=Object.keys(this._itemToMediasMap),t=e.filter((e=>-2===this._itemToMediasMap[e].type)),a=e.filter((e=>-1===this._itemToMediasMap[e].type));t.length?t.length>1?this.setState({isShowMediaErr:ti.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:Ka("msg_medias_quality_ex_more"),showDialogNow:!0}):this.setState({isShowMediaErr:ti.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:le(this._itemToMediasMap[t[0]]),showDialogNow:!0}):a.length?this.props.mode===ei.VIEW_MODE?this.setState({isShowMediaErr:ti.LOW,mediaCheckTitle:Ka("pr_alert_submit_rating"),mediaCheckMessage:Ka("msg_medias_quality_low_edit"),showDialogNow:!0}):Object.values(this.getCoinItemList).filter((e=>!0===e)).length>0?this.setState({isShowMediaErr:ti.LOW,mediaCheckTitle:Ka("title_check_submit"),mediaCheckMessage:Ka("msg_medias_quality_low_more"),showDialogNow:!0}):this.setState({cannotRedShow:!0},(()=>{this.handleSubmitRating()})):this.setState({showDialogNow:!0},(()=>{if(this.props.mode===ei.VIEW_MODE){if(!this.state.editing)return void this.closeRating();this.handleConfirm()}else this.props.mode===ei.RATE_MODE&&this.handleSubmitRating()}))},this.checkMediaSubmitNew=()=>{const e=Object.keys(this._itemToMediasMap),t=e.filter((e=>-2===this._itemToMediasMap[e].type)),a=e.filter((e=>-1===this._itemToMediasMap[e].type));if(t.length>0){const e=[];Object.values(this._itemToMediasMap).forEach((t=>{const a=(null==t?void 0:t.collectObj)||{};-2===(null==t?void 0:t.type)&&Object.keys(a).forEach((t=>{null!=a&&a[t]&&e.push(t)}))})),this.setState({isShowMediaErr:ti.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:ge(e,-2,this.state.isOrderValidationCheckPass),showDialogNow:!0})}else if(a.length)if(this.props.mode===ei.VIEW_MODE)this.setState({isShowMediaErr:ti.LOW,mediaCheckTitle:Ka("title_check_submit"),mediaCheckMessage:Ka("tips_comment_check_dialog_low"),showDialogNow:!0});else if(Object.values(this.getCoinItemList).filter((e=>!0===e)).length>0){const e=[];Object.values(this._itemToMediasMap).forEach((t=>{const a=(null==t?void 0:t.collectObj)||{};-1===(null==t?void 0:t.type)&&Object.keys(a).forEach((t=>{null!=a&&a[t]&&e.push(t)}))})),this.setState({isShowMediaErr:ti.LOW,mediaCheckTitle:Ka("title_check_submit"),mediaCheckMessage:ge(e,-1,this.state.isOrderValidationCheckPass),showDialogNow:!0})}else this.setState({cannotRedShow:!0},(()=>{this.handleSubmitRating()}));else this.setState({isShowMediaErr:ti.NORMAL,showDialogNow:!0},(()=>{if(this.props.mode===ei.VIEW_MODE){if(!this.state.editing)return void this.closeRating();this.handleConfirm()}else this.props.mode===ei.RATE_MODE&&this.handleSubmitRating()}))},this.deleteCommentCheckItemId=e=>{this.commentCheckMap[Number(e)]&&delete this.commentCheckMap[Number(e)]},this.getHeight=()=>{const e=[],t=document.getElementsByClassName("rating-modal-handler__container");for(let r=0;r<t.length;r++)e.push(t[r].clientHeight);const a=document.getElementsByClassName("shopee-popup-form__main"),i=this.getFirstLocation();let o=0;i&&i>1&&e.slice(0,i-1).forEach((e=>{o+=e})),a[0].scrollTo({top:this.showCoinBanner?o+this.showCoinHeight:o,behavior:"smooth"})},this.getFirstLocation=()=>{let e=0;return Object.keys(this._itemToMediasMap).forEach((t=>{var a,i;-2!==this._itemToMediasMap[t].type&&-1!==this._itemToMediasMap[t].type||(e=0===e?(null==(a=this.itemIdLocationMap)?void 0:a[t])||0:Math.min(e,(null==(i=this.itemIdLocationMap)?void 0:i[t])||1))})),Object.keys(this.commentCheckMap).forEach((t=>{var a,i,o,r,n,d;(null==(a=this.commentCheckMap)||null==(i=a[Number(t)])?void 0:i.total)!==ai.EX_LOW&&(null==(o=this.commentCheckMap)||null==(r=o[Number(t)])?void 0:r.total)!==ai.LOW||(e=0===e?(null==(n=this.itemIdLocationMap)?void 0:n[t])||0:Math.min(e,(null==(d=this.itemIdLocationMap)?void 0:d[t])||1))})),e},this.isShowCoinBanner=(e,t)=>{this.showCoinBanner=e,this.showCoinHeight=t},this.collectLocationMap=(e,t)=>{this.itemIdLocationMap[e]=t},this.commentCheckNoWait=()=>{var e,t;const{orderId:a,mode:i}=this.props,o=[];let r,n=[];i===ei.VIEW_MODE?this._modalRef&&null!==this._modalRef.getData()?n.push(this._modalRef.getData()):n=[]:n=this._modalRef&&(null==(e=this._modalRef)||null==(t=e.getData())?void 0:t.rate_items_data)||[],n.length>0&&n.forEach((e=>{(e.comment||Object.values(e.template_tag_comments).length>0)&&(r={itemid:e.itemid,comments:[]},e.comment&&Xt(e.comment)&&r.comments.push(Xt(e.comment)),r.comments=r.comments.concat(Object.values(e.template_tag_comments).filter((e=>""!==e))),r.comments.length>0&&o.push(r))}));const d=Object.keys(this._allMediaCheck).length,s=Object.keys(this._itemToMediasMap).filter((e=>-3===this._itemToMediasMap[e].type));if(o.length>0||s.length>0){const e={data:o,orderid:a};this.loadingNow=!0,this.waitCommentLoading=!0,this.setState({isLoading:!0},(()=>{this.timeoutCheck=setTimeout((()=>{this.setState({isLoading:!1},(()=>{this.loadingNow=!1,this._allMediaCheck={},this.clearTimeoutCheck(),this.waitCommentLoading&&(this.waitCommentLoading=!1,this.commentCheckMap={},this.commentQuality=ai.NORMAL),this.commentMediaCheckShowDialog()}))}),this.state.mediaCheckWaitTime)})),ue(e).then((e=>{var t,a;if(this.loadingNow&&this.waitCommentLoading)if(Object.keys(this._allMediaCheck).length>0||s.length>0)if(this.waitCommentLoading=!1,0===(null==e||null==(t=e.response)?void 0:t.error)){var i,o;const t={};let a=0,r=0;null==e||null==(i=e.response)||null==(o=i.data)||o.forEach((e=>{t[Number(e.itemid)]=e.score})),this.commentCheckMap=t,Object.keys(this.commentCheckMap).forEach((e=>{var t,i,o,n;(null==(t=this.commentCheckMap)||null==(i=t[Number(e)])?void 0:i.total)===ai.EX_LOW?a++:(null==(o=this.commentCheckMap)||null==(n=o[Number(e)])?void 0:n.total)===ai.LOW&&r++})),this.commentQuality=a>0?ai.EX_LOW:r>0?ai.LOW:ai.NORMAL}else this.commentQuality=ai.NORMAL,this.commentCheckMap={};else if(this.timeoutCheck&&clearTimeout(this.timeoutCheck),this.waitCommentLoading=!1,0===(null==e||null==(a=e.response)?void 0:a.error)){var r,n;const t={};let a=0,i=0;null==e||null==(r=e.response)||null==(n=r.data)||n.forEach((e=>{t[Number(e.itemid)]=e.score})),this.commentCheckMap=t,Object.keys(this.commentCheckMap).forEach((e=>{var t,o,r,n;(null==(t=this.commentCheckMap)||null==(o=t[Number(e)])?void 0:o.total)===ai.EX_LOW?a++:(null==(r=this.commentCheckMap)||null==(n=r[Number(e)])?void 0:n.total)===ai.LOW&&i++})),this.commentQuality=a>0?ai.EX_LOW:i>0?ai.LOW:ai.NORMAL,this.setState({isLoading:!1},(()=>{this.loadingNow=!1,this.clearTimeoutCheck(),this.commentMediaCheckShowDialog()}))}else this.commentQuality=ai.NORMAL,this.commentCheckMap={},this.setState({isLoading:!1},(()=>{this.clearTimeoutCheck(),this.commentMediaCheckShowDialog()}))})).catch((e=>{this.loadingNow&&this.waitCommentLoading&&(Object.keys(this._allMediaCheck).length>0||s.length>0?(this.waitCommentLoading=!1,this.commentCheckMap={},this.commentQuality=ai.NORMAL):(this.timeoutCheck&&clearTimeout(this.timeoutCheck),this.waitCommentLoading=!1,this.commentCheckMap={},this.commentQuality=ai.NORMAL,this.loadingNow=!1,this.setState({isLoading:!1},(()=>{this.clearTimeoutCheck(),this.commentMediaCheckShowDialog()}))))}))}else this.commentCheckMap={},this.commentQuality=ai.NORMAL,d>0||s.length>0?(this.loadingNow=!0,this.setState({isLoading:!0},(()=>{this.timeoutCheck=setTimeout((()=>{this.loadingNow=!1,this._allMediaCheck={},this.setState({isLoading:!1},(()=>{this.clearTimeoutCheck(),this.commentMediaCheckShowDialog()}))}),this.state.mediaCheckWaitTime)}))):(this.clearTimeoutCheck(),this.commentMediaCheckShowDialog())},this.commentCheck=async function(){var e;const{orderId:a}=t.props,i=t._modalRef?null==(e=t._modalRef.getData())?void 0:e.rate_items_data:[],o=[];let r;if(i.length>0&&i.forEach((e=>{(e.comment||Object.values(e.template_tag_comments).length>0)&&(r={order_id:a,item_id:e.itemid,comments:[]},e.comment&&r.comments.push(e.comment),r.comments=r.comments.concat(Object.values(e.template_tag_comments).filter((e=>""!==e))),o.push(r))})),o.length>0){const e=await ue({data:o});if(null!=e&&e.error||null==e||!e.response)t.commentQuality=ai.NORMAL,t.commentCheckMap={};else{const{error:a}=null==e?void 0:e.response;if(0===a){var n,d,s;const a={};let i=0,o=0;(null==e||null==(n=e.response)?void 0:n.data)&&(null==e||null==(d=e.response)||null==(s=d.data)||s.forEach((e=>{a[Number(e.item_id)]=e.score}))),t.commentCheckMap=a,Object.keys(t.commentCheckMap).forEach((e=>{t.commentCheckMap[Number(e)].total===ai.EX_LOW?i++:ai.LOW&&o++})),t.commentQuality=i>0?ai.EX_LOW:o>0?ai.LOW:ai.NORMAL}else t.commentCheckMap={},t.commentQuality=ai.NORMAL}}else t.commentCheckMap={},t.commentQuality=ai.NORMAL},this.handlePrimaryButtonClicked=()=>{switch(this.props.mode){case ei.VIEW_MODE:if(this.props.defaultRatingCommentCheck)this.commentCheckNoWait();else if(this.props.defaultRatingMediaQualityCheck)this.preCheck();else{if(!this.state.editing)return void this.closeRating();this.handleConfirm()}return;case ei.RATE_MODE:return void(this.props.defaultRatingCommentCheck?this.commentCheckNoWait():this.props.defaultRatingMediaQualityCheck?this.preCheck():this.handleSubmitRating());case ei.FOLLOW_UP:case ei.EDIT_MODE:return void this.handleConfirm();default:this.closeRating()}},this.closeRating=()=>{this.clearTimeoutCheck(),this.context.dismissPopup()},this.getReadyState=()=>{switch(this.props.mode){case ei.RATE_MODE:return!!this._modalRef&&this._modalRef.isReady();case ei.VIEW_MODE:return!this.state.editing||!this._modalRef||this._modalRef.isReady();default:return!this._modalRef||this._modalRef.isReady()}},this.scrollToTopContentContainer=()=>{this._contentContainer&&(this._contentContainer.scrollTop=0)};const a=this.formattedRatings(e.ratings);this.state={editing:!1,editingRatingIndex:0,ratings:a||[],isLoading:!1,isConfirming:!1,items:[],getEditOrderDetailSucess:!0,isRatingLoading:!0,isShowMediaErr:0,isShowCancel:!0,mediaCheckTitle:"",mediaCheckMessage:"",mediaCheckWaitTime:3e3,categoryCoinList:void 0,limitValidationMap:void 0,isOrderValidationCheckPass:!0,showDialogNow:!1,cannotRedShow:!1,scrollBottom:!0,showWaringPop:!1,warningState:""}}getCategroyCoin(){const{orderId:e}=this.props;Ya(`/api/v4/order/get_rating_coin_reward_rule_list${(0,d.Wc)({order_id:e,apply_coin_limits_validate:!0})}`).then((({response:e={}})=>{const{error:t,coin_reward_rule_list:a,coin_limits_validate_result:i}=e;if(!t){if(a&&a.length>0){const e={};a.forEach((t=>{e[t.item_id]=t.coin_reward_rule})),this.setState({categoryCoinList:e})}if(i&&i.length>0){const e={};i.forEach((({item_id:t,passed:a,limits_info:i})=>{e[t]={passed:a,limits_info:i}}));const t=Object.keys(e).some((t=>e[t].passed));this.setState({limitValidationMap:e,isOrderValidationCheckPass:t})}}}))}componentDidMount(){this.props.injectAsyncReducer&&this.props.injectAsyncReducer({rating:u.I6}),this.props.getRatingMeta(),this.getTime(),this.getCategroyCoin(),this.props.mode===ei.RATE_MODE&&this.getRateEditOrderDetail()}getRateEditOrderDetail(){this.setState({isRatingLoading:!0});const{orderId:e,shopId:t}=this.props;Ya(`/api/v2/order/get_rate_order_detail${(0,d.Wc)({shopid:t,orderid:e})}`).then((e=>{const t=(0,l.Z)(e,["response","data","items"],[]);this.setState({items:t,isRatingLoading:!1,getEditOrderDetailSucess:t.length>0})})).catch((()=>{this.setState({isRatingLoading:!1,getEditOrderDetailSucess:!1})}))}renderViewBuyerRating(){return i.createElement(Oe,{rating:this.props.rating})}renderEditing(){const e=this.state.ratings[this.state.editingRatingIndex],t=this.props.accountInfo.username;return i.createElement(xa,{rating:e,username:t||"",defaultRatingAnonymous:e.anonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,orderId:this.props.orderId,userId:this.props.userId,ref:this.setModalRef,forceFormUpdate:()=>this.forceUpdate(),ratingMeta:this.props.ratingMeta,collectMediaCheck:this.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.collectAllMedia,cancelCollectMedia:this.cancelCollectMedia,commentCheckMap:this.commentCheckMap,deleteCommentCheckItemId:this.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.state.showDialogNow,updateSellerService:e=>this.updateDetailedRating(e)})}renderRating(){const e=this.props.accountInfo.username;return i.createElement(Ma,{items:this.state.items||oi,shopId:this.props.shopId,orderId:this.props.orderId,userId:this.props.userId,username:e||"",defaultRatingAnonymous:this.props.defaultRatingAnonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,ref:this.setModalRef,forceFormUpdate:()=>this.forceUpdate(),ratingMeta:this.props.ratingMeta,collectMediaCheck:this.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.collectAllMedia,cancelCollectMedia:this.cancelCollectMedia,categoryCoinList:this.state.categoryCoinList,limitValidationMap:this.state.limitValidationMap,commentCheckMap:this.commentCheckMap,deleteCommentCheckItemId:this.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,isShowCoinBanner:this.isShowCoinBanner,collectLocationMap:this.collectLocationMap,showDialogNow:this.state.showDialogNow,collectCoinItem:this.collectCoinItem,cannotRedShow:this.state.cannotRedShow,updateSellerService:e=>this.updateDetailedRating(e)})}renderAddFollowUp(){const e=this.state.ratings[this.state.editingRatingIndex],t=this.props.accountInfo.username;return i.createElement(Za,{rating:e,username:t||"",defaultRatingAnonymous:e.anonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,orderId:this.props.orderId,userId:this.props.userId,ref:this.setModalRef,forceFormUpdate:()=>this.forceUpdate(),ratingMeta:this.props.ratingMeta,collectMediaCheck:this.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.collectAllMedia,cancelCollectMedia:this.cancelCollectMedia,commentCheckMap:this.commentCheckMap,deleteCommentCheckItemId:this.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.state.showDialogNow,updateSellerService:e=>this.updateDetailedRating(e)})}renderNewLoading(){return i.createElement(v.Z,{hideOverlay:!0,show:!0})}renderError(){return i.createElement("div",{className:wa},i.createElement("span",{className:Ca},Ka("rating_loading_failed")),i.createElement("div",{className:Sa,onClick:this.getRateEditOrderDetail.bind(this)},Ka("rating_btn_name_retry")))}render(){const{mode:e}=this.props,t=[ei.RATE_MODE,ei.EDIT_MODE,ei.FOLLOW_UP].includes(e)||this.state.editing,a=this.getReadyState();return i.createElement(n.Z,{title:this.getTitle(),textSubmit:Ka("pr_order_purchase_label_submit"),textOk:Ka("pr_order_purchase_label_ok"),textSubmitting:a?null:Ka("label_submit"),cancelButtonText:Ka("pr_order_purchase_label_cancel"),isSubmitting:!this.getReadyState(),showSubmitButton:this.props.defaultRatingShowSubmit&&t,showCancelButton:t,showOKButton:!t,onSubmit:this.handlePrimaryButtonClicked,onCancel:this.closeRating,onOK:this.closeRating,formExtraClassNames:"OU2Nj+",onBackButtonClick:this.state.editing?this.backToView:void 0},this.state.isLoading?i.createElement(Ha,null):null,this.state.showWaringPop?i.createElement(A,{goRating:this.handleGoRating,warningState:this.state.warningState}):null,this.state.isConfirming?i.createElement(L,{onSubmit:e===ei.FOLLOW_UP||e===ei.VIEW_MODE&&this.props.isFollowUp?this.handleAddFollowUp:this.handleSubmitEditRating,onCancel:this.handleConfirmClose}):null,this.state.isShowMediaErr===ti.EX_LOW||this.state.isShowMediaErr===ti.LOW||this.state.isShowMediaErr===ai.EX_LOW||this.state.isShowMediaErr===ai.LOW?i.createElement(M,{message:this.state.mediaCheckMessage,title:this.state.mediaCheckTitle,onSubmit:this.checkSubmit,submitText:this.state.isShowMediaErr===ti.EX_LOW||this.state.isShowMediaErr===ai.EX_LOW?Ka("btn_back_to_edit"):Ka("btn_submit_check"),showCancel:this.state.isShowMediaErr!==ti.EX_LOW&&this.state.isShowMediaErr!==ai.EX_LOW,cancelText:this.state.isShowMediaErr===ti.EX_LOW||this.state.isShowMediaErr===ai.EX_LOW?void 0:Ka("btn_back_to_edit"),onCancel:()=>{this.setState({isShowMediaErr:ti.NORMAL,showDialogNow:!1})}}):null,this.getModalBody())}}ri.contextTypes={dismissPopup:_().func,showPopup:_().func};const ni=(0,c.compose)(E.Pf,(0,y.u)({fetchOnMount:!0}),(0,p.connect)((e=>({ratingMeta:e.rating&&e.rating.ratingMeta?e.rating.ratingMeta:null,defaultRatingAnonymous:(0,h.Au)(e.featureToggles,g.o0p,!1),defaultVideoReview:(0,h.Au)(e.featureToggles,g.ZXS,!1),defaultRatingReviewTemplate:(0,h.Au)(e.featureToggles,b.aJ,!1),defaultRatingMediaQualityCheck:(0,h.Au)(e.featureToggles,b.wc,!1),defaultRatingShowEdit:S(e.featureToggles,b.h4,!0),defaultRatingShowSubmit:S(e.featureToggles,b.te,!0),useDetect:(0,h.Au)(e.featureToggles,b.wr,!1),defaultRatingCommentCheck:(0,h.Au)(e.featureToggles,b.ge,!1),enableRatingCreationUIRevamp:(0,h.Au)(e.featureToggles,b.SQ,!0),isServiceEvaluationCanEmpty:(0,h.Au)(e.featureToggles,b.e5,!1),isFollowUp:(0,h.Au)(e.featureToggles,b.q3,!1)})),{editRating:u.QH,rateProduct:u.H1,getRatingMeta:u.dR}),m.withInjectReducer)((0,b.wl)(ri));function di(){return di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},di.apply(this,arguments)}const{t:si}=r.I18n,{fetchInfo:_i}=r.FetchUtils;function pi({dismissPopup:e,orderId:t,userId:a,mode:r,reloadOrder:s}){const[_,p]=(0,i.useState)(null);return(0,i.useEffect)((()=>{(async()=>{const e=r===ei.VIEW_MODE?"/api/v2/order/get_item_ratings":"/api/v2/order/get_buyer_ratings";try{const a=await _i(`${e}${(0,d.Wc)({orderid:t})}`),{response:i}=a;i&&i.data&&i.data.items&&i.data.items.length?p({data:i.data.items,error:0}):p({data:null,error:1})}catch(a){p({data:null,error:1})}})()}),[t,r]),_?null!=_&&_.error?o().createElement(n.Z,{textOk:si("pr_order_purchase_label_ok"),onSubmit:()=>{e()},showCancelButton:!1},"Get Data Failed"):r===ei.VIEW_MODE?o().createElement(ni,{mode:ei.VIEW_MODE,ratings:_.data,orderId:t,shopId:_.data[0].shopid,userId:a,reloadOrder:s}):o().createElement(ni,{mode:ei.VIEW_BUYER_RATING_MODE,rating:di({},_.data[0],{author_pic:_.data[0].author_portrait,author_name:_.data[0].author_username}),userId:a,reloadOrder:s}):null}const{t:ci}=r.I18n,{fetchInfo:li}=r.FetchUtils;function mi({mode:e=ei.EDIT_MODE,dismissPopup:t,commentId:a,shopId:r,isSeller:s,orderId:_,userId:p,fromSource:c,callback:l}){const[m,u]=(0,i.useState)(null);return(0,i.useEffect)((()=>{(async()=>{try{const e=await li(`/api/v2/item/get_rating${(0,d.Wc)({cmtid:a,shopid:r,is_seller:Number(s)})}`),{response:t,error:i}=e;i||t&&t.error?u({data:null,error:1}):u({data:null==t?void 0:t.data,error:0})}catch(e){u({data:null,error:1})}})()}),[a,r,s]),m?null!=m&&m.error?o().createElement(n.Z,{textSubmit:ci("pr_order_purchase_label_ok"),onSubmit:()=>{t()},showCancelButton:!1},"Get Data Failed"):o().createElement(ni,{mode:e,ratings:[null==m?void 0:m.data],userId:p,shopId:r,orderId:_,fromSource:c,rateSuccessCallback:l}):null}function ui({orderId:e,userId:t,shopId:a,showPopup:i,fromSource:r,callback:n}){i(o().createElement(ni,{mode:ei.RATE_MODE,orderId:e,shopId:a,userId:t,fromSource:r,rateSuccessCallback:n}))}function gi({commentId:e,orderId:t,userId:a,shopId:i,isSeller:r,showPopup:n,dismissPopup:d,fromSource:s,callback:_}){n(o().createElement(mi,{dismissPopup:d,commentId:e,shopId:i,isSeller:r,orderId:t,userId:a,fromSource:s,callback:_}))}function hi({commentId:e,orderId:t,userId:a,shopId:i,isSeller:r,showPopup:n,dismissPopup:d,fromSource:s,callback:_}){n(o().createElement(mi,{mode:ei.FOLLOW_UP,dismissPopup:d,commentId:e,shopId:i,isSeller:r,orderId:t,userId:a,fromSource:s,callback:_}))}const yi=e=>{const{mode:t,orderId:a,userId:i,shopId:r,dismissPopup:n,reloadOrder:d}=e;return t===ei.RATE_MODE?o().createElement(ni,{mode:t,orderId:a,userId:i,shopId:r,dismissPopup:n,reloadOrder:d}):o().createElement(pi,{mode:t,orderId:a,userId:i,dismissPopup:n,reloadOrder:d})}},7467:(e,t,a)=>{"use strict";a.d(t,{Sc:()=>I,QH:()=>Mt,ny:()=>kt,Sz:()=>qt,aT:()=>Vt,U6:()=>xt,YQ:()=>$t,dR:()=>It,y9:()=>V,Dj:()=>Wt,nt:()=>Tt,H1:()=>Ot,I6:()=>U,YA:()=>At,IY:()=>Bt,$O:()=>jt,kB:()=>Lt,_X:()=>Ut,wu:()=>Dt}),a(6293);var i=a(4717),o=a(4752);const r=(0,o.n)("EDIT_RATING"),n=(0,o.n)("FETCH_ONE_ITEM_RATING"),d=(0,o.n)("FETCH_ITEM_RATING"),s=(0,o.n)("FETCH_ONE_SHOP_RATING"),_=(0,o.n)("FETCH_SHOP_RATING"),p=(0,o.n)("FETCH_ONE_BUYER_RATING"),c=(0,o.n)("FETCH_BUYER_RATING"),l=(0,o.n)("GET_RATING_META"),m=(0,o.n)("RATE_PRODUCT"),u=((0,o.n)("UPLOAD_IMAGE"),(0,o.n)("REPLY_RATING"),(0,o.n)("LIKE_RATING")),g=(0,o.n)("UNLIKE_RATING"),h=(0,o.n)("REPORT_RATING"),y=(0,o.n)("FETCH_SHOP_RATING_SUMMARY"),v=(0,o.n)("REPLY_ITEM_RATING_V2"),f=(0,o.n)("REPLY_BUYER_RATING_V2"),E=(0,o.n)("CLEAN_RATING_CACHE"),b=(0,o.n)("FETCH_ORDER_ITEM_RATINGS"),w=(0,o.n)("FETCH_ORDER_BUYER_RATINGS"),C=(0,o.n)("LIKE_SHOP_RATING"),S=(0,o.n)("UNLIKE_SHOP_RATING"),N=(0,o.n)("FETCH_RATEABLE_LIST"),R=(0,o.n)("FETCH_MY_RATING_LIST"),k=(0,o.n)("UPDATE_RATEABLE_LIST"),O=(0,o.n)("UPDATE_MY_REVIEW");var M=a(2676);const I={CANT_EDIT:0,CAN_EDIT:1,EDITED_AND_CANT_EDIT:2};let T=function(e){return e[e.SHOW=0]="SHOW",e[e.HIDE=1]="HIDE",e}({});const L=({shopId:e,itemId:t,filter:a=0,type:i=0,tag_filter:o="",variation_filters:r="",exclude_filter:n=T.HIDE,flag:d,filter_size:s,fold_filter:_})=>{const p={shop_id:e,item_id:t,flag:d,filter:a,type:i,tag_filter:o,variation_filters:r,filter_size:s,fold_filter:_,exclude_filter:n};return(0,M.Wc)(p)},B=({shopId:e,filter:t=1,type:a=0})=>{const i={shop_id:e,filter:t,type:a};return(0,M.Wc)(i)},x=({userId:e,filter:t=1,type:a=0})=>{const i={user_id:e,filter:t,type:a};return(0,M.Wc)(i)},A=e=>(0,M.Wc)(e),D=e=>(0,M.Wc)(e);function V(e){return e.editable===I.CAN_EDIT}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},q.apply(this,arguments)}const U=(0,i.Z)({[d.REQUESTED]:(e,t)=>{const{payload:a}=t,i=L(a.query);return q({},e,{queryLoadingState:q({},e.queryLoadingState,{[i]:!0})})},[d.SUCCESS]:(e,t)=>{var a;const i=e.itemRatingSummary,{query:{offset:o,limit:r,exclude_filter:n,filter:d,type:s,tag_filter:_,filter_size:p,variation_filters:c},ratings:l,top_ratings:m,summary:u,hasMore:g,is_sip_item:h,show_local_review:y,browsing_ui:v,rcmd_algo:f,size_info_abt:E,downgradeSwitch:b,purchase_bar_abt:w}=t.payload;let C=l;const S=L(t.payload.query),N=e.itemRating[S];let R=[...N?N.ratings:[]];if((C||[]).forEach((e=>{R.includes(Number(e.cmtid))||R.push(Number(e.cmtid))})),m&&0===o&&!d&&!s&&!_&&!p&&!c){const e=m.map((e=>e.cmtid));R=[...e,...R.filter((t=>!e.includes(t)))],C=[...m,...C.filter((t=>!e.includes(t.cmtid)))]}const k=C.reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),{});let O=null!=(a=null==u?void 0:u.rating_total)?a:0;return n&&(O=Math.max(O,(null==i?void 0:i.rating_total)||0)),q({},e,{itemRatingMap:q({},e.itemRatingMap,k),itemRating:q({},e.itemRating,{[S]:q({},e.itemRating[S],{browsing_ui:v,rcmd_algo:f,size_info_abt:E,hasMore:g,ratings:R,offset:o+r,downgradeSwitch:!!b,summary:q({},u,{rating_total:O})})}),itemRatingSummary:q({},u,{rating_total:O}),is_sip_item:h,show_local_review:y,purchase_bar_abt:w,size_info_abt:E,queryLoadingState:q({},e.queryLoadingState,{[S]:!1}),networkErrorCode:0})},[d.FAILED]:(e,t)=>{const{payload:a}=t,i=L(a.query);return q({},e,{queryLoadingState:q({},e.queryLoadingState,{[i]:!1}),networkErrorCode:a.error})},[E.REQUESTED]:e=>q({},e,{itemRatingMap:{},itemRating:{},shopRating:{},shopRatingMap:{},buyerRating:{},buyerRatingMap:{}}),[n.SUCCESS]:(e,t)=>{const{rating:a}=t.payload;return q({},e,{itemRatingMap:q({},e.itemRatingMap,{[a.cmtid]:a})})},[s.SUCCESS]:(e,t)=>{const{rating:a}=t.payload;return q({},e,{shopRatingMap:[a].reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),e.shopRatingMap)})},[_.REQUESTED]:(e,t)=>{const{payload:a}=t,i=B(a.query);return q({},e,{shopRatingLoadingState:q({},e.shopRatingLoadingState,{[i]:!0}),networkErrorCode:0})},[_.SUCCESS]:(e,t)=>{const{query:{offset:a,limit:i},ratings:o,hasMore:r}=t.payload,n=B(t.payload.query),d=e.shopRating[n],s=d?d.ratings:[],_=o.reduce(((e,t,i)=>(e[i+a]=t.cmtid,e)),[...s]),p=o.reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),{});return q({},e,{shopRatingMap:q({},e.shopRatingMap,p),shopRating:q({},e.shopRating,{[n]:q({},e.shopRating[n],{ratings:_,hasMore:r,offset:a+i})}),shopRatingLoadingState:q({},e.shopRatingLoadingState,{[n]:!1})})},[_.FAILED]:(e,t)=>{const{payload:a}=t,i=B(a.query);return q({},e,{shopRatingLoadingState:q({},e.shopRatingLoadingState,{[i]:!1}),networkErrorCode:t.payload.error})},[p.SUCCESS]:(e,t)=>{const{rating:a}=t.payload;return q({},e,{buyerRatingMap:[a].reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),e.buyerRatingMap)})},[c.REQUESTED]:(e,t)=>{const{payload:a}=t,i=x(a.query);return q({},e,{buyerRatingLoadingState:q({},e.buyerRatingLoadingState,{[i]:!0}),networkErrorCode:0})},[c.SUCCESS]:(e,t)=>{const{query:{offset:a,limit:i},ratings:o,hasMore:r}=t.payload,n=x(t.payload.query),d=e.buyerRating[n],s=d?d.ratings:[],_=o.reduce(((e,t,i)=>(e[i+a]=t.cmtid,e)),[...s]),p=o.reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),{});return q({},e,{buyerRatingMap:q({},e.buyerRatingMap,p),buyerRating:q({},e.buyerRating,{[n]:q({},e.buyerRating[n],{ratings:_,hasMore:r,offset:a+i})}),buyerRatingLoadingState:q({},e.buyerRatingLoadingState,{[n]:!1})})},[c.FAILED]:(e,t)=>{const{payload:a}=t,i=x(a.query);return q({},e,{buyerRatingLoadingState:q({},e.buyerRatingLoadingState,{[i]:!1}),networkErrorCode:a.error})},[l.SUCCESS]:(e,t)=>q({},e,{ratingMeta:t.payload}),[u.REQUESTED]:(e,t)=>{const a=e.itemRatingMap[t.ratingId];return q({},e,{itemRatingMap:q({},e.itemRatingMap,{[t.ratingId]:q({},a,{liked:!0,like_count:t.likeCount})})})},[u.FAILED]:(e,t)=>{const a=e.itemRatingMap[t.ratingId];return q({},e,{itemRatingMap:q({},e.itemRatingMap,{[t.ratingId]:q({},a,{liked:!1,like_count:t.likeCount})})})},[g.REQUESTED]:(e,t)=>{const a=e.itemRatingMap[t.ratingId];return q({},e,{itemRatingMap:q({},e.itemRatingMap,{[t.ratingId]:q({},a,{liked:!1,like_count:t.likeCount})})})},[g.FAILED]:(e,t)=>{const a=e.itemRatingMap[t.ratingId];return q({},e,{itemRatingMap:q({},e.itemRatingMap,{[t.ratingId]:q({},a,{liked:!1,like_count:t.likeCount})})})},[y.SUCCESS]:(e,t)=>q({},e,{shopRatingSummary:t.data}),[f.SUCCESS]:(e,t)=>q({},e,{ratingReplies:q({},e.ratingReplies,{[t.cmtId]:t.comment})}),[f.FAILED]:(e,t)=>q({},e,{ratingReplies:q({},e.ratingReplies,{[t.cmtId]:null})}),[v.SUCCESS]:(e,t)=>q({},e,{ratingReplies:q({},e.ratingReplies,{[t.cmtId]:t.comment})}),[v.FAILED]:(e,t)=>q({},e,{ratingReplies:q({},e.ratingReplies,{[t.cmtId]:null})}),[b.REQUESTED]:(e,t)=>{const a=A(t.payload.query);return q({},e,{orderItemRating:{[a]:{ratings:e.orderItemRating[a]&&e.orderItemRating[a].ratings||[],loading:!0,error:0}}})},[b.SUCCESS]:(e,t)=>{const a=A(t.payload.query);return q({},e,{itemRatingMap:t.payload.ratings.filter((e=>e.cmtid)).reduce(((e,t)=>(e[t.cmtid]=t,e)),e.itemRatingMap),orderItemRating:{[a]:{loading:!1,ratings:t.payload.ratings.filter((e=>e.cmtid)).map((e=>e.cmtid)),error:0,rateable:t.payload.rateable}}})},[b.FAILED]:(e,t)=>{const a=A(t.payload.query);return q({},e,{orderItemRating:{[a]:q({},e.orderItemRating[a],{loading:!1,error:t.payload.error})}})},[w.REQUESTED]:(e,t)=>{const a=D(t.payload.query);return q({},e,{orderBuyerRating:{[a]:{ratings:e.orderBuyerRating[a]&&e.orderBuyerRating[a].ratings||[],loading:!0,error:0}}})},[w.SUCCESS]:(e,t)=>{const a=D(t.payload.query);return q({},e,{buyerRatingMap:t.payload.ratings.filter((e=>e.cmtid)).reduce(((e,t)=>(e[t.cmtid]=t,e)),e.buyerRatingMap),orderBuyerRating:{[a]:{loading:!1,ratings:t.payload.ratings.filter((e=>e.cmtid)).map((e=>e.cmtid)),error:0}}})},[w.FAILED]:(e,t)=>{const a=D(t.payload.query);return q({},e,{orderBuyerRating:{[a]:q({},e.orderBuyerRating[a],{loading:!1,error:t.payload.error})}})},[C.REQUESTED]:(e,t)=>q({},e,{shopRatingMap:q({},e.shopRatingMap,{[t.ratingId]:q({},e.shopRatingMap[t.ratingId],{liked:!0,like_count:t.likeCount})})}),[C.FAILED]:(e,t)=>q({},e,{shopRatingMap:q({},e.shopRatingMap,{[t.ratingId]:q({},e.shopRatingMap[t.ratingId],{liked:!1,like_count:t.likeCount})})}),[S.REQUESTED]:(e,t)=>q({},e,{shopRatingMap:q({},e.shopRatingMap,{[t.ratingId]:q({},e.shopRatingMap[t.ratingId],{liked:!1,like_count:t.likeCount})})}),[S.FAILED]:(e,t)=>q({},e,{shopRatingMap:q({},e.shopRatingMap,{[t.ratingId]:q({},e.shopRatingMap[t.ratingId],{liked:!1,like_count:t.likeCount})})}),[N.REQUESTED]:(e,t)=>{const a=`${t.payload.query.userId}`,i=!!e.rateableListMap[a];return q({},e,{rateableListMap:q({},e.rateableListMap,{[a]:i?q({},e.rateableListMap[a],{loading:!0}):{is_end:!1,rate_list:[],offset:0,loading:!0,errorCode:0,preOffset:-1}})})},[N.SUCCESS]:(e,t)=>{const{userId:a,offset:i}=t.payload.query,o=`${a}`,r=e.rateableListMap[o].rate_list,n=e.rateableListMap[o].preOffset,{is_end:d=!1,rate_list:s=[],cursor:_=0}=t.payload.data||{},p=0===i?[...s||[]]:n!==i?[...r,...s||[]]:r;return q({},e,{rateableListMap:q({},e.rateableListMap,{[o]:q({},e.rateableListMap[o],{rate_list:p,is_end:d,offset:_,loading:!1,preOffset:i,errorCode:0})})})},[N.FAILED]:(e,t)=>{const{userId:a}=t.payload.query||{},i=`${a}`;return q({},e,{rateableListMap:q({},e.rateableListMap,{[i]:q({},e.rateableListMap[i],{loading:!1,errorCode:t.payload.error})})})},[R.REQUESTED]:(e,t)=>{const{userId:a}=t.payload.query,i=!!e.myRatingListMap[a];return q({},e,{myRatingListMap:q({},e.myRatingListMap,{[a]:i?q({},e.myRatingListMap[a],{loading:!0}):{is_end:!1,ratingList:[],ratingListMap:{},offset:0,loading:!0,errorCode:0}})})},[R.SUCCESS]:(e,t)=>{const{userId:a,offset:i,limit:o}=t.payload.query,r=e.myRatingListMap[a].ratingList,{is_end:n,rate_list:d}=t.payload.data||{},s=(d||[]).reduce(((e,t,a)=>(e[a+i]=t.cmtid,e)),0===i?[]:[...r]),_=(d||[]).reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),{});return q({},e,{myRatingListMap:q({},e.myRatingListMap,{[a]:q({},e.myRatingListMap[a],{ratingList:s,ratingListMap:q({},e.myRatingListMap[a].ratingListMap,_),is_end:n,offset:i+o,loading:!1,errorCode:0})})})},[R.FAILED]:(e,t)=>{const{userId:a}=t.payload.query;return q({},e,{myRatingListMap:q({},e.myRatingListMap,{[a]:q({},e.myRatingListMap[a],{loading:!1,errorCode:t.payload.error})})})},[k.SUCCESS]:(e,t)=>{var a;const{orderId:i,userId:o}=t,r=(null==(a=e.rateableListMap[o])?void 0:a.rate_list)||[],n=r.findIndex((e=>e.order_id===i));if(n>=0){const t=[...r];return t.splice(n,1),q({},e,{rateableListMap:q({},e.rateableListMap,{[o]:q({},e.rateableListMap[o],{rate_list:t})})})}return e},[O.SUCCESS]:(e,t)=>{const{cmtid:a,updateData:i,userId:o}=t.data;return q({},e,{myRatingListMap:q({},e.myRatingListMap,{[o]:q({},e.myRatingListMap[o],{ratingListMap:q({},e.myRatingListMap[o].ratingListMap,{[a]:q({},e.myRatingListMap[o].ratingListMap[a],i)})})})})}},{shopRating:{},shopRatingMap:{},size_info_abt:"",buyerRating:{},buyerRatingMap:{},itemRating:{},itemRatingMap:{},orderItemRating:{},orderBuyerRating:{},ratingReplies:{},ratingText:{},queryLoadingState:{},shopRatingLoadingState:{},buyerRatingLoadingState:{},networkErrorCode:0,ratingMeta:null,rateableListMap:{},myRatingListMap:{}});var W=a(8574),j=a(1437),F=a(7747),$=a(5214),P=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"value",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"domain",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"max_age",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"path",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"secure",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"http_only",void 0),t=(0,F.__decorate)([$.iV],e)}()),J=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"no_cache",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"no_store",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"must_revalidate",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"max_age",void 0),t=(0,F.__decorate)([$.iV],e)}(),H=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return P}}),(0,F.__metadata)("design:type",Array)],e.prototype,"cookies",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"session_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"client_ip",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"platform",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"url",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"user_agent",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"sso_token",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"shopee_token",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"tracking_session_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"country",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"downgrade",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"language",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"client_ip_country",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"device_fingerprint",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"app_version",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"rn_version",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"app_type",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"client_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"client_platform",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_from_xiapibuy",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"referer",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"forwarded_for",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"real_ip",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"crawler",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return P}}),(0,F.__metadata)("design:type",Array)],e.prototype,"cookies",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"content_type",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return J}}),(0,F.__metadata)("design:type",J)],e.prototype,"cache_control",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"count",void 0),t=(0,F.__decorate)([$.iV],e)}()),X=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return H}}),(0,F.__metadata)("design:type",Array)],e.prototype,"tag_filters",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"signature",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"downgrade_switch",void 0),t=(0,F.__decorate)([$.iV],e)}(),G=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"variation_filters",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return X}}),(0,F.__metadata)("design:type",X)],e.prototype,"data",void 0),t=(0,F.__decorate)([$.iV],e)}()),Q=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Z}}),(0,F.__metadata)("design:type",Z)],e.prototype,"data",void 0),t=(0,F.__decorate)([$.iV],e)}()),Z=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return z}}),(0,F.__metadata)("design:type",z)],e.prototype,"buyer_rating_summary",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return z}}),(0,F.__metadata)("design:type",z)],e.prototype,"seller_rating_summary",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"total_avg_star",void 0),t=(0,F.__decorate)([$.iV],e)}(),z=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_total",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Number}}),(0,F.__metadata)("design:type",Array)],e.prototype,"rating_count",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),t=(0,F.__decorate)([$.iV],e)}(),Y=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"limit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"flag",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"type",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"tag_filter",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"exclude_filter",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"request_source",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"variation_filters",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"relevant_reviews",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"filter_size",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"fold_filter",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Y}}),(0,F.__metadata)("design:type",Y)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",Array)],e.prototype,"ratings",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return re}}),(0,F.__metadata)("design:type",re)],e.prototype,"item_rating_summary",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_sip_item",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"rcmd_algo",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"downgrade_switch",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"has_more",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"show_local_review",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"browsing_ui",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"enable_buyer_gallery_media",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",te)],e.prototype,"user_latest_rating",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"size_info_abt",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",Array)],e.prototype,"top_ratings",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"resize_image_abt",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"purchase_bar_abt",void 0),t=(0,F.__decorate)([$.iV],e)}()),K=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",Array)],e.prototype,"ratings",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return re}}),(0,F.__metadata)("design:type",re)],e.prototype,"item_rating_summary",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_sip_item",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"rcmd_algo",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return K}}),(0,F.__metadata)("design:type",Array)],e.prototype,"facets",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"signature",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",te)],e.prototype,"user_latest_rating",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"count",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"type",void 0),t=(0,F.__decorate)([$.iV],e)}()),ee=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_oversea",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"origin_region",void 0),t=(0,F.__decorate)([$.iV],e)}(),te=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"mtime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"editable",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"opt",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ce}}),(0,F.__metadata)("design:type",Array)],e.prototype,"mentioned",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_hidden",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"can_follow_up",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return _t}}),(0,F.__metadata)("design:type",_t)],e.prototype,"follow_up",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"author_username",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"author_portrait",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"author_shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"anonymous",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"images",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ne}}),(0,F.__metadata)("design:type",Array)],e.prototype,"videos",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return _e}}),(0,F.__metadata)("design:type",Array)],e.prototype,"product_items",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"delete_reason",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"delete_operator",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return pe}}),(0,F.__metadata)("design:type",pe)],e.prototype,"ItemRatingReply",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return le}}),(0,F.__metadata)("design:type",Array)],e.prototype,"tags",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"editable_date",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"show_reply",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"like_count",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"liked",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"sync_to_social",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return me}}),(0,F.__metadata)("design:type",me)],e.prototype,"detailed_rating",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"exclude_scoring_due_low_logistic",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ue}}),(0,F.__metadata)("design:type",ue)],e.prototype,"loyalty_info",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"template_tags",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"has_template_tag",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"sync_to_social_toggle",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ee}}),(0,F.__metadata)("design:type",ee)],e.prototype,"sip_info",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_repeated_purchase",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"display_variation_filter",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"overall_fit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_normal_item",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"viewed",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"show_view",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return it}}),(0,F.__metadata)("design:type",it)],e.prototype,"sync_to_social_detail",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ae}}),(0,F.__metadata)("design:type",ae)],e.prototype,"profile",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"size_info_tags",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"size_info_abt",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return de}}),(0,F.__metadata)("design:type",Array)],e.prototype,"image_data",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return se}}),(0,F.__metadata)("design:type",se)],e.prototype,"key_media",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_super_review",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"super_reviewer_tag",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_newly_created",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return at}}),(0,F.__metadata)("design:type",Array)],e.prototype,"template_tags_hints",void 0),t=(0,F.__decorate)([$.iV],e)}(),ae=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ie}}),(0,F.__metadata)("design:type",Array)],e.prototype,"measurements",void 0),t=(0,F.__decorate)([$.iV],e)}(),ie=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"measurement_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"measurement_name",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return oe}}),(0,F.__metadata)("design:type",Array)],e.prototype,"unit_values",void 0),t=(0,F.__decorate)([$.iV],e)}(),oe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"value",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"unit",void 0),t=(0,F.__decorate)([$.iV],e)}(),re=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_total",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Number}}),(0,F.__metadata)("design:type",Array)],e.prototype,"rating_count",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_with_context",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_with_image",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_with_media",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_local_review",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_repeat_purchase",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_overall_fit_small",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_overall_fit_fit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_overall_fit_large",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_oversea_review",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_folded",void 0),t=(0,F.__decorate)([$.iV],e)}(),ne=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"cover",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"url",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"duration",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"upload_time",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"mms_ext",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"cover_image_id",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return t}}),(0,F.__metadata)("design:type",e)],e.prototype,"highlight",void 0),t=(0,F.__decorate)([$.iV],e)}(),de=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"image_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"cover_image_id",void 0),t=(0,F.__decorate)([$.iV],e)}(),se=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"key_media_code",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"key_media_id",void 0),t=(0,F.__decorate)([$.iV],e)}(),_e=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"image",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"is_snapshot",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"snapshotid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"modelid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"model_name",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"options",void 0),t=(0,F.__decorate)([$.iV],e)}(),pe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"mtime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"editable",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"opt",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ce}}),(0,F.__metadata)("design:type",Array)],e.prototype,"mentioned",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_hidden",void 0),t=(0,F.__decorate)([$.iV],e)}(),ce=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"length",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"infoid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"type",void 0),t=(0,F.__decorate)([$.iV],e)}(),le=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"tag_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"tag_description",void 0),t=(0,F.__decorate)([$.iV],e)}(),me=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"product_quality",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"seller_service",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"delivery_service",void 0),t=(0,F.__decorate)([$.iV],e)}(),ue=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"tier_code",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"user_tier_badge_url",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"tier_text",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"user_tier_badge_text_color",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"user_tier_badge_background_color",void 0),t=(0,F.__decorate)([$.iV],e)}(),ge=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"image",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Number}}),(0,F.__metadata)("design:type",Array)],e.prototype,"modelids",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"price",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"price_before_discount",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"stock",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"flash_sale_stock",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"promotionid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"start_time",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"end_time",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"discount",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"promo_name",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"promo_images",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"promo_overlay_image",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"raw_discount",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"hidden_price_display",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"reminder_count",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"flash_sale_type",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"brand_sale_brand_custom_logo",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_shop_preferred",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_shop_official",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ve}}),(0,F.__metadata)("design:type",ve)],e.prototype,"voucher",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ve}}),(0,F.__metadata)("design:type",ve)],e.prototype,"extra_discount_info",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"flash_catid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_type",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"reference_item_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cat_label",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Number}}),(0,F.__metadata)("design:type",Array)],e.prototype,"rating_count",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_with_context",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rcount_with_image",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"video_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"thumb_url",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"duration",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"version",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ge}}),(0,F.__metadata)("design:type",Array)],e.prototype,"formats",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ge}}),(0,F.__metadata)("design:type",ge)],e.prototype,"default_format",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"format",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"defn",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"profile",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"path",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"url",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"width",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"height",void 0),t=(0,F.__decorate)([$.iV],e)}()),he=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"min_count",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"max_count",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"price",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"bundle_deal_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"bundle_deal_label",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"options",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"images",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return he}}),(0,F.__metadata)("design:type",Array)],e.prototype,"properties",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"color",void 0),t=(0,F.__decorate)([$.iV],e)}()),ye=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"campaignid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"group_buy_price",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"start_time",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"end_time",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"group_size",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"purchase_limit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"payment_duration",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"custom_name",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"custom_images",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"group_buy_catid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"users_paid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"custom_name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"custom_image",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"preview_end_time",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"add_on_deal_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"add_on_deal_label",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"sub_type",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"promotion_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"voucher_code",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"label",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ye}}),(0,F.__metadata)("design:type",Array)],e.prototype,"exclusive_price_results",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"promotion_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_entitled",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"save_amount",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"label",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"url",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"url_text",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"mobile_image",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"pc_image",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"background_color",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"model_ep_price",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"model_ep_discount",void 0),t=(0,F.__decorate)([$.iV],e)}()),ve=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"order_max_purchase_limit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"overall_purchase_limit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_overall_quota",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"start_date",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"end_date",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"promotionid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"voucher_code",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"reward_type",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"discount_value",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"discount_percentage",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coin_percentage",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"min_spend",void 0),t=(0,F.__decorate)([$.iV],e)}()),fe=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"flash_sale_price",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"hidden_price_display",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"extra_discount",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"extra_discount_stock",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"start_time",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"end_time",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"order_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"apply_coin_limits_validate",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coins_earned_with_pictures_or_videos",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coins_earned_with_pictures_and_videos",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coins_earned_with_human_or_object",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"size_info_rewards",void 0),t=(0,F.__decorate)([$.iV],e)}()),Ee=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return fe}}),(0,F.__metadata)("design:type",fe)],e.prototype,"coin_reward_rule",void 0),t=(0,F.__decorate)([$.iV],e)}(),be=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"threshold",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"max_times",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"duration",void 0),t=(0,F.__decorate)([$.iV],e)}(),we=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"passed",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return be}}),(0,F.__metadata)("design:type",be)],e.prototype,"limits_info",void 0),t=(0,F.__decorate)([$.iV],e)}(),Ce=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return we}}),(0,F.__metadata)("design:type",Array)],e.prototype,"coin_limits_validate_result",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ee}}),(0,F.__metadata)("design:type",Array)],e.prototype,"coin_reward_rule_list",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return we}}),(0,F.__metadata)("design:type",Array)],e.prototype,"coin_limits_validate_result",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ce}}),(0,F.__metadata)("design:type",Ce)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"can_rate",void 0),t=(0,F.__decorate)([$.iV],e)}()),Se=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"raw_data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"apply_coin_limits_validate",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"coin_succ",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"order_succ",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"review_prize_status",void 0),t=(0,F.__decorate)([$.iV],e)}()),Ne=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coins_earned",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"available_amount",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"referral_coins",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Se}}),(0,F.__metadata)("design:type",Se)],e.prototype,"extra_info",void 0),t=(0,F.__decorate)([$.iV],e)}(),Re=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ne}}),(0,F.__metadata)("design:type",Ne)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return we}}),(0,F.__metadata)("design:type",Array)],e.prototype,"coin_limits_validate_result",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"limit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ke}}),(0,F.__metadata)("design:type",ke)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"flag",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"type",void 0),t=(0,F.__decorate)([$.iV],e)}()),ke=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Oe}}),(0,F.__metadata)("design:type",Array)],e.prototype,"items",void 0),t=(0,F.__decorate)([$.iV],e)}(),Oe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"mtime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"editable",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"opt",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ce}}),(0,F.__metadata)("design:type",Array)],e.prototype,"mentioned",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"author_username",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"author_portrait",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"author_shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"anonymous",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"editable_date",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"images",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return _e}}),(0,F.__metadata)("design:type",Array)],e.prototype,"product_items",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"delete_reason",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"delete_operator",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Me}}),(0,F.__metadata)("design:type",Me)],e.prototype,"UserRatingReply",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"show_reply",void 0),t=(0,F.__decorate)([$.iV],e)}(),Me=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"mtime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"editable",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"opt",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ce}}),(0,F.__metadata)("design:type",Array)],e.prototype,"mentioned",void 0),t=(0,F.__decorate)([$.iV],e)}(),Ie=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"shop",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"user",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"shop",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"user",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"image",void 0),t=(0,F.__decorate)([$.iV],e)}()),Te=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ie}}),(0,F.__metadata)("design:type",Array)],e.prototype,"options",void 0),t=(0,F.__decorate)([$.iV],e)}(),Le=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"count",void 0),t=(0,F.__decorate)([$.iV],e)}(),Be=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"item_name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"item_image",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Te}}),(0,F.__metadata)("design:type",Array)],e.prototype,"option_infos",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Le}}),(0,F.__metadata)("design:type",Array)],e.prototype,"count_infos",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"downgrade_switch",void 0),t=(0,F.__decorate)([$.iV],e)}(),xe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Be}}),(0,F.__metadata)("design:type",Be)],e.prototype,"data",void 0),t=(0,F.__decorate)([$.iV],e)}(),Ae=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"is_seller",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",te)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ae}}),(0,F.__metadata)("design:type",Ae)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"be_error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"minimum_videos",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return De}}),(0,F.__metadata)("design:type",Array)],e.prototype,"tags",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coins_earned_with_pics_and_videos",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coins_earned",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"minimum_characters",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"minimum_pictures",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ve}}),(0,F.__metadata)("design:type",Ve)],e.prototype,"popup_config",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"default_rating_star",void 0),t=(0,F.__decorate)([$.iV],e)}()),De=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return le}}),(0,F.__metadata)("design:type",Array)],e.prototype,"tags",void 0),t=(0,F.__decorate)([$.iV],e)}(),Ve=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"item",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"model",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"popup_text",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"popup_button_refer_now",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"popup_refer_now_url",void 0),t=(0,F.__decorate)([$.iV],e)}()),qe=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"limit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return qe}}),(0,F.__metadata)("design:type",qe)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",Array)],e.prototype,"items",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"rateable",void 0),t=(0,F.__decorate)([$.iV],e)}()),Ue=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ue}}),(0,F.__metadata)("design:type",Ue)],e.prototype,"buyer",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"username",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"portrait",void 0),t=(0,F.__decorate)([$.iV],e)}()),We=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return We}}),(0,F.__metadata)("design:type",Array)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"comments",void 0),t=(0,F.__decorate)([$.iV],e)}()),je=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return je}}),(0,F.__metadata)("design:type",Array)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Fe}}),(0,F.__metadata)("design:type",Fe)],e.prototype,"score",void 0),t=(0,F.__decorate)([$.iV],e)}()),Fe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"text",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"symbol",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"total",void 0),t=(0,F.__decorate)([$.iV],e)}(),$e=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"limit",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Pe}}),(0,F.__metadata)("design:type",Pe)],e.prototype,"data",void 0),t=(0,F.__decorate)([$.iV],e)}()),Pe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",Array)],e.prototype,"rate_list",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_end",void 0),t=(0,F.__decorate)([$.iV],e)}(),Je=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"limit",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"is_asc",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"apply_coin_limits_validate",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"shop_name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"user_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"user_name",void 0),t=(0,F.__decorate)([$.iV],e)}()),He=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"model_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"model_name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"image",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"amount",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_price",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"snapshot_id",void 0),t=(0,F.__decorate)([$.iV],e)}(),Xe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Je}}),(0,F.__metadata)("design:type",Je)],e.prototype,"shop_info",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return He}}),(0,F.__metadata)("design:type",Array)],e.prototype,"items",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"order_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coin_to_earn",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rate_deadline",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"total_price",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"currency",void 0),t=(0,F.__decorate)([$.iV],e)}(),Ge=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_end",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Xe}}),(0,F.__metadata)("design:type",Array)],e.prototype,"rate_list",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cursor",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"buyer_to_rate_count",void 0),t=(0,F.__decorate)([$.iV],e)}(),Qe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ge}}),(0,F.__metadata)("design:type",Ge)],e.prototype,"data",void 0),t=(0,F.__decorate)([$.iV],e)}(),Ze=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"raw_data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"referral_coins",void 0),t=(0,F.__decorate)([$.iV],e)}()),ze=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ze}}),(0,F.__metadata)("design:type",Ze)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},t=(0,F.__decorate)([$.iV],e)}()),Ye=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ze}}),(0,F.__metadata)("design:type",ze)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"is_seller",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Oe}}),(0,F.__metadata)("design:type",Oe)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"photos",void 0),t=(0,F.__decorate)([$.iV],e)}()),Ke=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ye}}),(0,F.__metadata)("design:type",Array)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ke}}),(0,F.__metadata)("design:type",Ke)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},t=(0,F.__decorate)([$.iV],e)}()),et=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ye}}),(0,F.__metadata)("design:type",Array)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Ke}}),(0,F.__metadata)("design:type",Ke)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return et}}),(0,F.__metadata)("design:type",et)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"expiry_time",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_expired",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_rated",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"ordersn",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"order_privacy_toggle_status",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return tt}}),(0,F.__metadata)("design:type",Array)],e.prototype,"items",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"coin_to_earn",void 0),t=(0,F.__decorate)([$.iV],e)}()),tt=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"modelid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"image",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"image_list",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"model_names",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"sync_to_social_toggle",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"template_tags",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return it}}),(0,F.__metadata)("design:type",it)],e.prototype,"sync_to_social_detail",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return at}}),(0,F.__metadata)("design:type",Array)],e.prototype,"template_tags_hints",void 0),t=(0,F.__decorate)([$.iV],e)}(),at=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"tag",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"hint",void 0),t=(0,F.__decorate)([$.iV],e)}(),it=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"qcResult",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"enableProductRatingSync",void 0),t=(0,F.__decorate)([$.iV],e)}(),ot=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"anonymous",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ze}}),(0,F.__metadata)("design:type",ze)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return te}}),(0,F.__metadata)("design:type",Array)],e.prototype,"items",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"rateable",void 0),t=(0,F.__decorate)([$.iV],e)}()),rt=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ot}}),(0,F.__metadata)("design:type",ot)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return Oe}}),(0,F.__metadata)("design:type",Array)],e.prototype,"items",void 0),t=(0,F.__decorate)([$.iV],e)}()),nt=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return rt}}),(0,F.__metadata)("design:type",rt)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"like",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return nt}}),(0,F.__metadata)("design:type",nt)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"like_count",void 0),t=(0,F.__decorate)([$.iV],e)}()),dt=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"reason",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"be_error",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ze}}),(0,F.__metadata)("design:type",ze)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"enable",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return dt}}),(0,F.__metadata)("design:type",Array)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"signature",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"is_white_list_user",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Boolean)],e.prototype,"show_review_prize",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"reward_coin",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),t=(0,F.__decorate)([$.iV],e)}()),st=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return st}}),(0,F.__metadata)("design:type",st)],e.prototype,"data",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"price",void 0),t=(0,F.__decorate)([$.iV],e)}()),_t=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmt_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"order_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"photos",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ne}}),(0,F.__metadata)("design:type",Array)],e.prototype,"videos",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return me}}),(0,F.__metadata)("design:type",me)],e.prototype,"detailed_rating",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ze}}),(0,F.__metadata)("design:type",ze)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"cmt_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"order_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ze}}),(0,F.__metadata)("design:type",ze)],e.prototype,"data",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,F.__decorate)([$.iV],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return(0,$.vB)(e,t)},(0,F.__decorate)([(0,$.ep)({mapTo:function(){return String}}),(0,F.__metadata)("design:type",Array)],e.prototype,"images",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return ne}}),(0,F.__metadata)("design:type",Array)],e.prototype,"videos",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,F.__decorate)([(0,$.ep)(),(0,F.__metadata)("design:type",Number)],e.prototype,"after_days",void 0),(0,F.__decorate)([(0,$.ep)({mapTo:function(){return pe}}),(0,F.__metadata)("design:type",pe)],e.prototype,"follow_up_reply",void 0),t=(0,F.__decorate)([$.iV],e)}()),pt=a(6704);const{fetchInfo:ct,formPost:lt,jsonPost:mt}=pt.FetchUtils,ut=e=>ct(`/api/v2/user/get_rating_summary${(0,M.Wc)({userid:e})}`),gt=({shopId:e,userId:t,offset:a,limit:i,filter:o,type:r})=>ct(`/api/v2/buyer/get_ratings${(0,M.Wc)({shopid:e,userid:t,offset:a,limit:i,filter:o,type:r})}`);function ht(e,t,a){return mt(ft,{cmtid:e,shopid:t,itemid:a,like:!0})}function yt(e,t,a){return mt(ft,{cmtid:e,shopid:t,itemid:a,like:!1})}const vt="/api/v2/item/get_rating_meta",ft="/api/v2/like_item_rating",Et="/api/v2/report_item_rating",bt="/api/v2/reply_buyer_rating",wt="/api/v2/item/add_rating",Ct="/api/v2/item/edit_rating",St=({orderid:e=0,limit:t=10}={})=>ct(`/api/v4/item/get_my_ratable_list${(0,M.Wc)({orderid:e,limit:t,apply_coin_limits_validate:!0})}`),Nt=({offset:e=0,limit:t=20}={})=>ct(`/api/v4/item/get_my_rating_list${(0,M.Wc)({offset:e,limit:t})}`);xe.fromJSON,G.fromJSON;const Rt=(0,j.isFeatureEnabled)("ab577b870f2ce608b36970142f91c777f2575a8110343f22354d0848a75c1fad",!1);function kt(e){return async(t,a)=>{await(0,W.ZP)({apiCall:()=>gt(e),actions:[{type:c.REQUESTED,payload:()=>({query:e})},{type:c.SUCCESS,payload:(t,a,i)=>{Rt&&(i=Re.fromJSON(i));const o=i.data&&i.data.items?i.data.items:[];return{query:e,ratings:o,hasMore:o.length>=e.limit}}},{type:c.FAILED,payload:(t,a,i)=>({query:e,error:i.error})}]},t,a)}}function Ot(e,t,a,i,o=!1,r,n,d){return async(s,_)=>await(0,W.ZP)({apiCall:()=>function(e){return mt(wt,e)}({shopid:e,orderid:t,objectid:a?1:0,seller_service:r,delivery_service:n,rate_items_data:i,is_media_gray_user:o,apply_coin_limits_validate:!0,api_version:d}),actions:[{type:m.REQUESTED},{type:m.SUCCESS,payload:(e,a,o)=>({orderId:t,data:i,seller_service:r,delivery_service:n,res:o})},{type:m.FAILED,payload:(e,a,o)=>({orderId:t,data:i,seller_service:r,delivery_service:n,error:o.error})}]},s,_)}function Mt(e,t,a,i,o){return async(n,d)=>{const s={orderid:t,shopid:e,cmtid:a,rate_items_data:i,api_version:o};return await(0,W.ZP)({apiCall:()=>function(e){return mt(Ct,e)}(s),actions:[{type:r.REQUESTED},{type:r.SUCCESS,payload:()=>({requestData:s})},{type:r.FAILED,payload:(e,t,i)=>({commentId:a,error:i.error})}]},n,d)}}function It(){return async(e,t)=>{await(0,W.ZP)({apiCall:()=>ct(vt),actions:[{type:l.REQUESTED},{type:l.SUCCESS,payload:(e,t,a)=>a.data},{type:l.FAILED,payload:(e,t,a)=>({error:a.error})}]},e,t)}}function Tt(e,t,a,i){return async r=>{r((0,o.a)(u.REQUESTED,{ratingId:e,likeCount:i+1}));const n=await ht(e,t,a);return n.error&&r((0,o.a)(u.FAILED,{ratingId:e,likeCount:i})),n}}function Lt(e,t,a,i){return async r=>{const n=i>0?i-1:0;r((0,o.a)(g.REQUESTED,{ratingId:e,likeCount:n}));const d=await yt(e,t,a);return d.error&&r((0,o.a)(g.FAILED,{ratingId:e,likeCount:i})),d}}function Bt(e,t,a,i){return async r=>{r((0,o.a)(h.REQUESTED,{ratingId:e}));const n=await function(e,t,a,i){return mt(Et,{cmtid:e,shopid:t,itemid:a,reason:i})}(e,t,a,i);return n.error&&r((0,o.a)(h.FAILED,{ratingId:e})),n}}function xt(e){return async t=>{t((0,o.a)(y.REQUESTED,{userId:e}));const{error:a,response:i}=await ut(e),r=Rt?Q.fromJSON(i):i;a?t((0,o.a)(y.FAILED,{userId:e})):r&&r.data&&t((0,o.a)(y.SUCCESS,{data:r.data}))}}function At(e,t,a,i){return async r=>{r((0,o.a)(f.REQUESTED));const{error:n}=await function(e,t,a,i){return mt(bt,{cmtid:e,orderid:t,shopid:a,comment:i})}(e,t,a,i);r(n?(0,o.a)(f.FAILED,{cmtId:e,orderId:t,shopId:a,comment:i,error:n}):(0,o.a)(f.SUCCESS,{cmtId:e,orderId:t,shopId:a,comment:i}))}}function Dt(e,t){return a=>{a((0,o.a)(k.SUCCESS,{orderId:e,userId:t}))}}function Vt({userId:e,orderid:t=0,limit:a=10}){return async(i,o)=>await(0,W.ZP)({apiCall:()=>St({orderid:t,limit:a}),actions:[{type:N.REQUESTED,payload:()=>({query:{userId:e}})},{type:N.SUCCESS,payload:(a,i,o)=>(Rt&&(o=Qe.fromJSON(o)),{query:{userId:e,offset:t},data:o.data})},{type:N.FAILED,payload:(t,a,i)=>({query:{userId:e},error:i.error})}]},i,o)}function qt({userId:e,offset:t=0,limit:a=20}){return async(i,o)=>await(0,W.ZP)({apiCall:()=>Nt({offset:t,limit:a}),actions:[{type:R.REQUESTED,payload:()=>({query:{userId:e,offset:t,limit:a}})},{type:R.SUCCESS,payload:(i,o,r)=>(Rt&&(r=$e.fromJSON(r)),{query:{userId:e,offset:t,limit:a},data:r.data})},{type:R.FAILED,payload:(i,o,r)=>({query:{userId:e,offset:t,limit:a},error:r.error})}]},i,o)}function Ut(e,t,a){return async i=>i((0,o.a)(O.SUCCESS,{data:{cmtid:e,updateData:t,userId:a}}))}function Wt(e,t,a,i,r){return async n=>{n((0,o.a)(O.SUCCESS,{data:{cmtid:e,userId:r,updateData:{like_count:i+1,liked:!0}}}));const d=await ht(e,t,a);return d.error&&n((0,o.a)(O.SUCCESS,{data:{cmtid:e,userId:r,updateData:{like_count:i,liked:!1}}})),d}}function jt(e,t,a,i,r){return async n=>{const d=i>0?i-1:0;n((0,o.a)(O.SUCCESS,{data:{cmtid:e,userId:r,updateData:{like_count:d,liked:!1}}}));const s=await yt(e,t,a);return s.error&&n((0,o.a)(O.SUCCESS,{data:{cmtid:e,userId:r,updateData:{like_count:i,liked:!0}}})),s}}var Ft=a(344);function $t(e){return(0,Ft.Z)(e,["shopRatingSummary","buyer_rating_summary"],null)}},5214:(e,t,a)=>{"use strict";function i(e){return function(t,a){d({target:t,property:a,transform(t,a,i){if(!e&&a&&!n(a))switch(a.name.toLowerCase()){case"number":return isNaN(parseInt(t))?0:t;case"string":return"string"==typeof t?t:"";case"boolean":return"boolean"==typeof t&&t;default:return t}if(e&&null!=e&&e.mapTo){const o=e.mapTo(),r="[object Array]"===Object.prototype.toString.call(t);if(a===Array&&r){const e=[];return t.forEach((t=>{e.push(s(t,o))})),e}return e&&a===Array&&!r?[]:(null==o?void 0:o.name)===(null==a?void 0:a.name)?i?void 0:s(t,o,!0):s(t,o)}}})}}a.d(t,{ep:()=>i,iV:()=>r,pF:()=>n,vB:()=>s,eC:()=>d}),a(6293);const o="SERIALIZE_META_DATA_KEY";function r(e){Reflect.defineMetadata(o,!0,e)}function n(e){return Reflect.hasOwnMetadata(o,e)}function d(e){var t;const{target:a,property:i,transform:o,validator:r}=e;let n=new Map;if(Reflect.hasMetadata(a,a)&&(n=Reflect.getMetadata(a,a)),null!=(t=n.get(i))&&t.length){var d,s;const e=null!=(d=null==(s=n)?void 0:s.get(i))?d:[];n.set(i,e.concat({transform:o,validator:r}))}else n.set(i,[{transform:o,validator:r}]);Reflect.defineMetadata(a,n,a)}function s(e,t,a){let i=new t;const o=Reflect.getMetadata(t.prototype,t.prototype);if(!n(t)||!o)return e;for(const n of o.keys()){var r;const d=null!=(r=null==o?void 0:o.get(n))?r:[];i[n]=null==e?void 0:e[n];const s=t.prototype.constructor.name,_=Reflect.getMetadata("design:type",i,n);d.forEach((({transform:e,validator:t})=>{null==t||t(s,n,i[n],_);const o=e(i[n],_,a);null!=o?i[n]=o:a&&delete i[n]}))}return i=Object.assign(e||{},i),i}},7213:(e,t,a)=>{var i={"./cl.png":4413,"./co.png":8930,"./pl.png":8618,"./sg.png":541};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=7213},1858:(e,t,a)=>{var i={"./ar.png":1584,"./br.png":952,"./cl.png":2878,"./co.png":6560,"./es.png":9643,"./fr.png":6069,"./id.png":3589,"./in.png":4392,"./mx.png":2948,"./my.png":5830,"./ph.png":7513,"./pl.png":7267,"./sg.png":9990,"./th.png":5374,"./tw.png":591,"./vn.png":6462};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=1858},2583:(e,t,a)=>{var i={"./ar.png":6825};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=2583},551:(e,t,a)=>{var i={"./ar.png":4244,"./br.png":9342,"./cl.png":6817,"./co.png":584,"./es.png":6677,"./fr.png":9142,"./id.png":8645,"./in.png":8093,"./mx.png":5634,"./my.png":6993,"./ph.png":6937,"./pl.png":8505,"./sg.png":3435,"./th.png":3267,"./tw.png":7448,"./vn.png":2175};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=551},5357:(e,t,a)=>{var i={"./ar.png":4922,"./br.png":9030,"./cl.png":7792,"./co.png":2351,"./es.png":4030,"./fr.png":4808,"./id.png":2662,"./in.png":5389,"./mx.png":1853,"./my.png":2566,"./ph.png":1546,"./pl.png":2421,"./sg.png":5277,"./th.png":2025,"./tw.png":6292,"./vn.png":9009};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=5357},4796:(e,t,a)=>{var i={"./popup_apponly@2x.png":8992,"./popup_mall_apponly@2x.png":9176};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=4796},3868:(e,t,a)=>{var i={"./popup_apponly_tw@2x.png":186,"./popup_mall_apponly_tw@2x.png":7393};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=3868},4874:(e,t,a)=>{var i={"./popup_apponly@2x.png":2937,"./popup_mall_apponly@2x.png":5283};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=4874},4042:(e,t,a)=>{var i={"./popup_apponly_tw@2x.png":2479,"./popup_mall_apponly_tw@2x.png":2551};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=4042},3906:()=>{},974:(e,t,a)=>{"use strict";e.exports=a.microfeI(2)},6697:(e,t,a)=>{"use strict";e.exports=a.microfeI(3)},705:(e,t,a)=>{"use strict";e.exports=a.microfeI(1)},471:(e,t,a)=>{"use strict";e.exports=a.microfeI(0)},7356:(e,t,a)=>{"use strict";e.exports=a.microfeI(4)}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/pcmall-shoprating/_/822.834f9188d9b50bad7d8d.js.map