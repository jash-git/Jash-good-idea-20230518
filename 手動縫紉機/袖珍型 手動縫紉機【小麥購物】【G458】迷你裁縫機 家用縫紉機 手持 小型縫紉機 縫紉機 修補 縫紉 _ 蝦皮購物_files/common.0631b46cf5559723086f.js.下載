(self.miniJsonp=self.miniJsonp||[]).push([[592],{37764:function(e,t,r){var n;n=(e,t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m)=>(()=>{var g={757:(e,t,r)=>{e.exports=r(666)},439:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}E(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&E(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,a,c,u;if(s(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),c=a[t]),void 0===c)c=a[t]=r,++e._eventsCount;else if("function"==typeof c?c=a[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),(o=i(e))>0&&c.length>o&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):_(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function E(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return i(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var i=a[e];if(void 0===i)return!1;if("function"==typeof i)n(i,this,t);else{var u=i.length,l=_(i,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,c;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){c=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,c||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new C(n||[]);return a._invoke=function(e,t,r){var n=d;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function O(){}function h(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=h.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:P}}function P(){return{value:t,done:!0}}return O.prototype=g.constructor=h,h.constructor=O,O.displayName=i(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},782:e=>{"use strict";e.exports=l},830:e=>{"use strict";e.exports=d},292:e=>{"use strict";e.exports=p},846:e=>{"use strict";e.exports=S},674:e=>{"use strict";e.exports=a},378:e=>{"use strict";e.exports=s},464:e=>{"use strict";e.exports=i},428:e=>{"use strict";e.exports=E},661:e=>{"use strict";e.exports=r},444:e=>{"use strict";e.exports=c},598:e=>{"use strict";e.exports=o},550:e=>{"use strict";e.exports=h},383:t=>{"use strict";t.exports=e},252:e=>{"use strict";e.exports=u},655:e=>{"use strict";e.exports=m},944:e=>{"use strict";e.exports=_},975:e=>{"use strict";e.exports=O},947:e=>{"use strict";e.exports=v},855:e=>{"use strict";e.exports=t},672:e=>{"use strict";e.exports=n},455:e=>{"use strict";e.exports=f},459:e=>{"use strict";e.exports=T}},b={};function y(e){var t=b[e];if(void 0!==t)return t.exports;var r=b[e]={exports:{}};return g[e](r,r.exports,y),r.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var r in t)y.o(t,r)&&!y.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var R={};return(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}y.r(R),y.d(R,{$tracker:()=>Gn,BadRequest:()=>ct,Blacklist:()=>_t,CancelOrderWarning:()=>vt,CustomError:()=>ft,EventBus:()=>En,ExceptionName:()=>xr,FileReaderError:()=>mt,Forbidden:()=>dt,FullStoryProjectId:()=>Xi,HTTPError:()=>bt,InternalServerError:()=>lt,Limiting:()=>Ot,LiveReportPoint:()=>Tr,LiveSecretKey:()=>gr,MarkName:()=>Nr,NoLiveKeyMap:()=>Pr,NoLiveReportPoint:()=>mr,NoLiveSecretKey:()=>br,NotFound:()=>it,ReportComponent:()=>Ur,ReportPoint:()=>qr,TemporyError:()=>gt,Unauthoried:()=>st,UnprocessableEntity:()=>ut,UntrustedNetwork:()=>ht,UnverifiedPhoneNumber:()=>Tt,Webview:()=>St,addMediaFile:()=>dh,addMediaFileHandler:()=>od,addOnDealItemDetailCleaner:()=>ie,addOnDealRuleCleaner:()=>le,agentConversationEntitiesSelector:()=>Jn,agentConversationSchema:()=>S,allMessageIdsSelector:()=>hE,allProductsSearchStatusSelector:()=>Nv,allProductsSelector:()=>Fv,authorizedShopsCountSelector:()=>Qa,autoTranslation:()=>sS,batchRemoveDraft:()=>QS,batchRemoveDraftHandler:()=>Jl,batchUpdateRecord:()=>To,blockUserRequested:()=>ec,bundleDealItemDetailCleaner:()=>de,bundleDealRuleCleaner:()=>pe,cancelReasonsSelector:()=>gv,captchaSignatureSelector:()=>Ta,captchaVisibleSelector:()=>va,changeConversationStatusRequested:()=>_l,changeConversationStatusRequestedSaga:()=>gp,chatbotImageSelector:()=>QE,chatbotOrderCleaner:()=>qe,checkUserPermissionRequested:()=>Ks,checkUserPermissionSucceeded:()=>zs,clearApiCache:()=>Xt,clearMediaFile:()=>fh,clearMediaFileHandler:()=>cd,clearReportRequested:()=>Qv,closeMediaPreviewModalRequested:()=>gh,closeModal:()=>jo,collectAsyncTask:()=>Xr,collectComponentTask:()=>zr,collectLoadTask:()=>Kr,configTrackerUser:()=>Un,contactsEntitiesSelector:()=>so,contactsSchema:()=>O,conversationBeenDeletedSelector:()=>Gu,conversationDirectionSelector:()=>uu,conversationEntitiesSelector:()=>Xn,conversationHttpStatusSelector:()=>iu,conversationIdsSelector:()=>tu,conversationLastMessageSelector:()=>OE,conversationOperateRequested:()=>Sl,conversationReducer:()=>wf,conversationSchema:()=>s,conversationsLengthLevelSelector:()=>io,conversationsSelector:()=>lu,converstionSyncUpdatesSaga:()=>qp,copySucceedFeedback:()=>b_,createUpdateConversationFilterHandler:()=>Hl,curConvsMessageSelector:()=>jE,curMessagesRelatedSelector:()=>_E,curTabFocusedSelector:()=>ka,currentAllMessageShortcutsSelector:()=>rS,currentBuyerIdSelector:()=>mu,currentBuyerOffersSelector:()=>LS,currentBuyerOrdersSelector:()=>Av,currentBuyerSelector:()=>Uu,currentBuyerShopIdSelector:()=>xu,currentBuyerShopSelector:()=>kf,currentConversationAutoTranslationSelectors:()=>Au,currentConversationBuyerIdSelectors:()=>Ru,currentConversationCanReadSelector:()=>su,currentConversationIdSelector:()=>cu,currentConversationMaxOptionHideTimeSelectors:()=>Cu,currentConversationSelector:()=>Tu,currentConversationShopIdSelectors:()=>yu,currentConversationShopRegionSelectors:()=>bu,currentConversationShopSelectors:()=>gu,currentConversationStatusSelectors:()=>Du,currentConversationToNameSelector:()=>Fu,currentConversationTranslationAccessSelector:()=>Lu,currentDraftSelector:()=>$S,currentFaqHistorySeletor:()=>aE,currentFaqSessionInfoSelector:()=>qE,currentFetchResultSelector:()=>Gv,currentGroupIdSelector:()=>$E,currentGroupTypeSelector:()=>zE,currentOfferPaginationSelector:()=>MS,currentOffersFetchResultSelector:()=>kS,currentOrderFetchResultSelector:()=>Rv,currentPendingOffersCountSelector:()=>Qu,currentPreviewMediaIdSelector:()=>vh,currentShopIdSelector:()=>Nu,currentUserDistributionStatusSelector:()=>Ua,currentUserIdSelector:()=>ia,currentUserIsSellerSelector:()=>qa,currentUserRoleSelector:()=>Na,currentUserSelector:()=>ya,currentUserShopIdSelector:()=>Pa,currentUserShopSelector:()=>wa,defaultPagination:()=>E_,degradeConversationIdsSelector:()=>Eu,deleteConfigDurationSelector:()=>Ea,deleteConfigSelector:()=>Oa,deleteConversationRequested:()=>zu,deleteConversationSucceedHandler:()=>Fl,deleteConversationSucceeded:()=>Xu,deleteMediaFile:()=>ph,deleteMediaFileHandler:()=>ad,deleteRecord:()=>vo,distributionAccountStatusSelector:()=>dS,draftHashSelector:()=>XS,draftReducer:()=>zS,entitiesSelector:()=>Kn,entityReducer:()=>Ao,entryPointSelector:()=>yE,exceptionTag:()=>kr,failedMessageIdsSelector:()=>TE,fakeConversationSucceeded:()=>$u,faqHistoryHashSelector:()=>nE,faqHistoryMessagesSelector:()=>wE,faqHistoryhttpStatusSelector:()=>rE,faqIdSelector:()=>oE,faqSessionInfoSelector:()=>WE,feedStoryEntitiesSelector:()=>oo,feedStorySchema:()=>f,feedbackRequested:()=>bO,feedbackSelector:()=>nh,feedbackSucceeded:()=>yO,fetch:()=>hr,fetchConversationsRequested:()=>Zu,fetchConversationsRequestedSaga:()=>ap,fetchConversationsSucceeded:()=>el,fetchDegradeConversationsDetail:()=>El,fetchDegradeConversationsDetailSaga:()=>cp,fetchMessagePreview:()=>np,fetchSettings:()=>mS,fetchSettingsRequested:()=>_S,fetchSettingsStatusSelector:()=>Dh,fetchShopAuth:()=>i_,fetchShopAuthRequested:()=>jf,fetchShopDetailInfo:()=>Bf,fetchShopSettings:()=>Vh,fetchShopTranslationSettings:()=>Lh,fetchShopsByIds:()=>s_,fetchShopsRequested:()=>Lf,fetchUserOrderDetail:()=>ss,fetchUserOrderDetailRequested:()=>qc,fetchUserOrderDetailSucceeded:()=>Kc,fetchedShopIdsSelector:()=>Uf,filterSelector:()=>Ou,filteredConversationsSelector:()=>hu,flashSaleItemDetailCleaner:()=>fe,forceLogoutRequested:()=>Ps,formatOffer:()=>av,formatSinglePrice:()=>oe,generatePersist:()=>fn,getConversation:()=>Iu,getConversationDetailRequested:()=>Ju,getConversationFakingMessages:()=>AE,getConversationIds:()=>ln,getConversationLastMessage:()=>fd,getConversationPendingOffersCountSelector:()=>Wu,getConversationShopId:()=>Pu,getConversationShopRegion:()=>qu,getConversations:()=>wu,getConvsMessagesRelatedSelector:()=>EE,getDraft:()=>JS,getGuide:()=>_c,getGuideFailed:()=>pc,getGuideRequested:()=>lc,getGuideSucceeded:()=>dc,getMessageSelector:()=>pE,getMessagesSelector:()=>fE,getPendingOffersCountRequested:()=>Il,getRouterPath:()=>yn,getShopUnreadCountByIds:()=>c_,getTimestamp:()=>id,getToastInformation:()=>m_,getTranslation:()=>un,handle401ErrorRequested:()=>pr,handleConnect:()=>uO,handleLoginSucceededLogic:()=>ks,handleMessageSubscribe:()=>td,handleUnreadCountChangeAction:()=>ea,hasDeletePermissionSelector:()=>_a,hasFetchedUnreadSelector:()=>Ya,hasMoreLatestMessageSelector:()=>gE,hasMoreOlderMessageSelector:()=>mE,hasReplyPermissionSelector:()=>fa,hasVideoPermissionSelector:()=>pa,heartbeat:()=>Qt,history:()=>bn,inScrollToMessageSelector:()=>YE,initMDAPSdk:()=>Zr,inlocationSelector:()=>ou,isCBSellerSelector:()=>Aa,isError:()=>yt,isMainPageSelector:()=>xa,isNavigateToUnreadMessageSelector:()=>Vu,isScChatSelector:()=>Fa,isShared:()=>Vt,isSubAccountSelector:()=>Da,itemDetailCleaner:()=>ce,itemListDetailCleaner:()=>se,keywordSelector:()=>Su,legacyMessageShortcutsCountSelector:()=>lS,listsHashSelector:()=>ju,loadingSelector:()=>sa,localeSelector:()=>Ra,locationMessage:()=>Tl,login:()=>Ms,loginRequested:()=>Ds,loginSocket:()=>Yt,loginSucceeded:()=>As,loginSuccessSelector:()=>Ha,logout:()=>Qi,logoutHandler:()=>Yi,logoutRequested:()=>Cs,logoutSucceeded:()=>Is,markMessagesRequested:()=>al,markMessagesRequestedSaga:()=>Sp,markMessagesSucceeded:()=>cl,mdapConfig:()=>Vr,mediaListSelector:()=>uh,mediaMapSelector:()=>ih,mediaMessagesSelector:()=>NE,mediaPreviewModalReducer:()=>yh,mediaPreviewerReducer:()=>Eh,memoize:()=>Yn,messageEntitiesSelector:()=>$n,messageFillStatusMapSelector:()=>SE,messageHasNextSelector:()=>bE,messageHttpStatusSelector:()=>cE,messageOffersSelector:()=>LE,messageSchema:()=>c,messageShortcutGroupContentSelector:()=>XE,messageShortcutGroupEntitiesSelector:()=>no,messageShortcutGroupHttpStatusSelector:()=>JE,messageShortcutGroupSelector:()=>KE,messageShortcutsSchema:()=>_,messageShortcutsSelector:()=>ZE,messageShortcutsStatusSelector:()=>uS,messageSourceIdsSelector:()=>ME,messageSourceSelector:()=>kE,messageTimeStyleSelector:()=>iS,messagesLengthLevelSelector:()=>uo,messagesRelatedMapSelector:()=>sE,messagesSelector:()=>DE,missedReadNoticeCountSelector:()=>nu,modalReducer:()=>Go,modalSelector:()=>wo,modalShowSelector:()=>Po,muteConversationRequested:()=>Cl,myShopSelector:()=>xf,navigateToUnreadMessageIdSelector:()=>Bu,networkJudge:()=>mn,networkStatusSelector:()=>la,newMessageFlagSelector:()=>ga,newbieSelector:()=>ua,normalize:()=>T,noticesCountSelector:()=>ah,notificationTypes:()=>_d,offerCleaner:()=>Se,offerDetailCleaner:()=>Ee,offerHttpStatusSelector:()=>PS,offerSchema:()=>l,offerSelector:()=>US,offersSelector:()=>wS,offlineMessagesSelector:()=>iE,openedMenuSelector:()=>Ga,orderCleaner:()=>Qe,orderEntitiesSelector:()=>eo,orderHttpStatusSelector:()=>bv,orderLogisticsCleaner:()=>We,orderSchema:()=>i,orderSelector:()=>mv,personalMessageShortcutsSelector:()=>eS,pinConversationRequested:()=>il,previewMediasSelector:()=>UE,productCleaner:()=>Bn,productEntitiesSelector:()=>to,productSchema:()=>u,productSelector:()=>Cv,productsSelector:()=>Iv,rateCardEntitiesSelector:()=>ao,rateCardSelector:()=>GE,rateCardsSchema:()=>E,readMessage:()=>is,readRequestIdsSelector:()=>ru,reconnectFlagSelector:()=>oh,redirectConversationRequested:()=>OT,reduxReset:()=>jS,relatedOfferIdsSelector:()=>NS,removeAllDraft:()=>YS,removeAllDraftHandler:()=>Xl,removeSingleDraft:()=>BS,removeSingleDraftHandler:()=>zl,replyToMessageIdSelector:()=>HE,replyToMessageSelector:()=>BE,reportApiTime:()=>en,reportArraySelector:()=>Hv,reportMessageApiTimer:()=>ld,reportReducer:()=>tT,reportRequested:()=>Yv,reportUserRequested:()=>ki,requestIdleCallback:()=>yr,resendMessagePayloadSelector:()=>ma,resetConversationRequested:()=>pl,resetNavigateToUnreadMessageId:()=>Dl,resetSearchParams:()=>ul,resultsSelector:()=>ku,reverseMessagesSelector:()=>CE,saveDraft:()=>WS,saveDraftHandler:()=>$l,scrollToMessageIdSelector:()=>VE,searchConversationHttpStatusSelector:()=>Mu,searchConversationsRequested:()=>cf,searchConversationsSucceeded:()=>sf,searchMoreResults:()=>Ol,searchShopsRequested:()=>Vf,selectHydrated:()=>m,selectVideoInfoByKey:()=>lE,selectVideoInfoKeyByVid:()=>dE,sellerRecommendGroupsFetchStatusSelector:()=>jv,sellerRecommendGroupsSelector:()=>kv,sellerRecommendProductFetchStatusSelector:()=>Lv,sellerRecommendProductsSelector:()=>Uv,sendingMessageIdsSelector:()=>vE,setChatListWidth:()=>Vi,setChatSource:()=>ts,setConversationBeenDeleted:()=>Al,setCurrentConversationCanRead:()=>ll,setCurrentConversationCanReadHandler:()=>Ql,setCurrentConversationId:()=>Nl,setNavigateToUnreadMessage:()=>yl,setNavigateToUnreadMessageId:()=>Rl,setTextBoxHeight:()=>Hi,setToastInformation:()=>y_,setToastInformationSaga:()=>P_,settingsFetchStatusSelector:()=>cS,settingsNeedForceUpdateSelectors:()=>oS,settingsReducer:()=>CS,settingsSelector:()=>nS,settingsStatusSelector:()=>aS,shopAccessSelector:()=>Hu,shopReducer:()=>h_,shopSchema:()=>p,shopSelector:()=>Nf,shopService:()=>xt,shopStatisticsMapSelector:()=>Ca,shopStatisticsSelector:()=>Ia,shopTranslationSettingsSelector:()=>Rh,shoppingCartItemDetailCleaner:()=>_e,shopsEntitiesSelector:()=>co,shopsUnreadConversationCountSelector:()=>Fo,shouldInitFSSDKSelector:()=>da,shouldPersistItem:()=>_n,showAutoHangupModalSelector:()=>Wa,showCartReminder:()=>uv,showChatWindowSelector:()=>ja,showConversationDetailSelector:()=>La,showConversationRequested:()=>dl,showConversationSucceeded:()=>fl,showEntrySelector:()=>Ba,showFaqHistory:()=>lv,showFeedStory:()=>iv,showMediaPreviewModalRequested:()=>mh,showMediaPreviewModalSelector:()=>hh,showModal:()=>Lo,showOffer:()=>cv,showOrder:()=>ov,showProduct:()=>nv,showSearchedConversationRequested:()=>vl,showShop:()=>Wf,showUser:()=>ai,showUserRequested:()=>oi,showVoucher:()=>sv,showWarningMessageIdsSelector:()=>IE,socket:()=>Bt,socketReducer:()=>rh,socketSuccessSelector:()=>Va,sortConversations:()=>sd,sortedConversationsSelector:()=>vu,stickerEntitiesSelector:()=>Zn,stickerSchema:()=>d,subaccountHasUnrepliedPermissionSelector:()=>ha,systemRecommendProductFetchStatusSelector:()=>Mv,systemRecommendProductsSelector:()=>xv,takeEveryWithCancel:()=>bT,teamMessageShortcutsSelector:()=>tS,textBoxHeightSelector:()=>Ma,timerHandler:()=>Xv,toBottomHasConflictSelector:()=>RE,toMessageIdSelector:()=>FE,toastReducer:()=>F_,toastSelector:()=>v_,totalUnreadConversationsCountSelector:()=>Ho,translatePreferenceReducer:()=>Qh,unreadCountActions:()=>Vo,unreadCountReducer:()=>ca,unreadMessageIdsSelector:()=>xE,unreadMessagesSelector:()=>PE,updateCaptchaSignature:()=>Di,updateCaptchaSignatureSaga:()=>Ci,updateCaptchaSignatureSucceeded:()=>Ai,updateCaptchaVisible:()=>Ri,updateChatEntryStatus:()=>os,updateChatWindowStatus:()=>Xc,updateChatWindowStatusSaga:()=>ls,updateChatWindowStatusSucceeded:()=>Jc,updateConversationDetailStatus:()=>$c,updateConversationDetailStatusSaga:()=>ds,updateConversationDetailStatusSucceeded:()=>Zc,updateConversationFilter:()=>ol,updateConversationListsHash:()=>fr,updateConversationTimestamp:()=>nl,updateCurTabFocused:()=>fi,updateCurTabFocusedSaga:()=>Ei,updateCurTabFocusedSucceeded:()=>_i,updateDelPermission:()=>Xs,updateEntities:()=>Oo,updateFetchConversationsDirection:()=>rl,updateFetchConversationsDirectionHandler:()=>Bl,updateFetchConversationsStatusHandler:()=>Vl,updateFetchStatus:()=>Gh,updateFetchedShopIds:()=>Gf,updateGuide:()=>Ac,updateGuideRequested:()=>yc,updateGuideSucceeded:()=>Rc,updateHasFetchedUnread:()=>as,updateIsMainPage:()=>pi,updateLocationMode:()=>ml,updateLoginSuccessStatus:()=>rs,updateNetworkStatus:()=>Wc,updateNoticesCount:()=>QO,updateOpenedMenu:()=>es,updateOrReplaceAction:()=>_v,updatePreviousConversationIdHandler:()=>Yl,updateReadRequestData:()=>sl,updateReconnectFlag:()=>EO,updateRecord:()=>ho,updateSearchParams:()=>uf,updateSettingPreferenceStatus:()=>Fh,updateShopFilter:()=>Ff,updateShopTranslationSettings:()=>jh,updateShopTranslationSettingsRecord:()=>Hh,updateShowAutoHangupModal:()=>zc,updateSocketSuccessStatus:()=>ns,updateStatusSelector:()=>Ah,updateTimeNowSelector:()=>au,updateTotalUnreadConversationsCount:()=>Jo,updateUnreadCount:()=>Xo,updateUser:()=>cs,updateUserRequested:()=>Qc,updateVoucherStatus:()=>De,userEntitiesSelector:()=>zn,userReducer:()=>eu,userSchema:()=>a,userSelector:()=>ba,videoMapSelector:()=>uE,visitShopSellerCenterRequested:()=>Hf,voucherCleaner:()=>Re,voucherEntitiesSelector:()=>ro,voucherHttpStatusSelector:()=>Ov,voucherSelector:()=>vv,vouchersSchema:()=>h,vouchersSelector:()=>hv,waitingTimeFilterSelector:()=>Sa,watchBlock:()=>oc,watchCaptcha:()=>Ii,watchChannel:()=>KO,watchCheck:()=>$s,watchConversationSagas:()=>If,watchFeedback:()=>DO,watchGuides:()=>Ec,watchLogin:()=>Ls,watchReportSagas:()=>eT,watchReportUser:()=>Li,watchSearch:()=>df,watchSettingsSagas:()=>AS,watchShopSagas:()=>S_,watchShow:()=>ci,watchSocketSagas:()=>th,watchTab:()=>Si,watchToastSagas:()=>G_,watchTranslationSagas:()=>Wh,watchTranslationSettings:()=>Yh,watchUncontrolledSagas:()=>mT,watchUnreadSagas:()=>aa,watchUpdate:()=>ps,watchUpdateGuides:()=>Cc,watchUserSagas:()=>zi});var t=y(383);function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){e(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var o=function(e,r,o){return new t.schema.Entity(e,n({},r),n({},o))},a=o("users"),c=o("messages"),s=o("conversations"),i=o("orders"),u=o("products"),l=o("offers"),d=o("stickers"),p=o("shops"),f=o("feedStories"),_=o("messageShortcuts"),E=o("rateCards"),S=o("agentConversations"),O=o("contacts",{},{idAttribute:"account_id"}),h=o("vouchers"),v={users:a,messages:c,conversations:s,orders:i,offers:l,products:u,stickers:d,shops:p,feedStories:f,messageShortcuts:_,rateCards:E,agentConversations:S,contacts:O,vouchers:h};const T=function(e,r){var n=v[e]||o(e);return r instanceof Array?(0,t.normalize)(r,[n]):(0,t.normalize)(r,n)};var m=function(e,r,n){try{var o=v[e];return r instanceof Array?(0,t.denormalize)(r,[o],n.entityReducer):null==r?void 0:(0,t.denormalize)(r,o,n.entityReducer)}catch(e){return}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=y(855);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?C(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P,w=["id","name","region","shop_id","sold","stock","status","original_price","actual_price","image","image_hash","promotion_label","raw_discount"],N={region:"country",status:"status",original_price:"original_prices",actual_price:"actual_prices",promotion_label:"promotion_label"},U={id:"item_id",region:"region",actual_price:"price"},x=I(I({},U),{},{original_price:"price_before_discount",image_hash:"thumb_url"}),k=I(I({},U),{},{original_price:"price_before_discount",shop_id:"shop_id"}),M=I(I({},U),{},{shop_id:"shop_id"}),L=I(I({},U),{},{shop_id:"shop_id",original_price:"hidden_price_display"}),j={id:"item_id",name:"name",actual_price:"price"},G=["asking_price","buyer_id","conversation_id","create_at","discount","id","model_id","model_name","offer_price","product","product_id","product_deleted","products_count","region","shop_id","status","tax_applicable","tax_value","total_price"],F=["discount","total_price","region","disclaimer"],H=["product","product_deleted"],V={asking_price:"asking_price",create_at:"create_at",model_name:"model_name",offer_price:"offer_price",tax_value:"tax_value"},B=["claimed","code","country","type","id","is_used","name","expired","usage_progress","stock_out","rule_text","displayed_time","discount_text","show_usage_progress_bar","show_usage_progress_text","status","start_time","end_time","current_usage","total_usage"],Y={rule_text:"rule_text",displayed_time:"displayed_time",expired:"expired",stock_out:"stock_out",discount_text:"discount_text",show_usage_progress_bar:"show_usage_progress_bar",show_usage_progress_text:"show_usage_progress_text"},Q=y(439).t;function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?W(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K,z=A.ProductPromotionLabel.SHOW_DISCOUNT,X=A.ProductPromotionLabel.FLASH_SALES,J=A.ProductPromotionLabel.CAMPAIGN,$=A.ProductPromotionLabel.BUNDLE_DEAL,Z=A.ProductPromotionLabel.ADD_ON_DEAL,ee=A.ProductPromotionLabel.GIFT_WITH_PURCHASE,te=[z,X,J,$,Z,ee],re=(e(P={},A.ProductStatusUsingString.DELETED,A.ProductStatusUsingNumber.DELETED),e(P,A.ProductStatusUsingString.NORMAL,A.ProductStatusUsingNumber.NORMAL),e(P,A.ProductStatusUsingString.BANNED,A.ProductStatusUsingNumber.BANNED),e(P,A.ProductStatusUsingString.SOLD_OUT,A.ProductStatusUsingNumber.SOLD_OUT),e(P,A.ProductStatusUsingString.DELISTED,A.ProductStatusUsingNumber.DELISTED),P),ne="???",oe=function(e,t){if(!e)return e;var r=(0,A.formatPrice)(e,t);return r.includes("NaN")&&(r=r.replace("NaN",ne)),r},ae=function(e){var t=e.original_price,r=e.actual_price;return(t===r||r.includes(ne))&&(e.original_price=""),e},ce=function(e){var t={};return w.forEach((function(r){var n=N[r];switch(n){case"country":t[r]=e[n];break;case"status":t[r]=re[e[n]];break;case"original_prices":case"actual_prices":t[r]=function(e,t){var r=D(e,2),n=r[0],o=r[1];if(n===o)return oe(n,t);var a=oe(n,t),c=oe(o,t);return a.includes(ne)?a:c.includes(ne)?c:"".concat(a," - ").concat(c)}(e[n],e.country);break;case"promotion_label":t[r]=function(e){var t=[];return te.forEach((function(r){if(e[r]){var n="common.label.".concat(r);r===z?t.push({key:r,value:Q(n,{discount:(0,A.formatDiscount)(e[r])})}):t.push({key:r,value:Q(n)})}})),t}(e[n]);break;default:t[r]=e[r]}})),ae(t)},se=function(e,t){var r={};return w.forEach((function(n){var o=x[n];switch(o){case"item_id":case"thumb_url":r[n]=e[o];break;case"region":r[n]=t;break;case"price_before_discount":case"price":r[n]=oe(e[o],t);break;default:r[n]=e[n]}})),ae(r)},ie=function(e,t,r){var n={};return w.forEach((function(o){var a=k[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price_before_discount":case"price":n[o]=oe(e[a],t);break;default:n[o]=e[o]}})),ae(n)},ue=1e5,le=function(e,t){var r=e.amount_spent;return e.amount_spent=oe("".concat(r/ue),t),e},de=function(e,t,r){var n={};return w.forEach((function(o){var a=M[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price":n[o]=oe(e[a],t);break;default:n[o]=e[o]}})),ae(n)},pe=function(e,t){var r=e.rule_type,n=e.discount_percentage,o=e.discount_value,a=e.fix_price;if(1===r)e.fix_price=oe("".concat(a/ue),t);else if(2===r){var c=n/ue;"tw"===(t||"SG").toLowerCase()&&(c=10-c/10,Number.isInteger(c)||(c=c.toFixed(1))),e.discount_percentage=c}else e.discount_value=oe("".concat(o/ue),t);return e},fe=function(e,t,r){var n={};return w.forEach((function(o){var a=L[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"hidden_price_display":n[o]=(0,A.transPrice)(e[a],t);break;case"price":n[o]=oe("".concat(e[a]/ue),t);break;default:n[o]=e[o]}})),ae(n)},_e=function(e){var t={};return w.forEach((function(r){var n,o=j[r];switch(o){case"item_id":t[r]=e[o];break;case"name":t[r]=null!=e&&null!==(n=e.model)&&void 0!==n&&n.model_name?e.model.model_name:e[o];break;case"price":var a,c=null!=e&&null!==(a=e.model)&&void 0!==a&&a.price?e.model.price:e[o];t[r]=oe(c,e.region);break;default:t[r]=e[r]}})),ae(t)},Ee=function(e){var t=e.model_name;return t&&t.includes(",")&&(e.model_name=t.replace(/,/g," · ")),e},Se=function(e,t,r,n,o,a){var c={};return F.forEach((function(t){switch(t){case"discount":c[t]=function(e,t,r){var n=e.offer_price,o=e.asking_price,a=Number(n)/Number(o);if(function(e,t){return e&&(0,A.isVisitingCNSC)()||"TW"===(null==t?void 0:t.toUpperCase())}(t,r)){var c=(10*a).toFixed(a<.05?2:1),s=Number.isInteger(Number(c))?Number.parseInt(c):c;return"".concat(s,"折")}var i=(100*(1-a)).toFixed(1),u=Number.parseInt(i),l=[0,100].includes(u)?u:i;return"".concat(l).concat(Q("message.offer.discount"))}(e,n,r);break;case"total_price":c[t]=oe(function(e){var t=e.offer_price,r=e.tax_value,n=e.products_count;return((Number(t)-Number(r))*n).toString()}(e),r);break;case"region":c[t]=r;break;case"disclaimer":c[t]=function(e,t){var r=e.offer_disclaimer;return(r.find((function(e){return(0,A.getTranslationLocale)(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}))||r.find((function(e){return"en"===e.language}))||{}).disclaimer}(e,a)}})),H.forEach((function(t){switch(t){case"product":c[t]=q(q({},o),{},{original_price:"",actual_price:oe(e.asking_price,r)});break;case"product_deleted":c[t]=function(e){var t=e.id,r=e.status;return!(!t||r!==A.ProductStatusUsingNumber.DELETED)}(o)}})),G.forEach((function(n){if(!F.includes(n)&&!H.includes(n)){var o=V[n];switch(o){case"asking_price":case"offer_price":case"tax_value":c[n]=oe(e[o],r);break;case"create_at":c[n]=(0,A.getFormattedTime)(e[o]);break;case"model_name":c[n]=function(e,t){if(t&&t.includes(",")){var r="detail"===e?" · ":" / ";return t.replace(/,/g,r)}return t}(t,e[o]);break;default:c[n]=e[n]}}})),c},Oe="message.voucher.rule",he=function(e,t){return(0,A.formatPrice)(e,t,{withUnit:e>=1e4})},ve=function(e){var t=e.country,r=e.min_basket_size,n=e.reward.max_capped_amount,o=he(r,t),a=Q("".concat(Oe,".min_spend"),{spend:o});return"number"==typeof n&&(a=Q("".concat(Oe,".min_spend_max_cap"),{spend:o,cap:he(n,t)})),a},Te=function(e){var t=e.country,r=e.reward,n=r.value,o=r.type,a=r.discount_type===A.DiscountType.PERCENTAGE?"".concat(n,"%").concat(" "+Q("common.label.off")):(0,A.formatPrice)(n,t);return o===A.RewardType.COIN_CASHBACK&&(a="".concat(a," ").concat(Q("conversation_detail.workstation.voucher_panel.coins_cashback"))),a},me=function(e){return e.status===A.VoucherStatus.FINISHED},ge=function(e){return e.current_usage>=e.total_usage},be=function(e,t){var r=!t&&me(e),n=e.status,o=e.start_time,a=e.end_time;return Q("".concat("conversation_detail.workstation.voucher_panel",".").concat(r?A.VoucherStatus.ONGOING:n,"_time"),{time:n===A.VoucherStatus.SCHEDULED?(0,A.getFormattedTime)(o,"MM.DD.YYYY h:mm"):(0,A.getFormattedTime)(a,"MM.DD.YYYY")})},ye=function(e,t){var r=me(e),n=ge(e),o=e.is_used,a=e.usage_progress,c=e.country,s=o||r||n;return(a>=50||"id"===c.toLowerCase()&&(t||a>=25))&&!s},Re=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},n=me(e),o=ge(e);return B.forEach((function(a){switch(Y[a]){case"rule_text":r[a]=ve(e);break;case"displayed_time":r[a]=be(e,t);break;case"expired":r[a]=n;break;case"stock_out":r[a]=o;break;case"discount_text":r[a]=Te(e);break;case"show_usage_progress_bar":r[a]=ye(e,!0);break;case"show_usage_progress_text":r[a]=ye(e,!1);break;default:r[a]=e[a]}})),r},De=function(e,t){var r=t.expired,n=t.stockOut,o=q({},e);return r?(o.status="finished",{status:"finished",expired:r,displayed_time:be(o,r),show_usage_progress_bar:ye(o,!0),show_usage_progress_text:ye(o,!1)}):n?(o.current_usage=o.total_usage,{current_usage:o.total_usage,stock_out:n,show_usage_progress_bar:ye(o,!0),show_usage_progress_text:ye(o,!1)}):{}},Ae=y(439).t;function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ce(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pe,we=A.LogisticsLog.ORDER_DETAIL_SHIPPING_CONFIRMED,Ne=A.LogisticsLog.ORDER_DETAIL_SHIPPED,Ue=A.LogisticsLog.ORDER_DETAIL_RECEIVED,xe=A.LogisticsLog.ORDER_DETAIL_CANCELED,ke=A.LogisticsLog.ORDER_DETAIL_NOTIFY_SHIP,Me=(e(K={},we,"detail_received"),e(K,Ne,"shipped"),e(K,Ue,"received_by_buyer"),e(K,xe,"cancelled"),e(K,ke,"notify_ship"),K),Le=["amount","buyer_id","buyer_is_rated","cancel_pending","cancel_reason","cancel_time","canceller","carrier","checkout_id","coin_offset","complete_time","created_at","credit_card_promotion","delivery_time","id","image","image_hash","over_rate_time","pay_by_wallet","pay_time","payment_method","payment_method_str","price_before_discount","products","products_count","rate_by_date","receivables","refund_amount","refund_serial_number","region","remark","seller_note","seller_rate_comment","seller_rate_star","serial_number","ship_by_date","shipping_fee","shop_id","show_cancel_order_btn","show_ship_warning","status","tax_amount","third_party_tns","title","tracking_number","voucher_price","wallet_discount"],je=["model_id","product_id","model_name","image","image_hash","rate_star","region","price","sku","count","title","rate_comment","is_pre_order","returned","id","shop_id"],Ge=function(e,t,r){var n={},o=e.status;return je.forEach((function(a){var c;switch(a){case"model_name":n[a]=null!==(c=e[a])&&void 0!==c&&c.includes(",")?e[a].replace(/,/g," · "):e[a];break;case"region":n[a]=t;break;case"price":n[a]=(0,A.formatPrice)(e[a],t);break;case"returned":n[a]=o===A.OrderItemStatus.RETURNED||o===A.OrderItemStatus.RETURN_RATED;break;case"rate_star":n[a]=e[a]?parseInt(e[a]):-1;break;case"id":n[a]=e.product_id;break;case"shop_id":n[a]=r;break;default:n[a]=e[a]}})),n},Fe=["coin_offset","voucher_price","wallet_discount","local_shopee_coin"],He=function(e){return Ae(e?"label_buyer_cancel_order_reason_".concat(e):"label_cancel_order_reason_buyer")},Ve=function(e){var t=e.cancel_user_id;return t===e.buyer_id?"buyer":t<=0?"system":"seller"},Be=function(e){var t=e.status,r=e.buyer_cancel_reason,n=e.cancel_reason,o=Ve(e);return t===A.OrderTabStatus.CANCELLED?"buyer"===o?He(r):Ae("seller"===o?"label_cancel_order".concat(n?"_reason_".concat(n):""):"label_cancel_order_reason_admin".concat(n?"_".concat(n):"")):He(r)},Ye=15*A.ONE_DAY,Qe=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=e.price_before_discount,c=e.shipping_fee,s=e.tax_amount,i=e.shop_id,u=e.rate_by_date,l=e.complete_time,d=e.status_ext,p=e.payment_method,f=e.ship_by_date,_=i===t,E=(0,A.getOrderPayment)({order:e,region:r,isOwnOrder:_,isNewPrice:n}),S=E.shopeeCoin,O=E.payment,h=Date.now()>(u?new Date(u).getTime():new Date(l).getTime()+Ye);return Le.forEach((function(n){switch(n){case"region":o[n]=r;break;case"created_at":case"pay_time":case"delivery_time":case"complete_time":case"cancel_time":o[n]=e[n]?(0,A.customizeTime)(e[n],{needFullFormat:!0}):"";break;case"rate_by_date":o[n]=u?(0,A.customizeTime)(u,{needFullFormat:!0}):"";break;case"over_rate_time":o[n]=h;break;case"ship_by_date":o[n]=e[n]?(0,A.customizeTime)(e[n],{needFullFormat:!0}):"--";break;case"show_ship_warning":o[n]=!!f&&A.ONE_DAY+Date.now()>new Date(f).getTime();break;case"payment_method_str":o[n]=(0,A.getPayMethod)(p);break;case"products":o[n]=e[n].map((function(e){return Ge(e,r,t)}));break;case"amount":o[n]=(0,A.formatPrice)(a-c-s,r);break;case"receivables":o[n]=O;break;case"coin_offset":o[n]=(0,A.formatPrice)(S,r,{withMinus:!0});break;case"refund_amount":case"price_before_discount":case"shipping_fee":case"tax_amount":case"credit_card_promotion":case"voucher_price":case"wallet_discount":o[n]=(0,A.formatPrice)(e[n]||0,r,{withMinus:Fe.includes(n)});break;case"seller_note":o[n]=(e[n]||"").trim();break;case"cancel_reason":o[n]=Be(e);break;case"canceller":o[n]=Ve(e);break;case"show_cancel_order_btn":o[n]=(0,A.getCancelOrderDisplayStatus)(e);break;case"cancel_pending":o[n]=d===A.OrderStatusExt.ORDER_EXT_CANCEL_PENDING;break;default:o[n]=e[n]}})),o},We=function(e){var t=[];return e.forEach((function(e){var r,n=e.flag,o=e.type,a=e.description,c=e.seller_desc,s=e.created_at,i=(0,A.getFormattedTime)(s);4&n?r=c||a:2==(3&n)?r=a:Me[o]&&(r=Ae("common.order.logistics_log.".concat(Me[o]))),r&&t.push({created_at:i,content:r})})),t};!function(e){e[e.unpaid=1]="unpaid",e[e.to_ship=2]="to_ship",e[e.shipping=3]="shipping",e[e.completed=4]="completed",e[e.cancelled=5]="cancelled"}(Pe||(Pe={}));var qe=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=Ie(Ie({},e),{},{status:Pe[e.order_status],products_count:e.item_count,created_at:1e3*e.create_time,serial_number:e.order_sn,estimated_escrow:e.seller_estimated_escrow/1e5,total_price:e.buyer_pay_amount/1e5}),c=a.shop_id,s=c===t,i=(0,A.getOrderPayment)({order:a,region:r,isOwnOrder:s,isNewPrice:n}),u=i.payment;return Le.forEach((function(e){switch(e){case"region":o[e]=r;break;case"created_at":o[e]=a[e]?(0,A.customizeTime)(a[e],{needFullFormat:!0}):"";break;case"products":o[e]=a.items;break;case"receivables":o[e]=u;break;default:o[e]=a[e]}})),o};function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t,r){return t&&ze(e.prototype,t),r&&ze(e,r),e}function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}function $e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?et(e):t}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ot(e,t,r){return ot=nt()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Je(o,r.prototype),o},ot.apply(null,arguments)}function at(e){var t="function"==typeof Map?new Map:void 0;return at=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ot(e,arguments,rt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Je(n,e)},at(e)}var ct=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.message=e,n}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),st=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return Xe(r,[{key:"handler",value:function(){(0,A.removeItem)("mini-session"),A.LS.removeItem("mini-session")}}]),r}(at(Error));const it=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error));var ut=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o.errors=n,o}return r}(at(Error)),lt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n.handler=n.handler.bind(et(n)),n}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),dt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),pt=y(439).t,ft=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n.handler=n.handler.bind(et(n)),n}return Xe(r,[{key:"handler",value:function(){var e="";switch(this.error.error_code){case"unauthorized_for_shop":e="forward.error.unauthorized_for_shop";break;case"target_subaccount_unauthorized_for_shop":e="forward.error.target_subaccount_unauthorized_for_shop";break;case"target_group_unauthorized_for_shop":e="forward.error.target_group_unauthorized_for_shop";break;case"conversation_not_belong_to_you":e="forward.error.conversation_not_belong_to_you";break;case"conversation_not_dispatch":e="forward.error.conversation_not_dispatch";break;case"cannot_move_conversation_to_yourself":e="forward.error.cannot_move_conversation_to_yourself";break;case"target_subaccount_not_online":e="forward.error.target_subaccount_not_online";break;case"subaccount_conversation_not_found":e="forward.error.subaccount_conversation_not_found";break;case"conversation_closed":e="forward.error.conversation_closed";break;case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title"}return{show:!0,type:"fail",message:pt(e)}}}]),r}(at(Error)),_t=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n,o){var a;return Ke(this,r),(a=t.call(this,e)).name=a.constructor.name,a}return r}(at(Error)),Et=y(439).t,St=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n}return Xe(r,[{key:"handler",value:function(){var e;switch(this.error.error_code){case"send_rating_card_too_frequently":e="conversation_detail.message_list.rating_card_duplicate";break;case"rating_card_rated":case"rating_card_expired":e="rate_card.submit.fail";break;default:e="common.server_error.warning_tips"}return{message:Et(e),show:!0,type:"fail"}}}]),r}(at(Error)),Ot=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error)),ht=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e.message)).name=n.constructor.name,n.message=e.message,n}return r}(at(Error)),vt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error));const Tt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n,o){var a;return Ke(this,r),(a=t.call(this,e)).name=a.constructor.name,a.errors=n,a.data=o,a}return r}(at(Error)),mt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n.message=e,n}return r}(at(Error));var gt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).message=e,n}return r}(at(Error)),bt=function(e){switch(e){case 400:return ct;case 401:return st;case 403:return dt;case 404:return it;case 422:return ut;case 429:return Ot;case 451:return ht;case 452:return gt;case 491:return ft;case 492:return _t;case 493:return St;case 494:return vt;case 495:return Tt;case 500:return lt;default:return Error}},yt=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")};function Rt(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function Dt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){Rt(a,n,o,c,s,"next",e)}function s(e){Rt(a,n,o,c,s,"throw",e)}c(void 0)}))}}var At=y(757),Ct=y.n(At),It=y(672),Pt=y(598),wt=y.n(Pt);function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Nt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xt=new(function(){function t(){Ke(this,t),this.shopsMap={}}var r;return Xe(t,[{key:"updateShopMap",value:function(e){this.shopsMap=Ut(Ut({},this.shopsMap),e)}},{key:"getRegion",value:(r=Dt(Ct().mark((function t(r,n){var o,a,c,s;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}if(a=null===(o=this.shopsMap[n])||void 0===o?void 0:o.country){t.next=8;break}return t.next=5,hr({resource:"shop",id:n,params:{need_cache:1,cache_expires:600}});case 5:return c=t.sent,this.updateShopMap(e({},c.id,c)),t.abrupt("return",c.country);case 8:return t.abrupt("return",a);case 11:if(s=(0,A.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(s)&&!r){t.next=14;break}return t.abrupt("return","GLOBAL");case 14:return t.abrupt("return",s);case 15:case"end":return t.stop()}}),t,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}());"live"!==(0,A.getRuntimeServer)()&&(window.shopService=xt);var kt,Mt=y(674),Lt=y.n(Mt);function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ft=(0,A.checkIsScChat)();kt=Ft?"scminichat":"pmminichat";var Ht=new(Lt())({shouldShared:Ft,name:"".concat((0,A.getRuntimeRegion)(),"_").concat((0,A.getRuntimeServer)(),"_seller-push-ws")}),Vt=Ht.isShared,Bt=Ht.socket;Bt.dispatch||(Bt.dispatch=function(){return{}});var Yt=function(e){return Vt?Bt.emit("login",Gt(Gt({},e),{},{app_id:kt}),!0):new Promise((function(t){Bt.emit("login",Gt(Gt({},e),{},{app_id:kt}),(function(e){return t(JSON.parse(e))}))}))},Qt=function(e){var t=e.noticesCount,r=e.readMissedCount,n={app_id:kt,noticesCount:t,readMissedCount:r},o="".concat(kt,"|").concat(t,"|").concat(r);return Vt?Bt.heartbeat({emitEvent:"heartbeat",args:n,pollingTime:6e4,remedyTime:9e4,separator:"|"}):Bt.emit("heartbeat",o)};function Wt(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qt=y(444),Kt=y.n(qt);window.__CHANGE_FETCH__||(window.fetch=Kt(),window.__CHANGE_FETCH__=!0);var zt="CHAT_API",Xt=function(){window.caches&&window.caches.delete(zt)};function Jt(e,t){return $t.apply(this,arguments)}function $t(){return($t=Dt(Ct().mark((function e(t,r){var n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,a=o.get("need_cache"),c=o.get("force_update"),s=o.get("_ts"),i=r.method&&"get"===r.method.toLowerCase(),u="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),l="&force_update=".concat(String(c)),d=t.replace(u,"").replace(l,"").replace(s||"",""),!(i&&a&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(zt);case 13:return p=e.sent,e.next=16,p.match(d);case 16:if(f=e.sent,_=Date.now(),!f){e.next=25;break}if(!(_<Number(f.headers.get("cache-expires")))||c){e.next=23;break}return e.abrupt("return",f);case 23:return e.next=25,p.delete(d);case 25:return e.next=27,window.fetch(t,r);case 27:if(E=e.sent,S=E.clone(),200!==E.status){e.next=41;break}return O=Wt(E.headers.entries()),h={},v=Number(o.get("cache_expires"))||3600,T=_+1e3*v,e.next=36,E.blob();case 36:m=e.sent,O.forEach((function(e){h[e[0]]=e[1]})),h["cache-expires"]=T,g=new Response(m,{headers:new Headers(h)});try{p.put(d,g)}catch(e){window.caches.delete(zt)}case 41:return e.abrupt("return",S);case 44:return e.abrupt("return",window.fetch(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",window.fetch(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var Zt,er,tr,rr=y(378),nr=y.n(rr),or=y(464),ar=y.n(or);!function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(tr||(tr={}));var cr=(e(Zt={},tr.ONE,"70c74f4e-dcda-483e-826b-19dd2c42e799"),e(Zt,tr.TWO,"29ffec18-c614-4645-8f1c-686e22d2e26a"),e(Zt,tr.THREE,"04229e76-1ba3-4ac9-8a4e-68d46a3881a2"),e(Zt,tr.FOUR,"a3769a87-35cf-45e9-a5a7-2b4016c52e92"),Zt),sr=(e(er={},tr.ONE,"396c15ad-6d3e-4018-98be-cef58cb45cd0"),e(er,tr.TWO,"607c871d-b766-4c6f-ba89-b6c6ca32b156"),e(er,tr.THREE,"42990074-9a73-4459-b749-f3110d222a72"),e(er,tr.FOUR,"5702b6f3-62a3-44d2-abe8-fece100a8bf4"),er);function ir(e,t){var r=t.url,n=t.method,o=t.token,a=t.ctoken,c=t.extra,s=function(e){return"live"===(0,A.getRuntimeServer)()?sr[e]:cr[e]}(e);switch(e){case 1:return function(e,t,r){if(r){var n=r.plat,o=r.fromID,a=r.reqID,c=r.toID,s=r.timestamp,i=r.type,u=r.strinput,l="key=".concat(t,"&plat=").concat(n,"&ver=v1.2&fromID=").concat(o,"&reqID=").concat(a,"&toID=").concat(c,"&timestamp=").concat(s,"&type=").concat(i,"&strinput=").concat(u);return ar()(l).toString()}return nr()(e+t).toString()}(r,s,c);case 2:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,n);case 3:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,o);case 4:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,a);default:return""}}var ur,lr=function(e){var t=e.url,r=e.method,n=e.token,o=e.ctoken,a=void 0===o?"":o,c=e.version,s=e.fromID,i=e.payload,u=void 0===i?"{}":i,l=e.timestamp,d=JSON.parse(u),p=d.to_id,f=d.request_id,_=d.type,E=d.content,S=void 0===E?{}:E;return{url:t,method:r,token:n,ctoken:a,extra:{plat:c,fromID:s,reqID:f,toID:p,timestamp:l,type:_,strinput:"text"===_&&S.text?S.text:""}}},dr=y(252);!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH"}(ur||(ur={}));var pr=(0,dr.createActions)(e({},ur.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,fr=(0,dr.createActions)(e({},ur.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash;function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_r(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Sr=(0,A.checkIsScChat)(),Or=(0,A.getRuntimeVersion)();function hr(e){return vr.apply(this,arguments)}function vr(){return vr=Dt(Ct().mark((function t(r){var n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,C,I,P,w,N,U,x,k,M,L,j,G;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.shared,o=void 0!==n&&n,a=r.url,c=r.ssl,s=void 0===c||c,i=r.server,u=r.subServer,l=r.version,d=void 0===l?"v1.2":l,p=r.parent,f=r.parentId,_=r.resource,E=r.id,S=r.suffix,O=r.method,h=void 0===O?"GET":O,v=r.credentials,T=void 0===v?"include":v,m=r.extension,g=r.params,b=void 0===g?{}:g,y=r.payload,R=r.headers,C=void 0===R?{}:R,I=r.namespace,P=void 0===I?"mini":I,w=r.cleaner,N=void 0===w?function(e){return e}:w,U=r.fetcher,x="mini-session",k="mini-session",M=function(){return!!Vt&&It.store.getState().userReducer.isMainPage},L=function(){if("sc"===S)return E;if("auth"===_)return f;if(b.shop_id)return b.shop_id;if(y)try{return JSON.parse(y).shop_id}catch(e){}},j=function(){var t=Dt(Ct().mark((function t(r){var n,c,l,O,v,g,R,I,w,x,k,j,G,F,H,V,B,Y,Q,W,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=wt().get("CTOKEN"),l=(c=r||{}).token,O=c.version,v=c.user,g=(v=void 0===v?{}:v).id,R=v.type,I=0,w=0,x=0,F="",H={},t.next=11,xt.getRegion("subaccount"===R,L());case 11:if(V=t.sent,B=l&&"include"===T||!i?{Authorization:"Bearer ".concat(l),"x-shop-region":V}:{},!i&&(i=(0,A.getApiServer)()),a?j=a:(Y=[s?"https:/":"http:/",i,u,d,P,p,f,_,E,S].filter(Boolean).join("/"),Q=m?"".concat(Y,".").concat(m):Y,(W=r&&r.user&&r.user.uid)&&(b._uid=W),Or&&(b._v=Or),n&&(b.csrf_token=n),b._api_source=Sr?"sc":"pcmall",G=Object.entries(b).filter((function(e){var t=D(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=D(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),j=[Q,G].filter(Boolean).join("?"),q=[P,p,f,_,E,S].filter(Boolean).join("/"),K=m?"/".concat(q,".").concat(m):"/".concat(q),H._uid=W||"",H._v=Or||"",z=Object.entries(H).map((function(e){var t=D(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),F=[K,z].join("?")),t.prev=15,!(void 0!==E&&parseInt(E)<=0&&!j.includes("message_shortcuts/group")||void 0!==f&&parseInt(f)<=0)){t.next=19;break}throw new Error;case 19:return X={},J=Date.now(),U&&($=lr({url:F,method:h,version:Or,token:B.Authorization||"",fromID:g,payload:y,timestamp:J}),X={ts:J,"x-v":O||"","x-s":ir(O,$)}),Z={method:h,credentials:T,headers:Er(Er(Er({},B),X),C),body:y},ee=U||Jt,t.next=27,ee(j,Z);case 27:te=t.sent,I=te.status,t.t0=I,t.next=204===t.t0?32:404===t.t0?34:452===t.t0?36:500===t.t0?38:502===t.t0?40:42;break;case 32:return re=null,t.abrupt("break",46);case 34:return re={message:"Resource not found"},t.abrupt("break",46);case 36:return re={message:"Tempory Error"},t.abrupt("break",46);case 38:return re={message:"Internal server error"},t.abrupt("break",46);case 40:return re={message:"Bad Gateway"},t.abrupt("break",46);case 42:return 200===I&&(w=parseInt(te.headers.get("total")),x=parseInt(te.headers.get("per-page"))),t.next=45,te.json();case 45:re=t.sent;case 46:if([200,204].includes(I)&&"report_upload"===_&&y&&(ne=JSON.parse(y),oe=ne.vid,performance.mark("REPORT_UPLOAD_".concat(oe))),200!==I){t.next=52;break}return ae=re instanceof Array?e({total:w,perPage:x},_,re.map((function(e){return N(e,Sr)}))):N(re,Sr),o&&M()&&Bt.dispatch(A.CustomShareEvent.SHARE_API_DATA,Er({type:A.ShareDataType.UNREAD},"object"===Ze(ae)?ae:{res:ae})),U&&y&&(k=JSON.parse(y).request_id,(0,A.setItem)(k,J)),t.abrupt("return",ae);case 52:if(204!==I){t.next=54;break}return t.abrupt("return",null);case 54:if(!yt(I)){t.next=68;break}if([400,404].includes(I),![429,451,491,493].includes(I)){t.next=61;break}throw new(bt(I))(re);case 61:if(401!==I){t.next=65;break}It.store.dispatch(pr({resource:_})),t.next=68;break;case 65:throw(ce=new(bt(I))(re.message,re.errors||re.error_code||re.errcode,re.data))&&400===I&&(ce._type_="client"),ce;case 68:t.next=74;break;case 70:throw t.prev=70,t.t1=t.catch(15),I||(t.t1.offlineError=!0),t.t1;case 74:case"end":return t.stop()}}),t,null,[[15,70]])})));return function(e){return t.apply(this,arguments)}}(),!o||M()){t.next=8;break}return t.abrupt("return");case 8:G=null;try{G=A.LS.getItem(k,!0)}catch(e){G=null}if(G){t.next=14;break}return t.next=13,(0,A.getItem)(x);case 13:G=t.sent;case 14:return t.abrupt("return",j(G));case 15:case"end":return t.stop()}}),t)}))),vr.apply(this,arguments)}var Tr,mr,gr,br,yr=function(e,t){if(window.requestIdleCallback)return window.requestIdleCallback(e,t);var r=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})}),1)},Rr=y(782),Dr=y(830),Ar=y.n(Dr),Cr=y(292),Ir=y.n(Cr),Pr={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"};Tr={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",CHATWS_SOCKET_FAILED:"9034ae776ecbdc29ec67fb0edf78011f"},mr={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",CHATWS_SOCKET_FAILED:"f729b9774aef5b67bfd37afc711bdd3f"},gr="b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127",br="2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280";var wr,Nr={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE"},Ur={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},xr={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error"},kr={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error"};function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Mr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window.__CHANGE_FETCH__||(window.fetch=Kt(),window.__CHANGE_FETCH__=!0);var jr,Gr,Fr,Hr,Vr=function(e){wr=e},Br=!1,Yr=location.host.includes("shopee.cn"),Qr=(0,A.checkIsScChat)(),Wr=[],qr="live"===(0,A.getRuntimeServer)()?Tr:mr,Kr=function(){try{var e=performance.getEntriesByName(Nr.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(Nr.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(Nr.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(Nr.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(Nr.APP_RENDERING,"mark")[0].startTime;Wr.push({id:qr.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:qr.LOAD_STATIC,duration:Math.floor(t-e)},{id:qr.APP_PREPARE,duration:Math.floor(r-t)},{id:qr.LOGIN_API,duration:Math.floor(n-r)},{id:qr.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},zr=function(e,t){try{var r=null,n=performance.getEntriesByName(Nr.APP_RENDERING,"mark")[0].startTime;switch(e){case Ur.WELCOME_PAGE:r=performance.getEntriesByName(Nr.RENDER_WELCOME_PAGE,"mark")[0].startTime,Wr.push({id:qr.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case Ur.MESSAGE_LIST:r=performance.getEntriesByName(Nr.RENDER_MESSAGE_LIST,"mark")[0].startTime,Wr.push({id:qr.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case Ur.CONVERSATION_LIST:r=performance.getEntriesByName(Nr.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Wr.push({id:qr.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Wr.push(t),yr(Jr,{timeout:2e3})}catch(e){}},Xr=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Wr.push({id:e,duration:t,extra:r}),yr(Jr,{timeout:2e3})};function Jr(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Wr.length;){var t=Wr.shift(),r=t.id,n=t.duration,o=t.extra;r&&en(r,n,o),"live"!==(0,A.getRuntimeServer)()&&Pr[r]&&console.log("|-- 上报阶段: ",Pr[r],", 耗时为: ".concat(n))}Wr.length&&yr(Jr,{timeout:2e3})}var $r,Zr=function(){if(!Br){var e=(0,A.getRuntimeServer)(),t="live"===e,r=(0,A.getRuntimeRegion)(),n=(0,A.getRuntimeVersion)();jr=new Rr.MdapSdk({app_name:"minichat",secret_key:t?gr:br,environment:e,region:r,app_version:n,sample:t?.2:1}),Gr=new(Ar())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages"]}),Fr=new(Ir())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),Hr=new Rr.CustomPlugin({}),jr.use(Gr),jr.use(Fr),jr.use(Hr),Br=!0}};function en(e,t,r){Br||Zr();var n={point_id:e,data:{userType:wr,localOrCn:void 0!==$r?$r:$r=Yr&&"CN"!==(0,A.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:Qr?"seller":"pcmall"}};t&&(n=Lr(Lr({},n),{},{duration:t})),r&&(n.data=Lr(Lr({},n.data),r)),Hr.sendData(n)}var tn,rn=y(455),nn=y.n(rn),on=y(944),an=Ct().mark(un),cn=[];tn=[202,215];var sn=function(e,t){var r=tn.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,A.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return Kt()(o).then(function(){var e=Dt(Ct().mark((function e(t){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function un(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.locale,r="live"===(0,A.getRuntimeServer)()||"live-test"===(0,A.getRuntimeServer)(),n=new(nn())({name:"webchat"}),o={},s.next=6,n.create({locale:t,env:r?"live":"non-live",translation:{resources:cn,collections:tn}});case 6:if(a=s.sent,o=a.translation,!(0,A.checkEmptyObject)(o)){s.next=15;break}return c=[],tn.concat(cn).forEach((function(e){c.push(sn(e,t))})),s.next=13,(0,on.all)(c);case 13:s.sent.forEach((function(e){Object.assign(o,e)}));case 15:return s.abrupt("return",o);case 16:case"end":return s.stop()}}),an)}var ln=function(e){var t=e.previousConversationIds,r=e.fetchedConversationIds,n=e.direction,o=e.fakeConversationId,a=e.sortByWaitTime;switch(n){case"reset":if(o){var c=Array.isArray(r)?Wt(r):[];return c.unshift(o),c}return r;case"latest":return a?t.filter((function(e){return!r.includes(e)})).concat(r):r.concat(t.filter((function(e){return!r.includes(e)})));case"older":return t.concat(r.filter((function(e){return!t.includes(e)})));default:return r}};function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fn=function(e,t,r){if(e){var n={};return e.forEach((function(e){n[e]=!0})),(0,A.simpleEqualCheck)(r.slice(0,A.persistLimit),e)?pn(pn({},t),{},{changed:!1}):{changed:!0,conversationIds:e,conversationIdsMap:n,lastConversationId:e[e.length-1]}}return null},_n=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||"number"!=typeof e.storedTimestamp)return!1;var r=18e4,n=18e5;return Date.now()<e.storedTimestamp+(t?r:n)},En=new(y(187).EventEmitter),Sn=!1,On=null,hn=document.location,vn="".concat(hn.protocol,"//").concat(hn.host,"/favicon.ico");function Tn(){var e="t=".concat(Date.now()),t=[vn,e].join("?");On=setTimeout((function(){Kt()(t,{method:"GET"}).then((function(){clearTimeout(On),Sn=!1,window.dispatchEvent(new Event("judge-online"))})).catch((function(){Tn()}))}),5e3)}function mn(){if(Sn)return null;Sn=!0,Tn()}var gn,bn=(0,y(428).createBrowserHistory)({basename:"/chateasy"}),yn=function(){var e=bn.location,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t},Rn=y(846);function Dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function An(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Cn=function(t){var r={};for(var n in t)for(var o in t[n])r=An(An({},r),{},e({},o,{section:n,type:t[n][o]}));return r}({buyer_information_dropdown:{clickViewProfile:"more_view_profile",clickMoreReport:"more_report",clickBlockInProfile:"more_block"},buyer_information:{clickProfileMenus:"username_more_button",impressionProfileMenus:""},chat_more_dropdown:{clickClosedInProfile:"chat_more_close",markAsPinned:"pin_chat",markAsUnpinned:"unpin_chat",markAsRead:"mark_as_read",markAsUnread:"mark_as_unread",markAsDelete:"delete",markAsClose:"close",markAsRestart:"restart",markAsMute:"mute",markAsUnmute:"unmute"},conversation_window:{replyIcon:"reply_icon",deleteIcon:"delete_icon",repliedMessageBar:"replied_message_bar",repliedMessageBarCloseButton:"replied_message_bar_close_button",actionDragVideoInMediaPreivew:"",deletePreviewMediaInMediaPreivew:"",closePreviewMediaInMediaPreivew:"",impressionMediaInMediaPreivew:"preview_media",clickAddMediaInMediaPreivew:"preview_add_media",clickResendVideo:"resend_video",impressionVideoMessage:"video_play_thumbnail",impressionImageMessage:"qrcode_alert",clickCancelVideo:"cancel_video",clickAcceptOffer:"accept_offer",clickRejectOffer:"reject_offer",clickViewProductInMall:"view_in_mall",clickViewProductInSellerCenter:"view_in_seller_center",clickViewDetailInSellerCenter:"order_view_detail_button",clickHandleStoryMessage:"story",clickPlayInVideoMessage:"video_play_thumbnail",impressionResendVideo:"resend_video",clickPreviewQrcode:"open_qrcode_alert",clickOrderMessage:"order_message",clickProductMessage:"product_message",clickProductItemMessage:"item_collection_message",clickClaimVoucher:"voucher_claim",impressionPopupOrderCard:"popup_order_card",impressionOrderMessage:"order_message",impressionProductMessage:"product_message",impressionBundleDealCard:"bundle_deal_card",impressionVoucherCard:"claim_card",impressionProductListCard:"product_list_card",impressionCartCard:"cart_card",impressionRateCard:"rate_card",impressionProductCategoryCard:"product_category_card",impressionFlashSaleCard:"flash_sale_card",impressionOrderFromSourceInSpecialMessage:"order_message_source",impressionProductFromSourceInSpecialMessage:"product_message_source",clickVisitProductInSellerCenter:"product_message_source",clickVisitOrderInSellerCenter:"order_message_source",impressionOrClickUnreadBriefMessage:"latest_message",clickFlashSaleItemsDetail:"flash_sale_items",clickViewFlashSaleInMall:"flash_sale_button",clickViewBundleDealInMall:"bundle_deal_button",clickBundleDealDetail:"bundle_deal_items",clickCartButton:"cart_button",clickCartProduct:"cart_product",clickProductListMessage:"product_list_items",clickRateButton:"rate_button",clickRateProduct:"rate_product",impressionVoucherForReceiverInMinichat:"claim_card",impressionPopupProductCard:"popup_product_card"},conversation_window_pop_up:{clickCloseMediaPreviewModalFromX:"close_pop_up",clickCloseMediaPreviewModalFromBackground:"close_pop_up_background",clickPreviewLeftMedia:"left",clickPreviewRightMedia:"right",impressionAfterSwipeMedia:""},conversation_window_qrcode_pop_up:{impressionUnknowQrcode:"qrcode_alert",clickQrcodeToLearnMore:"learn_more",clickBackToChat:"back_to_chat",clickOpenQrcode:"open_image",impressionQrcode:""},conversation_window_video_pop_up:{actionFinishVideo:"video_end",clickSlideBar:"slide_bar",clickDownloadVideo:"download",clickVideoMinimize:"minimize",clickVideoExpand:"expand",impressionReloadVideoError:"reload_video",clickReloadVideo:"reload_video",clickStopVideo:"stop_video",clickRestartVideo:"restart_video"},voucher_information_tab:{impressionVoucherInWorkStation:"voucher_card"},order_information_tab:{clickViewOrderDetail:"order_view_detail",clickSendOrderLink:"order_sendlink"},chat_list_dropdown:{clickFilter:"filter",clickFilterAll:"filter_all",clickFilterUnreplied:"filter_unreplied",clickFilterUnread:"filter_unread",clickFilterPinned:"filter_pinned",clickFilterClosed:"filter_closed"},chat_list:{clickChatMore:"chat_more",clickChatUser:"chat_user"},shop_head_status_dropdown:{clickStatusOnlineButton:"status_online_button",clickStatusHangup:"status_hangup"},delete_confirmation_popup:{deleteConfirm:"delete_confirmation",cancelConfirm:"cancel_confirmation"},error_popup:{error:"error_popup"},product_card_pop_up:{clickSendPopupProductCard:"send",clickClosePopupProductCard:"close"},order_card_pop_up:{clickSendPopupOrderCard:"send",clickClosePopupOrderCard:"close"},order_card:{clickCopyOrderSN:"copy"}}),In=(["message_shortcuts","auto_reply","notification","translation_assistant","timestamp","performance_data","login_status","faq_assistant","seller_recom"].reduce((function(t,r){return An(An({},t),{},e({},"click_".concat(r),{section:"",type:r}))}),{}),An(An({},Cn),{},(e(gn={impressionMsgGamesFailBlock:{section:"conversation_window",type:"msg_games_fail_block"},impressionMsgGamesFailQuota:{section:"conversation_window",type:"msg_games_fail_quota"},impressionConversationCell:{section:"",type:"chat_conversation"},clickConversationCell:{section:"",type:"chat_conversation"},operateHints:{section:"message_toolbar",type:"shortcut_result_from_auto_popup"},clickEditShortcut:{section:"message_toolbar",type:"shortcut_button_draft"},operateSearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_available"},searchShortcutsFocus:{section:"message_toolbar",type:"shortcut_button"},impressionEmptySearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_empty"},selectShortcutFromShortcutButton:{section:"message_toolbar",type:"shortcut_result_from_shortcut_button"},clickMuteInProfile:{section:"personal_information_dropdown",type:"mute"},clickUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionMuteInProfile:{section:"personal_information_dropdown",type:"mute"},impressionUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionSafetyTip:{section:"conversation_window",type:"safety_tip"},clickSafetyTipLearnMore:{section:"safety_tip",type:"learn_more"},clickAddFromTemplate:{section:"message_shortcuts_detail_tab",type:"add_message_template"},actionAdjustMessageShortcuts:{section:"message_shortcuts_tab",type:""},actionAdjustMessageShortcutsDetail:{section:"message_shortcuts_detail_tab",type:""},impressionClickableCard:{section:"conversation_window",type:"clickable_message"},clickClickableCard:{section:"conversation_window",type:"clickable_message"},clickRateCardSubmit:{section:"evaluation_card",type:"evaluation_submit_button"},impressionRateCard:{section:"evaluation_card",type:""},impressionRateCardFeedback:{section:"evaluation_card_feedback",type:""},clickTranslationFeedback:{section:"",type:"translation_feedback"},impressionFeedbackPopup:{section:"feedback_popup_window",type:"translation_feedback"},clickFeedbackSubmit:{section:"feedback_popup_window",type:"feedback_submit_button"},impressionFeedbackMore:{section:"feedback_popup_window",type:"feedback_tell_us_more"},clickSendMessageButton:{section:"",type:"send_message_button"},clickRestartButton:{section:"",type:"restart_conversation"},clickStickerInToolbar:{section:"message_toolbar",type:"sticker_button"},clickImageInToolbar:{section:"message_toolbar",type:"image_button"},clickVideoInToolbar:{section:"message_toolbar",type:"video_button"},clickShortcutInToolbar:{section:"message_toolbar",type:"shortcut_button"},clickSendRatingCard:{section:"",type:"appraise_button"},clickVisitSellerCenterFromShopList:{section:"",type:"visit_seller_center"},clickBackChatFromShopList:{section:"",type:"view_message"},clickShopHeadStatus:{section:"",type:"shop_head_status"},viewPage:{section:"",type:""},impressionChatRoom:{section:"conversation_window",type:""},translationShowOriginal:{section:"",type:"show_original"},translationTryAgain:{section:"",type:"try_again"}},"clickShortcutInToolbar",{section:"message_toolbar",type:"shortcut_button"}),e(gn,"clickOrdersInToolbar",{section:"message_toolbar",type:"orders_button"}),e(gn,"clickProductsInToolbar",{section:"message_toolbar",type:"products_button"}),e(gn,"clickSearchNameResult",{section:"",type:"search_name_result"}),e(gn,"clickSearchName",{type:"search_name"}),e(gn,"impressionChatIcon",{type:"chat_icon"}),e(gn,"clickChatIcon",{type:"chat_icon"}),e(gn,"clickToWebchatButton",{type:"to_webchat_button"}),e(gn,"clickFoldButton",{type:"fold_button"}),e(gn,"clickUnFoldButton",{type:"unfold_button"}),e(gn,"clickCloseButton",{type:"close_button"}),e(gn,"impressionUnreadChange",{type:"chat_icon_status_change_to_with_unread_cnt"}),e(gn,"typeMessage",{type:"typing_message",section:"message_toolbar"}),gn)));function Pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var wn,Nn=null,Un=function(e){e&&(Nn=e)},xn=null,kn=function(){var t;if(t=(0,A.checkIsScChat)(),window.BITrack)xn=window.BITrack;else{var r={appId:t?1:0,fetch:Kt(),source:"pc",platform:"pc",ua:navigator?navigator.userAgent||navigator.vendor:"",getCookies:wt().get,sendEventByInterval:!0,enableAutoTrack:!1};wn=(0,Rn.createTrackingV3Sdk)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Pn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({locale:(0,A.getRuntimeRegion)(),env:(0,A.getRuntimeServer)()},r)),xn=wn.sync.bind(wn)}},Mn=function(e){var t=e.trackerName,r=e.data,n=e.operation,o=void 0===n?A.TrackerOperation.CLICK:n,a=e.page,c=e.shopId;xn||kn();var s=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,a=In[e.trackerName],c=a.section,s=void 0===c?"":c,i=a.type,u=void 0===i?"":i,l=Nn||{},d=l.shop_id,p=void 0===d?"":d,f=l.role,_=void 0===f?"":f,E=l.id,S=void 0===E?"":E,O=Object.assign({},{shopid:p||o,account_type:_||"shopee_user",account_id:S},t);return{operation:r,page_section:s,target_type:u,page_type:n||"minichat_page",data:r===A.TrackerOperation.IMPRESSION?{viewed_objects:[O]}:O}}({trackerName:t,data:r,operation:o,page:a,shopId:c});xn({data:{type:"v3",timestamp:Date.now(),info:s}})},Ln=[],jn=function e(t){for(;(t.timeRemaining()>5||t.didTimeout)&&Ln.length;){var r=Ln.shift();Mn(r)}Ln.length&&yr(e,{timeout:200})},Gn=function(e){Ln.push(e),yr(jn,{timeout:200})};function Fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Fn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SG",t=arguments.length>1?arguments[1]:void 0,r=void 0!==t&&!t;return"TW"!==e||r?A.Currencies[e]:"NT$"},Bn=function(e,t){return Hn(Hn({},e),function(e,t){var r=e.original_prices,n=e.actual_prices,o=D(r.map((function(r){return(0,A.formatPrice)(r,e.country,{},t)})),2),a=o[0],c=o[1],s=D(n.map((function(r){return(0,A.formatPrice)(r,e.country,{},t)})),2),i=s[0],u=s[1],l=a===c?a:"".concat(a," - ").concat(c),d=i===u?i:"".concat(i," - ").concat(u),p=a.includes("NaN")||i.includes("NaN");return{original_price_string:p||l===d?"":l,actual_price_string:p?"".concat(Vn(e.country,t),"???"):d,storedTimestamp:Date.now()}}(e,t))};function Yn(e){return function(){var t=Array.prototype.slice.call(arguments);return e.memoize=e.memoize||{},t in e.memoize?e.memoize[t]:e.memoize[t]=e.apply(this,t)}}var Qn,Wn=y(975),qn=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},Kn=function(e){return e.entityReducer},zn=(0,Wn.createSelector)(Kn,(function(e){return e.users})),Xn=(0,Wn.createSelector)(Kn,(function(e){return e.conversations})),Jn=(0,Wn.createSelector)(Kn,(function(e){return e.agentConversations})),$n=(0,Wn.createSelector)(Kn,(function(e){return function(e){return(0,A.checkEmptyObject)(e)?{}:e}(e.messages)})),Zn=(0,Wn.createSelector)(Kn,(function(e){return e.stickers})),eo=(0,Wn.createSelector)(Kn,(function(e){return e.orders})),to=(0,Wn.createSelector)(Kn,(function(e){return e.products})),ro=(0,Wn.createSelector)(Kn,(function(e){return e.vouchers})),no=(0,Wn.createSelector)(Kn,(function(e){return e.messageShortcutsGroups})),oo=(0,Wn.createSelector)(Kn,(function(e){return e.feedStories})),ao=(0,Wn.createSelector)(Kn,(function(e){return e.rateCards})),co=(0,Wn.createSelector)(Kn,(function(e){return e.shops})),so=(0,Wn.createSelector)(Kn,(function(e){return e.contacts})),io=(0,Wn.createSelector)(Xn,Jn,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return qn(r)})),uo=(0,Wn.createSelector)($n,(function(e){return qn(Object.keys(e).length)}));function lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function po(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}(Qn||(Qn={}));const fo=e({},Qn.UPDATE_ENTITIES,(function(t,r){var n=r.payload.entities;return Object.entries(n).reduce((function(t,r){var n=D(r,2),o=n[0],a=n[1];return"persist"!==o?("shops"===o&&xt.updateShopMap(a),po(po({},t),{},e({},o,po(po({},t[o]),a)))):po(po({},t),{},e({},o,a))}),t)}));var _o,Eo,So=(0,dr.createActions)((e(_o={},Qn.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),e(_o,Qn.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),e(_o,Qn.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),e(_o,Qn.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),_o)),Oo=So.updateEntities,ho=So.updateRecord,vo=So.deleteRecord,To=So.batchUpdateRecord;function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function go(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?mo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const bo=(e(Eo={},Qn.UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=n.record;return go(go({},t),{},e({},o,go(go({},t[o]),{},e({},a,go(go({},t[o][a]),c)))))})),e(Eo,Qn.DELETE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=t[o];return delete c[a],go(go({},t),{},e({},o,c))})),e(Eo,Qn.BATCH_UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.records,c=n.checkProp,s=go({},t[o]);return Object.keys(a).forEach((function(e){(!c||c&&a[e][c]>s[e][c])&&(s[e]=go(go({},s[e]),a[e]))})),go(go({},t),{},e({},o,s))})),Eo);function yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ro(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?yo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Do,Ao=(0,dr.handleActions)(Ro(Ro({},fo),bo),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},persist:null,vouchers:{},messageShortcuts:{}});!function(e){e.SHOW_MODAL="SHOW_MODAL",e.CLOSE_MODAL="CLOSE_MODAL"}(Do||(Do={}));var Co,Io,Po=function(e){return e.modalReducer.show},wo=(0,Wn.createSelector)(Po,(function(e){return e.modalReducer.type}),(function(e,t){return{show:e,type:t}}));function No(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?No(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xo,ko,Mo=(0,dr.createActions)((e(Co={},Do.SHOW_MODAL,(function(e){var t=e.type,r=e.title,n=void 0===r?"":r,o=e.content,a=e.actions,c=void 0===a?{}:a,s=e.additions;return{type:t,title:n,content:o,actions:c,additions:void 0===s?{}:s}})),e(Co,Do.CLOSE_MODAL,(function(){return{}})),Co)),Lo=Mo.showModal,jo=Mo.closeModal,Go=(0,dr.handleActions)((e(Io={},Do.SHOW_MODAL,(function(e,t){var r=t.payload,n=r.type,o=r.title;return{show:!0,type:n,content:r.content,title:o,actions:r.actions,additions:r.additions}})),e(Io,Do.CLOSE_MODAL,(function(e){return Uo(Uo({},e),{},{show:!1})})),Io),{show:!1,type:"",title:"",content:"",actions:{},additions:{}}),Fo=function(e){return e.unreadCountReducer.shopsUnreadConversationCount},Ho=function(e){return e.unreadCountReducer.totalUnreadConversationsCount},Vo={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",RESTART_CONVERSATION:"restartConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"};function Bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Bo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_UNREAD_COUNT="UPDATE_UNREAD_COUNT",e.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT="UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_SINGLE_SHOP_UNREAD_COUNT="UPDATE_SINGLE_SHOP_UNREAD_COUNT",e.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT="UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_REGION_UNREAD_COUNT="UPDATE_REGION_UNREAD_COUNT",e.UPDATE_AGENT_UNREAD_CONVERSATION_COUNT="UPDATE_AGENT_UNREAD_CONVERSATION_COUNT"}(xo||(xo={}));var Qo=Ct().mark($o),Wo=Ct().mark(Zo),qo=Ct().mark(ea),Ko=Ct().mark(ta),zo=(0,dr.createActions)((e(ko={},xo.UPDATE_UNREAD_COUNT,(function(e){return{type:e.type,conversation:e.conversation,messageQueueUpdate:e.messageQueueUpdate,shopId:e.shopId,shopIds:e.shopIds,source:e.source,count:e.count}})),e(ko,xo.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e){return{count:e.count}})),e(ko,xo.UPDATE_SINGLE_SHOP_UNREAD_COUNT,(function(e){return{shopId:e.shopId,num:e.num,action:e.action}})),e(ko,xo.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT,(function(e){return{shopUnreadCounts:e.shopUnreadCounts}})),ko)),Xo=zo.updateUnreadCount,Jo=zo.updateTotalUnreadConversationsCount;function $o(e,t){return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,on.put)(ho({name:"conversations",id:e,record:{unread_count:t}}));case 2:case"end":return r.stop()}}),Qo)}function Zo(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.source,s.prev=1,r=t===A.UnreadSource.PRELOAD,n=t?{_s:t}:{},s.next=6,(0,on.call)(hr,{shared:!r,parent:"conversation",resource:"unread-count",params:n});case 6:return o=s.sent,a=o.total_unread_count,s.next=10,(0,on.put)(Jo({count:a}));case 10:return s.next=12,(0,on.select)(Fa);case 12:c=s.sent,r&&Gn({operation:A.TrackerOperation.IMPRESSION,trackerName:"impressionChatIcon",data:{ctx_url:window.location.href,has_unread_convo:!!a,unread_convo_cnt:a},page:c?"seller_center_chat":"minichat_page"}),s.next=18;break;case 16:s.prev=16,s.t0=s.catch(1);case 18:case"end":return s.stop()}}),Wo,null,[[1,16]])}function ea(e){var t,r,n,o,a,c,s,i,u,l,d,p;return Ct().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,r=t.type,n=t.conversation,o=void 0===n?{}:n,t.shopId,t.shopIds,a=t.messageQueueUpdate,c=t.source,s=t.count,i=o.id,u=o.unread_count,o.shop_id,f.next=4,(0,on.select)(Ho);case 4:l=f.sent,f.t0=r,f.next=f.t0===Vo.FORWARD_CONVERSATION||f.t0===Vo.CLOSE_CONVERSATION||f.t0===Vo.DELETE_CONVERSATION||f.t0===Vo.UPDATE_CONVERSATION?8:f.t0===Vo.CLEAR_CONVERSATION_COUNT||f.t0===Vo.MARK_AS_READ?14:f.t0===Vo.ACTIVE_CONVERSATION?20:f.t0===Vo.MARK_AS_UNREAD?23:f.t0===Vo.RECEIVE_UNREADABLE_MESSAGE?28:f.t0===Vo.RESTART_CONVERSATION?34:f.t0===Vo.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT?37:f.t0===Vo.MESSAGE_QUEUE_UPDATE?42:f.t0===Vo.MASS_READ?46:f.t0===Vo.MASS_UNREAD?49:f.t0===Vo.MASS_CLOSE?52:55;break;case 8:if(0===u){f.next=13;break}return f.next=11,(0,on.put)(Jo({count:l-1}));case 11:return f.next=13,(0,on.call)($o,i,0);case 13:case 19:case 22:case 27:case 33:case 36:case 41:case 45:case 48:case 51:case 54:case 55:return f.abrupt("break",56);case 14:if(!(u>0)){f.next=19;break}return f.next=17,(0,on.put)(Jo({count:l-1}));case 17:return f.next=19,(0,on.call)($o,i,0);case 20:return f.next=22,(0,on.put)(Jo({count:l+1}));case 23:return f.next=25,(0,on.put)(Jo({count:l+1}));case 25:return f.next=27,(0,on.call)($o,i,u+1);case 28:if(0!==u){f.next=31;break}return f.next=31,(0,on.put)(Jo({count:l+1}));case 31:return f.next=33,(0,on.call)($o,i,u+1);case 34:return f.next=36,(0,on.call)(Zo,{source:c});case 37:return f.next=39,(0,on.call)(Zo,{source:c});case 39:return f.next=41,(0,on.put)(as({hasFetchedUnread:!0}));case 42:return p=(d=a).totalIncrease,d.shopsIncrease,f.next=45,(0,on.put)(Jo({count:l+p}));case 46:return f.next=48,(0,on.put)(Jo({count:l-s}));case 49:return f.next=51,(0,on.put)(Jo({count:l+s}));case 52:return f.next=54,(0,on.put)(Jo({count:l-s}));case 56:case"end":return f.stop()}}),qo)}function ta(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Xo,ea);case 2:case"end":return e.stop()}}),Ko)}zo.updateSingleShopUnreadCount,zo.updateShopsUnreadConversationsCount;const ra=e({},xo.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e,t){var r=t.payload.count;return Yo(Yo({},e),{},{totalUnreadConversationsCount:r<0?0:r})}));function na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var oa,aa=[ta],ca=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?na(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},ra),{totalUnreadConversationsCount:0}),sa=function(e){return e.userReducer.loading},ia=function(e){return e.userReducer.currentUserId},ua=function(e){return e.userReducer.newbie},la=function(e){return e.userReducer.networkStatus},da=function(e){return e.userReducer.shouldInitFSSDK},pa=function(e){return e.userReducer.hasVideoPermission},fa=function(e){return e.userReducer.hasReplyPermission},_a=function(e){return e.userReducer.hasDeletePermission},Ea=function(e){return e.userReducer.deleteConfigDuration},Sa=function(e){return e.userReducer.waitingTimeFilter},Oa=function(e){var t=e.userReducer;return{hasDeletePermission:t.hasDeletePermission,deleteConfigVersion:t.deleteConfigVersion,deleteConfigDuration:t.deleteConfigDuration}},ha=function(e){return e.userReducer.subaccountHasUnrepliedPermission},va=function(e){return e.userReducer.captchaVisible},Ta=function(e){return e.userReducer.captchaSignature},ma=function(e){return e.userReducer.resendMessagePayload},ga=function(e){return e.userReducer.newMessageFlag},ba=function(e){return(0,Wn.createSelector)(Kn,(function(r){return(0,t.denormalize)(e,a,{users:r})}))},ya=(0,Wn.createSelector)(zn,ia,(function(e,r){return(0,t.denormalize)(r,a,{users:e})||{}})),Ra=(0,Wn.createSelector)(ya,(function(e){return e&&e.locale})),Da=(0,Wn.createSelector)(ya,(function(e){return!(0,A.checkEmptyObject)(e)&&e.type===A.AccountType.SUBACCOUNT})),Aa=(0,Wn.createSelector)(ya,(function(e){return!(0,A.checkEmptyObject)(e)&&e.is_cb})),Ca=function(e){return e.userReducer.shopStatisticsMap},Ia=function(e,t){return(0,Wn.createSelector)(Ca,(function(r){return r["".concat(e,"-").concat(t)]||{}}))},Pa=(0,Wn.createSelector)(ya,Da,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t?void 0:e.shop_id})),wa=(0,Wn.createSelector)(ya,Da,co,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return r?void 0:(0,t.denormalize)(e.shop_id,p,{shops:n})||{}})),Na=(0,Wn.createSelector)(ya,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.role||""})),Ua=(0,Wn.createSelector)(ya,(function(e){return e&&e.distribution_status||""})),xa=function(e){return e.userReducer.isMainPage},ka=function(e){return e.userReducer.curTabFocused},Ma=function(e){return e.userReducer.textBoxHeight},La=function(e){return e.userReducer.showConversationDetail},ja=function(e){return e.userReducer.showChatWindow},Ga=function(e){return e.userReducer.openedMenu},Fa=function(e){return e.userReducer.isScChat},Ha=function(e){return e.userReducer.loginSuccess},Va=function(e){return e.userReducer.socketSuccess},Ba=function(e){return e.userReducer.showEntry},Ya=function(e){return e.userReducer.hasFetchedUnread},Qa=(0,Wn.createSelector)(ya,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.authorizedShopsCount||0})),Wa=function(e){return e.userReducer.showAutoHangupModal},qa=(0,Wn.createSelector)(ya,Da,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return!!t||e.is_seller}));!function(e){e.BLOCK_USER_REQUESTED="BLOCK_USER_REQUESTED",e.CHECK_USER_PERMISSION_REQUESTED="CHECK_USER_PERMISSION_REQUESTED",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.CLOSE_HANGUP_TIPS_REQUESTED="CLOSE_HANGUP_TIPS_REQUESTED",e.SEND_FEEDBACK_REQUESTED="SEND_FEEDBACK_REQUESTED",e.GET_GUIDE_REQUESTED="GET_GUIDE_REQUESTED",e.GET_GUIDE_SUCCEEDED="GET_GUIDE_SUCCEEDED",e.GET_GUIDE_FAILED="GET_GUIDE_FAILED",e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.SHOW_USER_REQUESTED="SHOW_USER_REQUESTED",e.FETCH_USER_ORDER_DETAIL_REQUESTED="FETCH_USER_ORDER_DETAIL_REQUESTED",e.FETCH_USER_ORDER_DETAIL_SUCCEEDED="FETCH_USER_ORDER_DETAIL_SUCCEEDED",e.FETCH_USER_PERFORMANCE_REQUESTED="FETCH_USER_PERFORMANCE_REQUESTED",e.FETCH_USER_PERFORMANCE_SUCCEED="FETCH_USER_PERFORMANCE_SUCCEED",e.UPDATE_USER_REQUESTED="UPDATE_USER_REQUESTED",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED="UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED="UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED",e.UPDATE_OPENED_MENU="UPDATE_OPENED_MENU",e.SET_CHAT_SOURCE="SET_CHAT_SOURCE",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_SOCKET_SUCCESS_STATUS="UPDATE_SOCKET_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.UPDATE_GUIDE_REQUESTED="UPDATE_GUIDE_REQUESTED",e.UPDATE_GUIDE_SUCCEEDED="UPDATE_GUIDE_SUCCEEDED",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.REPORT_ASYNC_TASK="REPORT_ASYNC_TASK",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_CAPTCHA_VISIBLE="UPDATE_CAPTCHA_VISIBLE",e.UPDATE_CAPTCHA_SIGNATURE="UPDATE_CAPTCHA_SIGNATURE",e.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED="UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED",e.SET_TEXT_BOX_HEIGHT="SET_TEXT_BOX_HEIGHT",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_DEL_PERMISSION="UPDATE_DEL_PERMISSION",e.GET_FEEDBACK_CLASSIFICATION_REQUESTED="GET_FEEDBACK_CLASSIFICATION_REQUESTED",e.GET_CLASSIFICATION_SUCCEED="GET_CLASSIFICATION_SUCCEED",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.REPORT_USER_REQUESTED="REPORT_USER_REQUESTED",e.SET_CHAT_LIST_WIDTH="SET_CHAT_LIST_WIDTH",e.UPDATE_HAS_FETCHED_UNREAD="UPDATE_HAS_FETCHED_UNREAD"}(oa||(oa={}));var Ka,za,Xa=y(439).t,Ja=Ct().mark(nc),$a=Ct().mark(oc),Za=(0,dr.createActions)(e({},oa.BLOCK_USER_REQUESTED,(function(e){var t=e.buyerName,r=e.buyerId,n=e.block;return{buyerName:t,buyerId:r,block:void 0===n||n,shopId:e.shopId,conversationId:e.conversationId}}))),ec=Za.blockUserRequested,tc=function(e){return{type:"CONFIRM_MODAL",title:{key:"conversation_detail.workstation.block_fail_modal.title",vars:{username:e}},actions:{confirm:{label:{key:"common.confirm"}}}}},rc=function(e,t,r){return{toast:{show:!0,type:e?"fail":"warn",message:e?Xa("common.server_error.warning_tips"):Xa("conversation_detail.".concat(t?"blocked":"unblocked"),{username:r})}}};function nc(e){var t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.buyerName,n=t.buyerId,o=t.block,a=t.shopId,c=t.conversationId,i.prev=1,s=o?"PUT":"DELETE",i.next=5,(0,on.call)(hr,{method:s,parent:"user",resource:"blocks",id:n,params:{shop_id:a}});case 5:return i.next=7,(0,on.put)(y_(rc(!1,o,r)));case 7:return i.next=9,(0,on.put)(ho({name:"users",id:n,record:{is_blocked:o}}));case 9:return i.next=11,(0,on.put)(ho({name:"conversations",id:c,record:{is_blocked:o}}));case 11:case 18:i.next=22;break;case 13:if(i.prev=13,i.t0=i.catch(1),!(i.t0 instanceof ft&&o&&i.t0.handler().message)){i.next=20;break}return i.next=18,(0,on.put)(Lo(tc(r)));case 20:return i.next=22,(0,on.put)(y_(rc(!0)));case 22:case"end":return i.stop()}}),Ja,null,[[1,13]])}function oc(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(ec,nc);case 2:case"end":return e.stop()}}),$a)}function ac(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ac(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sc=Ct().mark(_c),ic=Ct().mark(Ec),uc=(0,dr.createActions)((e(Ka={},oa.GET_GUIDE_REQUESTED,(function(e){return{userId:e.userId,version:e.version}})),e(Ka,oa.GET_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),e(Ka,oa.GET_GUIDE_FAILED,(function(){return{}})),Ka)),lc=uc.getGuideRequested,dc=uc.getGuideSucceeded,pc=uc.getGuideFailed,fc="newbie-completed-info";function _c(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.userId,n=t.version,s.prev=1,s.next=4,(0,A.getItem)(fc);case 4:if(s.sent!=="".concat(r,"-").concat(n)){s.next=7;break}return s.abrupt("return",[]);case 7:return o=[1],s.next=10,(0,on.call)(hr,{resource:"newbie",suffix:"uncompleted",params:{chat_types:"[".concat(o.join(","),"]")}});case 10:return a=s.sent,c=a.newbie,s.next=14,(0,on.put)(dc({newbie:c}));case 14:if(!(c.findIndex((function(e){return(e.name||"").toLocaleLowerCase().includes("mini")}))<0)){s.next=18;break}return s.next=18,(0,A.setItem)(fc,"".concat(r,"-").concat(n));case 18:return s.abrupt("return",c);case 21:return s.prev=21,s.t0=s.catch(1),s.next=25,(0,on.put)(pc());case 25:return s.abrupt("return",[]);case 26:case"end":return s.stop()}}),sc,null,[[1,21]])}function Ec(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(lc,_c);case 2:case"end":return e.stop()}}),ic)}const Sc=(e(za={},oa.GET_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return cc(cc({},e),{},{newbie:r})})),e(za,oa.GET_GUIDE_FAILED,(function(e){return cc(cc({},e),{},{newbie:[]})})),za);var Oc;function hc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?hc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tc=Ct().mark(Ac),mc=Ct().mark(Cc);function gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bc=(0,dr.createActions)((e(Oc={},oa.UPDATE_GUIDE_REQUESTED,(function(e){return{newbieId:e.newbieId}})),e(Oc,oa.UPDATE_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),Oc)),yc=bc.updateGuideRequested,Rc=bc.updateGuideSucceeded;function Dc(e,t){var r,n=Wt(e),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return gc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,c=a.children.findIndex((function(e){return e.id===t}));if(-1!==c){a.children.splice(c,1);break}}}catch(e){o.e(e)}finally{o.f()}return n}function Ac(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.newbieId,o.next=3,(0,on.select)(ua);case 3:return r=o.sent,n=Dc(r,t),o.next=7,(0,on.put)(Rc({newbie:n}));case 7:return o.prev=7,o.next=10,(0,on.call)(hr,{method:"PUT",resource:"newbie",id:t});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),Tc,null,[[7,12]])}function Cc(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(yc,Ac);case 2:case"end":return e.stop()}}),mc)}const Ic=e({},oa.UPDATE_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return vc(vc({},e),{},{newbie:r})}));var Pc,wc,Nc=y(550),Uc=y.n(Nc),xc=y(947),kc=y.n(xc);function Mc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Mc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jc=Ct().mark(cs),Gc=Ct().mark(ss),Fc=Ct().mark(is),Hc=Ct().mark(ls),Vc=Ct().mark(ds),Bc=Ct().mark(ps),Yc=(0,dr.createActions)((e(Pc={},oa.UPDATE_USER_REQUESTED,(function(e){return{status:e.status}})),e(Pc,oa.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),e(Pc,oa.FETCH_USER_ORDER_DETAIL_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}})),e(Pc,oa.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e){return{userId:e.userId,shopId:e.shopId,data:e.data}})),e(Pc,oa.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),e(Pc,oa.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{shouldShowWindow:e.shouldShowWindow,from:e.from}})),e(Pc,oa.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(Pc,oa.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){var t=e.shouldShowConversationDetail,r=e.needMark;return{shouldShowConversationDetail:t,needMark:void 0!==r&&r}})),e(Pc,oa.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e){return{shouldShowConversationDetail:e.shouldShowConversationDetail}})),e(Pc,oa.UPDATE_OPENED_MENU,(function(e){return{openedMenu:e}})),e(Pc,oa.SET_CHAT_SOURCE,(function(e){return{isScChat:e.isScChat}})),e(Pc,oa.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),e(Pc,oa.UPDATE_SOCKET_SUCCESS_STATUS,(function(e){return{socketSuccess:e.socketSuccess}})),e(Pc,oa.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),e(Pc,oa.UPDATE_HAS_FETCHED_UNREAD,(function(e){return{hasFetchedUnread:e.hasFetchedUnread}})),Pc)),Qc=Yc.updateUserRequested,Wc=Yc.updateNetworkStatus,qc=Yc.fetchUserOrderDetailRequested,Kc=Yc.fetchUserOrderDetailSucceeded,zc=Yc.updateShowAutoHangupModal,Xc=Yc.updateChatWindowStatus,Jc=Yc.updateChatWindowStatusSucceeded,$c=Yc.updateConversationDetailStatus,Zc=Yc.updateConversationDetailStatusSucceeded,es=Yc.updateOpenedMenu,ts=Yc.setChatSource,rs=Yc.updateLoginSuccessStatus,ns=Yc.updateSocketSuccessStatus,os=Yc.updateChatEntryStatus,as=Yc.updateHasFetchedUnread;function cs(e){var t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.status,r.prev=1,r.next=4,(0,on.call)(hr,{method:"PUT",resource:"user",payload:JSON.stringify({distribution_status:t})});case 4:if(!(0,A.checkIsScChat)()||"working"!==t){r.next=9;break}return r.next=9,(0,on.put)(Yv({event_time:(Date.parse(new Date+"")/1e3).toString(),url:window.location.href}));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,(0,on.put)(y_({error:r.t0}));case 15:case"end":return r.stop()}}),jc,null,[[1,11]])}function ss(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,a.prev=1,a.next=4,(0,on.call)(hr,{parent:"users",parentId:r,resource:"get_user_shop_statistics_info",params:{shop_id:n}});case 4:return o=a.sent,a.next=7,(0,on.put)(Kc({userId:r,shopId:n,data:o}));case 7:a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),Gc,null,[[1,9]])}function is(){var e,t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,on.select)(Tu);case 2:if(!(e=a.sent)){a.next=8;break}if(t=e.status,r=e.id,n=e.unread_count,o=e.latest_message_id,!("closed"!==t&&n>0)){a.next=8;break}return a.next=8,(0,on.put)(al({conversationId:r,isRead:!0,latestMessageId:o}));case 8:case"end":return a.stop()}}),Fc)}var us=!0;function ls(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowWindow,n=t.from,o.next=3,(0,on.put)(Jc({shouldShowWindow:r}));case 3:if(!r){o.next=17;break}return o.next=6,Uc().call(kc().updateChatbotFrom({payload:n||A.ChatbotFromType.LandingPage}));case 6:return window.CsChat&&window.CsChat.minimizeCsChatWindow&&window.CsChat.minimizeCsChatWindow(),o.next=9,(0,on.call)(is);case 9:if(!us){o.next=15;break}return o.next=12,(0,on.spawn)(mS);case 12:return o.next=14,(0,on.call)(ap,{payload:{direction:"reset"}});case 14:us=!1;case 15:return o.next=17,Uc().call(kc().handleNewConversationMessageQueue());case 17:case"end":return o.stop()}}),Hc)}function ds(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowConversationDetail,n=t.needMark,o.next=3,(0,on.put)(Zc({shouldShowConversationDetail:r}));case 3:if(!n||!r){o.next=6;break}return o.next=6,(0,on.call)(is);case 6:case"end":return o.stop()}}),Vc)}function ps(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Qc,cs);case 2:return e.next=4,(0,on.takeEvery)(qc,ss);case 4:return e.next=6,(0,on.takeEvery)(Xc,ls);case 6:return e.next=8,(0,on.takeEvery)($c,ds);case 8:case"end":return e.stop()}}),Bc)}const fs=(e(wc={},oa.UPDATE_NETWORK_STATUS,(function(e,t){var r=t.payload.networkStatus;return Lc(Lc({},e),{},{networkStatus:r})})),e(wc,oa.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(t,r){var n=r.payload,o=n.userId,a=n.shopId,c=n.data,s="".concat(o,"-").concat(a),i=t.shopStatisticsMap;return Lc(Lc({},t),{},{shopStatisticsMap:Lc(Lc({},i),{},e({},s,c))})})),e(wc,oa.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e,t){var r=t.payload.showAutoHangupModal;return Lc(Lc({},e),{},{showAutoHangupModal:r})})),e(wc,oa.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowWindow;return Lc(Lc({},e),{},{showChatWindow:r})})),e(wc,oa.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowConversationDetail;return Lc(Lc({},e),{},{showConversationDetail:r})})),e(wc,oa.UPDATE_OPENED_MENU,(function(e,t){var r=t.payload.openedMenu;return Lc(Lc({},e),{},{openedMenu:r})})),e(wc,oa.SET_CHAT_SOURCE,(function(e,t){var r=t.payload.isScChat;return Lc(Lc({},e),{},{isScChat:r})})),e(wc,oa.UPDATE_LOGIN_SUCCESS_STATUS,(function(e,t){var r=t.payload.loginSuccess;return Lc(Lc({},e),{},{loginSuccess:r})})),e(wc,oa.UPDATE_SOCKET_SUCCESS_STATUS,(function(e,t){var r=t.payload.socketSuccess;return Lc(Lc({},e),{},{socketSuccess:r})})),e(wc,oa.UPDATE_CHAT_ENTRY_STATUS,(function(e,t){var r=t.payload.showEntry;return Lc(Lc({},e),{},{showEntry:r})})),e(wc,oa.UPDATE_HAS_FETCHED_UNREAD,(function(e,t){var r=t.payload.hasFetchedUnread;return Lc(Lc({},e),{},{hasFetchedUnread:r})})),wc);var _s,Es,Ss=y(459);function Os(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hs(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Os(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var vs,Ts=Ct().mark(ws),ms=Ct().mark(Ns),gs=Ct().mark(ks),bs=Ct().mark(Ms),ys=Ct().mark(Ls);vs=(0,A.checkIsScChat)();var Rs=(0,dr.createActions)((e(_s={},oa.LOGIN_REQUESTED,(function(){return{}})),e(_s,oa.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),e(_s,oa.LOGOUT_REQUESTED,(function(){return{}})),e(_s,oa.LOGOUT_SUCCEEDED,(function(){return{}})),e(_s,oa.FORCE_LOGOUT_REQUESTED,(function(){return{}})),_s)),Ds=Rs.loginRequested,As=Rs.loginSucceeded,Cs=Rs.logoutRequested,Is=Rs.logoutSucceeded,Ps=Rs.forceLogoutRequested;function ws(e){return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,on.call)(A.getItem,e);case 2:if(t.sent){t.next=6;break}return t.next=6,(0,on.call)(A.setItem,e,(0,Ss.v4)());case 6:case"end":return t.stop()}}),Ts)}function Ns(){var e,t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,A.getTranslationLocale)((0,A.getRuntimeLocale)()),r.next=3,(0,on.call)(un,{locale:e});case 3:return t=r.sent,r.next=6,(0,on.call)(A.changeLanguage,e,t);case 6:case"end":return r.stop()}}),ms)}var Us=Ct().mark((function e(t){var r,n;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,A.getTranslationLocale)(t),e.prev=1,e.next=4,(0,on.call)(un,{locale:n});case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,(0,on.call)(un,{locale:(0,A.getTranslationLocale)((0,A.getRuntimeLocale)())});case 11:r=e.sent;case 12:return e.next=14,(0,on.call)(A.changeLanguage,n,r);case 14:return e.next=16,(0,on.call)(A.updateTimeLocale,(0,A.getServiceLocale)(t));case 16:case"end":return e.stop()}}),e,null,[[1,7]])})),xs=Ct().mark((function e(t){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.call)(Ns);case 2:return e.next=4,(0,on.put)(os({showEntry:!0}));case 4:return e.next=6,(0,on.put)(rs({loginSuccess:!1}));case 6:Xr(qr.LOGIN_FAILED,0,{type:(r=t,r instanceof lt?"InternalServerError":r instanceof dt?"Forbidden":r instanceof st?"Unauthoried":"Other")});case 7:case"end":return e.stop()}var r}),e)}));function ks(e,t){var r,n,o,a,c,s,i,u,l;return Ct().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,r=t.godToken,n=e.user,o=n.id,a=n.type,c=n.locale,s=n.distribution_status,i=a===A.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||i&&"working"===s&&(window.__WEBCHAT_LOGIN__=!0),d.next=8,(0,on.call)(Us,c||"en");case 8:return performance.mark("APP_RENDERING"),Kr(),Vr(a),Un(n),d.next=14,(0,on.put)(Wc({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){It.store.dispatch(Wc({networkStatus:"online"}))})),window.addEventListener("offline",(function(){It.store.dispatch(Wc({networkStatus:"offline"}))})),d.next=18,(0,on.put)(rs({loginSuccess:!0}));case 18:return d.next=20,(0,on.put)(os({showEntry:!0}));case 20:return u=T("users",n),l=u.entities,d.next=23,(0,on.put)(Oo({entities:l}));case 23:return!r&&Bt.connect(),vs&&Bt.dispatch(A.CustomShareEvent.CALC_CONNECTIONS),d.next=27,(0,on.put)(As({currentUserId:o}));case 27:return d.next=29,(0,on.put)(Ks());case 29:return d.next=31,(0,on.spawn)(ws,"device_id");case 31:if(i){d.next=34;break}return d.next=34,(0,on.call)(Vh,Lh({shopId:n.shop_id}));case 34:d.next=40;break;case 36:return d.prev=36,d.t0=d.catch(0),d.next=40,(0,on.call)(xs,d.t0);case 40:return d.prev=40,d.finish(40);case 42:case"end":return d.stop()}}),gs,null,[[0,36,40,42]])}function Ms(){var e,t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,performance.mark("APP_PREPARED"),e={},t="",!window.__WEBCHAT_SESSION__){n.next=9;break}Xr(qr.LOGIN_IN_HTML,0),e=window.__WEBCHAT_SESSION__,n.next=16;break;case 9:return Xr(qr.LOGIN_IN_SERVICE,0),(r={method:"POST",subServer:"coreapi",resource:"login"}).params={source:vs?"sc":"pcmall"},((0,A.isVisitingCNSC)()||(0,A.isVisitingKRSC)())&&(r.parent="cbsc"),n.next=15,(0,on.call)(hr,r);case 15:e=n.sent;case 16:return performance.mark("LOGIN_API_RESPONSED"),n.next=19,(0,A.setItem)("mini-session",e);case 19:return A.LS.setItem("mini-session",JSON.stringify(e)),n.abrupt("return",{session:e,params:{godToken:t}});case 23:return n.prev=23,n.t0=n.catch(0),n.next=27,(0,on.call)(xs,n.t0);case 27:return n.prev=27,n.finish(27);case 29:case"end":return n.stop()}}),bs,null,[[0,23,27,29]])}function Ls(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)(Ds,Ms);case 2:return e.next=4,(0,on.takeLatest)(Cs,Qi);case 4:return e.next=6,(0,on.takeLatest)(Ps,Yi);case 6:case"end":return e.stop()}}),ys)}const js=(e(Es={},oa.LOGIN_SUCCEEDED,(function(e,t){var r=t.payload.currentUserId;return hs(hs({},e),{},{currentUserId:r})})),e(Es,oa.LOGOUT_SUCCEEDED,(function(e){return hs(hs({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),Es);var Gs,Fs,Hs,Vs,Bs=Ct().mark(Js),Ys=Ct().mark($s);function Qs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ws(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Qs(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Vs="mini-filter",Hs=(0,A.checkIsScChat)();var qs=(0,dr.createActions)((e(Gs={},oa.CHECK_USER_PERMISSION_REQUESTED,(function(){return{}})),e(Gs,oa.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{shouldInitFSSDK:e.shouldInitFSSDK,hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion,waitingTimeFilter:e.waitingTimeFilter,subaccountHasUnrepliedPermission:e.subaccountHasUnrepliedPermission}})),e(Gs,oa.UPDATE_DEL_PERMISSION,(function(e){return{hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),Gs)),Ks=qs.checkUserPermissionRequested,zs=qs.checkUserPermissionSucceeded,Xs=qs.updateDelPermission;function Js(){var e,t,r,n,o,a,c,s,i,u;return Ct().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return e={hasVideoPermission:!1,hasReplyPermission:!1,shouldInitFSSDK:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0,waitingTimeFilter:!1},l.next=3,(0,on.select)(ya);case 3:return t=l.sent,r=t.type,n=t.country,o=t.id,a=JSON.parse(A.LS.getItem(Vs))||{},l.prev=6,l.next=9,(0,on.call)(hr,{subServer:"coreapi",parent:"user",resource:"global_config"});case 9:c=l.sent,e.hasVideoPermission=c.video,e.hasReplyPermission=c.reply,e.shouldInitFSSDK=c.privacy&&Hs||"live"!==(0,A.getRuntimeServer)(),e.waitingTimeFilter=c.waiting_time_filter,!Hs&&(e.waitingTimeFilter=!1),"seller"===r?(s=c.delete_msg||{},e.deleteConfigVersion=s.config_version,i=(s.region_config||[]).find((function(e){return e.region===n})),i&&i.duration&&(e.hasDeletePermission=!0,e.deleteConfigDuration=i.duration)):e.subaccountHasUnrepliedPermission=c.support_subaccount_unreplied,a.filter&&a.userid===o||(u=e.waitingTimeFilter?"Unreplied":"All",A.LS.setItem(Vs,JSON.stringify({filter:u,userid:o}))),l.next=22;break;case 19:l.prev=19,l.t0=l.catch(6),a.filter&&a.userid===o||A.LS.setItem(Vs,JSON.stringify({filter:"All",userid:o}));case 22:return l.next=24,(0,on.put)(zs(Ws({},e)));case 24:case"end":return l.stop()}}),Bs,null,[[6,19]])}function $s(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Ks,Js);case 2:case"end":return e.stop()}}),Ys)}const Zs=(e(Fs={},oa.CHECK_USER_PERMISSION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.shouldInitFSSDK,o=r.hasVideoPermission,a=r.hasReplyPermission,c=r.hasDeletePermission,s=r.deleteConfigDuration,i=r.deleteConfigVersion,u=r.waitingTimeFilter,l=r.subaccountHasUnrepliedPermission;return Ws(Ws({},e),{},{shouldInitFSSDK:n,hasVideoPermission:o,hasReplyPermission:a,hasDeletePermission:c,deleteConfigDuration:s,deleteConfigVersion:i,waitingTimeFilter:u,subaccountHasUnrepliedPermission:l})})),e(Fs,oa.UPDATE_DEL_PERMISSION,(function(e,t){var r=t.payload,n=r.hasDeletePermission,o=r.deleteConfigDuration,a=r.deleteConfigVersion;return Ws(Ws({},e),{},{hasDeletePermission:n,deleteConfigDuration:o,deleteConfigVersion:a})})),Fs);var ei,ti,ri=Ct().mark(ai),ni=Ct().mark(ci),oi=(0,dr.createActions)(e({},oa.SHOW_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId,buyerShopId:e.buyerShopId}}))).showUserRequested;function ai(e){var t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.buyerShopId,i.prev=1,i.next=4,(0,on.call)(hr,{resource:"users",id:r,params:{shop_id:n,need_cache:1,cache_expires:1800}});case 4:a=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),a={id:r,shop_id:o};case 10:return c=T("users",a),s=c.entities,i.next=13,(0,on.put)(Oo({entities:s}));case 13:return i.next=15,(0,on.put)(qc({userId:r,shopId:n}));case 15:case"end":return i.stop()}}),ri,null,[[1,7]])}function ci(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(oi,ai);case 2:case"end":return e.stop()}}),ni)}function si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ii(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?si(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ui=Ct().mark(Ei),li=Ct().mark(Si),di=(0,dr.createActions)((e(ei={},oa.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),e(ei,oa.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),e(ei,oa.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{focused:e.focused}})),ei)),pi=di.updateIsMainPage,fi=di.updateCurTabFocused,_i=di.updateCurTabFocusedSucceeded;function Ei(e){var t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.payload.focused)){r.next=5;break}return Bt.dispatch(A.CustomShareEvent.TAB_FOCUSED),r.next=5,(0,on.put)(pi({isMainPage:!0}));case 5:return r.next=7,(0,on.put)(_i({focused:t}));case 7:case"end":return r.stop()}}),ui)}function Si(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(fi,Ei);case 2:case"end":return e.stop()}}),li)}const Oi=(e(ti={},oa.UPDATE_IS_MAIN_PAGE,(function(e,t){var r=t.payload.isMainPage;return ii(ii({},e),{},{isMainPage:r})})),e(ti,oa.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e,t){var r=t.payload.focused;return ii(ii({},e),{},{curTabFocused:r})})),ti);var hi,vi;function Ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ti(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gi=Ct().mark(Ci),bi=Ct().mark(Ii),yi=(0,dr.createActions)((e(hi={},oa.UPDATE_CAPTCHA_VISIBLE,(function(e){return{visible:e.visible,resendMessagePayload:e.resendMessagePayload}})),e(hi,oa.UPDATE_CAPTCHA_SIGNATURE,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),e(hi,oa.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),hi)),Ri=yi.updateCaptchaVisible,Di=yi.updateCaptchaSignature,Ai=yi.updateCaptchaSignatureSucceeded;function Ci(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=e.payload.signature)){a.next=12;break}return a.next=4,(0,on.select)(ma);case 4:if(!(r=a.sent)){a.next=12;break}return a.next=8,(0,on.select)(pE(r.messageId));case 8:return n=a.sent,o={message:n,conversationId:r.conversationId},a.next=12,Uc().put(kc().resendMessageRequested({payload:o}));case 12:return a.next=14,(0,on.put)(Ai({signature:t}));case 14:case"end":return a.stop()}}),gi)}function Ii(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Di,Ci);case 2:case"end":return e.stop()}}),bi)}const Pi=(e(vi={},oa.UPDATE_CAPTCHA_VISIBLE,(function(e,t){var r=t.payload,n=r.visible,o=r.resendMessagePayload;return mi(mi({},e),{},{captchaVisible:n,resendMessagePayload:o})})),e(vi,oa.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e,t){var r=t.payload.signature;return mi(mi({},e),{},{captchaSignature:r})})),vi);var wi,Ni,Ui=Ct().mark(Mi),xi=Ct().mark(Li),ki=(0,dr.createActions)(e({},oa.REPORT_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}}))).reportUserRequested;function Mi(e){var t,r,n,o,a,c,s,i,u,l;return Ct().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,d.prev=1,d.next=4,(0,on.call)(hr,{resource:"shop",id:n});case 4:o=d.sent,a=o.is_official_shop,c=void 0===a||a,s=o.country,i=void 0===s?"SG":s,u=(0,A.getMallUrl)(i),l="https://".concat(u,"/report/").concat(r),c&&(l="".concat(l,"?is_official_shop=true")),window.open(l),d.next=17;break;case 15:d.prev=15,d.t0=d.catch(1);case 17:case"end":return d.stop()}}),Ui,null,[[1,15]])}function Li(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(ki,Mi);case 2:case"end":return e.stop()}}),xi)}function ji(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ji(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fi=(0,dr.createActions)((e(wi={},oa.SET_TEXT_BOX_HEIGHT,(function(e){return e})),e(wi,oa.SET_CHAT_LIST_WIDTH,(function(e){return e})),wi)),Hi=Fi.setTextBoxHeight,Vi=Fi.setChatListWidth;const Bi=(e(Ni={},oa.SET_TEXT_BOX_HEIGHT,(function(e,t){var r=t.payload;return Gi(Gi({},e),{},{textBoxHeight:r})})),e(Ni,oa.SET_CHAT_LIST_WIDTH,(function(e,t){var r=t.payload;return Gi(Gi({},e),{},{chatlistWidth:r})})),Ni);var Yi=Ct().mark((function e(){var t=arguments;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!(t.length>0&&void 0!==t[0])||t[0])&&Bt.close(),e.next=4,(0,on.put)(Is());case 4:return e.next=6,(0,on.put)(jS());case 6:(0,A.removeItem)("mini-session"),(0,A.removeItem)("mini-sc_redirect");case 8:case"end":return e.stop()}}),e)})),Qi=Ct().mark((function e(){var t;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={server:(0,A.getSCApiServer)(),namespace:"",resource:"logout",suffixSlash:!0,params:{SPC_CDS:wt().get("SPC_CDS"),SPC_CDS_VER:2}},(0,A.isVisitingCNSC)()||(0,A.isVisitingKRSC)()?(t.version="cnsc",t.parent="selleraccount"):t.version="v1",e.next=5,(0,on.call)(hr,t);case 5:return document.location.replace("https://".concat((0,A.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){It.store.dispatch(Wc({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){It.store.dispatch(Wc({networkStatus:"offline"}))})),Xt(),e.next=11,(0,on.call)(Yi);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.handler?(0,on.call)(e.t0.handler):console.error("[Logout Failed] ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}));function Wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Wi(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ki,zi=[oc,Ec,Cc,ps,Ls,ci,$s,Ii,Si,Li],Xi="983743070955270817";Ki=A.MINI_MIN_TEXT_BOX_HEIGHT,Xi="983743070955270818";var Ji,$i,Zi={newbie:[],networkStatus:"online",hasVideoPermission:!1,currentUserId:null,currentUser:{},shouldInitFSSDK:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,captchaVisible:!1,captchaSignature:"",resendMessagePayload:void 0,curTabFocused:!0,isMainPage:!0,shopStatisticsMap:{},subaccountHasUnrepliedPermission:!1,textBoxHeight:Ki,showAutoHangupModal:!1,waitingTimeFilter:!1,isScChat:!0,openedMenus:"",loginSuccess:!0,socketSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1,hasFetchedUnread:!1},eu=(0,dr.handleActions)(qi(qi(qi(qi(qi(qi(qi(qi(qi({},{}),Zs),Pi),Oi),Bi),Sc),Ic),fs),js),Zi),tu=function(e){return e.conversationReducer.conversationIds},ru=function(e){return e.conversationReducer.readRequestIds},nu=function(e){return e.conversationReducer.missedReadNoticeCount},ou=function(e){return e.conversationReducer.inlocation},au=function(e){return e.conversationReducer.updateTimeNow},cu=function(e){return e.conversationReducer.currentConversationId},su=function(e){return e.conversationReducer.currentConversationCanRead},iu=function(e){return e.conversationReducer.status},uu=function(e){return e.conversationReducer.direction},lu=(0,Wn.createSelector)(Xn,tu,(function(e,r){return((0,t.denormalize)(r,[s],{conversations:e})||[]).filter(Boolean)})),du=(0,Wn.createSelector)(lu,cu,(function(e,t){return e.filter((function(e){var r=e.id,n=e.unread_count;return e&&(n>0||r===t)}))})),pu=(0,Wn.createSelector)(lu,(function(e){return e.filter((function(e){return e.pinned}))})),fu=(0,Wn.createSelector)(lu,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),_u=(0,Wn.createSelector)(lu,cu,(function(e,t){return e.filter((function(e){var r=e.unreplied,n=e.id;return void 0===r||r||!r&&n===t}))})),Eu=(0,Wn.createSelector)(lu,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),Su=function(e){return e.conversationReducer.keyword},Ou=function(e){var t=window.localStorage.getItem("mini-filter");return(JSON.parse(t)||{}).filter||"All"},hu=(0,Wn.createSelector)(Ou,lu,du,pu,fu,_u,(function(e,t,r,n,o,a){return{All:t,Unread:r,Pinned:n,Closed:o,Unreplied:a}[e]})),vu=(0,Wn.createSelector)(hu,Sa,Ou,(function(e,t,r){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),e.filter((function(e){return void 0===e.faking}))})),Tu=(0,Wn.createSelector)(lu,cu,Da,ou,zn,Xn,(function(e,r,n,o,c,i){var u=e.find((function(e){return e.id===r}))||{};if(o&&!u.id&&(u=(0,t.denormalize)(r,s,{conversations:i})||{}),!n&&u.lack){var l=u.to_id,d=(0,t.denormalize)(l,a,{users:c})||{},p={to_shop_id:d.shop_id,to_status:d.status,to_name:d.name||"-",to_avatar:d.avatar};return Object.assign(u,p)}return u})),mu=(0,Wn.createSelector)(Tu,(function(e){return(e||{}).to_id||null})),gu=(0,Wn.createSelector)(Tu,co,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),bu=(0,Wn.createSelector)(gu,(function(e){return(null==e?void 0:e.country)||"SG"})),yu=(0,Wn.createSelector)(Tu,(function(e){return e.shop_id})),Ru=(0,Wn.createSelector)(Tu,(function(e){return e.to_id})),Du=(0,Wn.createSelector)(Tu,(function(e){return e.status})),Au=(0,Wn.createSelector)(Tu,(function(e){return e.auto_translation})),Cu=(0,Wn.createSelector)(Tu,(function(e){return e.max_general_option_hide_time})),Iu=function(e){return(0,Wn.createSelector)(Xn,(function(r){return(0,t.denormalize)(e,s,{conversations:r})||{}}))},Pu=function(e){return(0,Wn.createSelector)(Iu(e),(function(e){return e.shop_id}))},wu=function(e){return(0,Wn.createSelector)(lu,(function(t){return e.map((function(e){return t.find((function(t){return t.id===e}))})).filter(Boolean)}))},Nu=(0,Wn.createSelector)(Tu,(function(e){return(e||{}).shop_id||null})),Uu=(0,Wn.createSelector)(zn,Tu,(function(e,r){return r?(0,t.denormalize)(r.to_id,a,{users:e}):{}})),xu=(0,Wn.createSelector)(Tu,(function(e){return(e||{}).to_shop_id||null})),ku=function(e){return e.conversationReducer.results},Mu=function(e){return e.conversationReducer.searchStatus},Lu=(0,Wn.createSelector)(Tu,(function(e){return e.translationAccess})),ju=function(e){return e.conversationReducer.listsHash},Gu=function(e){return e.conversationReducer.conversationBeenDeleted},Fu=(0,Wn.createSelector)(Tu,(function(e){return(e||{}).to_name})),Hu=function(e){return e.conversationReducer.access},Vu=function(e){return e.conversationReducer.isNavigateToUnreadMessage},Bu=function(e){return e.conversationReducer.navigateToUnreadMessageId},Yu=function(e){return e.conversationReducer.pendingOffersCount},Qu=(0,Wn.createSelector)(Tu,Yu,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0})),Wu=function(e){return(0,Wn.createSelector)(Iu(e),Yu,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0}))},qu=function(e){return(0,Wn.createSelector)(Pu(e),co,(function(e,r){var n=(0,t.denormalize)(e,p,{shops:r})||{};return(null==n?void 0:n.country)||"SG"}))};!function(e){e.DELETE_CONVERSATION_REQUESTED="DELETE_CONVERSATION_REQUESTED",e.DELETE_CONVERSATION_SUCCEEDED="DELETE_CONVERSATION_SUCCEEDED",e.GET_CONVERSATION_DETAIL_REQUESTED="GET_CONVERSATION_DETAIL_REQUESTED",e.FAKE_CONVERSATION_SUCCEEDED="FAKE_CONVERSATION_SUCCEEDED",e.FETCH_CONVERSATIONS_REQUESTED="FETCH_CONVERSATIONS_REQUESTED",e.FETCH_CONVERSATIONS_SUCCEEDED="FETCH_CONVERSATIONS_SUCCEEDED",e.UPDATE_FETCH_CONVERSATIONS_STATUS="UPDATE_FETCH_CONVERSATIONS_STATUS",e.UPDATE_FETCH_CONVERSATIONS_DIRECTION="UPDATE_FETCH_CONVERSATIONS_DIRECTION",e.UPDATE_CONVERSATION_TIMESTAMP="UPDATE_CONVERSATION_TIMESTAMP",e.UPDATE_CONVERSATION_FILTER="UPDATE_CONVERSATION_FILTER",e.FORWARD_CONVERSATION_REQUESTED="FORWARD_CONVERSATION_REQUESTED",e.MASS_FORWARD_CONVERSATION_REQUESTED="MASS_FORWARD_CONVERSATION_REQUESTED",e.MARK_MESSAGES_REQUESTED="MARK_MESSAGES_REQUESTED",e.MARK_MESSAGES_SUCCEEDED="MARK_MESSAGES_SUCCEEDED",e.UPDATE_READ_REQUEST_DATA="UPDATE_READ_REQUEST_DATA",e.PIN_CONVERSATION_REQUESTED="PIN_CONVERSATION_REQUESTED",e.SEARCH_CONVERSATIONS_REQUESTED="SEARCH_CONVERSATIONS_REQUESTED",e.SEARCH_CONVERSATIONS_SUCCEEDED="SEARCH_CONVERSATIONS_SUCCEEDED",e.RESET_SEARCH_PARAMS="RESET_SEARCH_PARAMS",e.UPDATE_EXISTED_RESULT_ID_MAP="UPDATE_EXISTED_RESULT_ID_MAP",e.UPDATE_CURRENT_CONVERSATION_MODE="UPDATE_CURRENT_CONVERSATION_MODE",e.SET_CURRENT_CONVERSATION_MODE="SET_CURRENT_CONVERSATION_MODE",e.SEARCH_BY_COMBINED_API="SEARCH_BY_COMBINED_API",e.TOGGLE_MULTIPLE_SELECTION_MODE="TOGGLE_MULTIPLE_SELECTION_MODE",e.SET_SELECTED_CONVERSATION_LIST="SET_SELECTED_CONVERSATION_LIST",e.UPDATE_SELECTED_CONVERSATION_ID="UPDATE_SELECTED_CONVERSATION_ID",e.SELECTED_CONVERSATIONS_REQUESTED="SELECTED_CONVERSATIONS_REQUESTED",e.CONVERSATION_BATCH_OPERATE_REQUESTED="CONVERSATION_BATCH_OPERATE_REQUESTED",e.SET_CURRENT_CONVERSATION_CAN_READ="SET_CURRENT_CONVERSATION_CAN_READ",e.UPDATE_PREVIOUS_CONVERSATION_ID="UPDATE_PREVIOUS_CONVERSATION_ID",e.CLOSE_CONVERSATION_REQUESTED="CLOSE_CONVERSATION_REQUESTED",e.FETCH_GROUPS_REQUESTED="FETCH_GROUPS_REQUESTED",e.FETCH_MASS_GROUPS_REQUESTED="FETCH_MASS_GROUPS_REQUESTED",e.SHOW_CONVERSATION_REQUESTED="SHOW_CONVERSATION_REQUESTED",e.RESET_CONVERSATION_REQUESTED="RESET_CONVERSATION_REQUESTED",e.SHOW_CONVERSATION_SUCCEEDED="SHOW_CONVERSATION_SUCCEEDED",e.SHOW_NORMAL_CONVERSATION_SUCCEEDED="SHOW_NORMAL_CONVERSATION_SUCCEEDED",e.CHANGE_CONVERSATION_STATUS_REQUESTED="CHANGE_CONVERSATION_STATUS_REQUESTED",e.FETCH_DEGRADE_CONVERSATIONS_DETAIL="FETCH_DEGRADE_CONVERSATIONS_DETAIL",e.CONVERSATION_OPERATE_REQUESTED="CONVERSATION_OPERATE_REQUESTED",e.SEARCH_MORE_RESULTS="SEARCH_MORE_RESULTS",e.SEARCH_MORE_SUCCEED="SEARCH_MORE_SUCCEED",e.SET_SEARCH_STATUS="SET_SEARCH_STATUS",e.UPDATE_ACCESS="UPDATE_ACCESS",e.SHOW_SEARCHED_CONVERSATION_REQUESTED="SHOW_SEARCHED_CONVERSATION_REQUESTED",e.UPDATE_SEARCH_PARAMS="UPDATE_SEARCH_PARAMS",e.LOCATION_MESSAGE="LOCATION_MESSAGE",e.UPDATE_LOCATION_MODE="UPDATE_LOCATION_MODE",e.UPDATE_SYNC_TIME_NOW="UPDATE_SYNC_TIME_NOW",e.SET_CURRENT_CONVERSATION_TYPE="SET_CURRENT_CONVERSATION_TYPE",e.SET_CONVERSATION_BEEN_DELETED="SET_CONVERSATION_BEEN_DELETED",e.MUTE_CONVERSATION_REQUESTED="MUTE_CONVERSATION_REQUESTED",e.SET_NAVIGATE_TO_UNREAD_MESSAGE="SET_NAVIGATE_TO_UNREAD_MESSAGE",e.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID="SET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID="RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.GET_PENDING_OFFERS_COUNT_REQUESTED="GET_PENDING_OFFERS_COUNT_REQUESTED",e.GET_PENDING_OFFERS_COUNT_SUCCEED="GET_PENDING_OFFERS_COUNT_SUCCEED",e.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED="GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED",e.SET_ACTIVE_TAB="SET_ACTIVE_TAB",e.SET_ACTIVE_TAB_SUCCEED="SET_ACTIVE_TAB_SUCCEED",e.UPDATE_IS_CONTACTS_VISIBLE="UPDATE_IS_CONTACTS_VISIBLE",e.SET_CURRENT_CONVERSATION_ID="SET_CURRENT_CONVERSATION_ID",e.UPDATE_CONVERSATION_SORT_BY_FILTER="UPDATE_CONVERSATION_SORT_BY_FILTER"}(Ji||(Ji={}));var Ku=(0,dr.createActions)((e($i={},Ji.DELETE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e($i,Ji.DELETE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e($i,Ji.GET_CONVERSATION_DETAIL_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e($i,Ji.FAKE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e($i,Ji.FETCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.direction,r=void 0===t?"reset":t,n=e.noPending;return{direction:r,noPending:void 0!==n&&n,source:e.source}})),e($i,Ji.FETCH_CONVERSATIONS_SUCCEEDED,(function(e){var t=e.conversationIds,r=e.conversationIdsMap,n=e.oldestMessageRegion,o=e.latestMessageRegion,a=e.oldestReceivedMessageId,c=e.latestReceivedMessageId,s=e.oldestTimestampNano,i=e.latestTimestampNano,u=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestMessageRegion:n,latestMessageRegion:o,oldestReceivedMessageId:a,latestReceivedMessageId:c,direction:void 0===u?"reset":u,status:e.status,hasMore:e.hasMore,latestTimestampNano:i,oldestTimestampNano:s,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException,nextMessageTimeNano:e.nextMessageTimeNano,sortByWaitTime:e.sortByWaitTime}})),e($i,Ji.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e){return{status:e.status}})),e($i,Ji.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e){return{direction:e.direction}})),e($i,Ji.UPDATE_CONVERSATION_TIMESTAMP,(function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}})),e($i,Ji.UPDATE_CONVERSATION_FILTER,(function(e){return{filter:e.filter}})),e($i,Ji.FORWARD_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId,type:e.type,forwardId:e.forwardId}})),e($i,Ji.MASS_FORWARD_CONVERSATION_REQUESTED,(function(e){return{type:e.type,forwardId:e.forwardId,conversationIds:e.conversationIds}})),e($i,Ji.MARK_MESSAGES_REQUESTED,(function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId}})),e($i,Ji.MARK_MESSAGES_SUCCEEDED,(function(e){return{conversationId:e.conversationId,markType:e.markType}})),e($i,Ji.UPDATE_READ_REQUEST_DATA,(function(e){return{requestId:e.requestId,requestIds:e.requestIds,count:e.count}})),e($i,Ji.PIN_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e($i,Ji.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.filter;return{keyword:r,filter:void 0===n?"all":n}})),e($i,Ji.RESET_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchFilter:e.searchFilter}})),e($i,Ji.UPDATE_EXISTED_RESULT_ID_MAP,(function(e){return{addedMap:e.addedMap}})),e($i,Ji.UPDATE_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode,conversationId:e.conversationId}})),e($i,Ji.SET_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode}})),e($i,Ji.SEARCH_BY_COMBINED_API,(function(){return{}})),e($i,Ji.TOGGLE_MULTIPLE_SELECTION_MODE,(function(e){return{mode:e.mode}})),e($i,Ji.SET_SELECTED_CONVERSATION_LIST,(function(e){return{list:e.list}})),e($i,Ji.UPDATE_SELECTED_CONVERSATION_ID,(function(e){return{id:e.id,selected:e.selected}})),e($i,Ji.SELECTED_CONVERSATIONS_REQUESTED,(function(e){return{type:e.type,id:e.id}})),e($i,Ji.CONVERSATION_BATCH_OPERATE_REQUESTED,(function(e){return{type:e.type}})),e($i,Ji.SET_CURRENT_CONVERSATION_CAN_READ,(function(e){return{canRead:e.canRead}})),e($i,Ji.SHOW_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation,previousId:e.previousId,messageId:e.messageId,sourceInfo:e.sourceInfo}})),e($i,Ji.RESET_CONVERSATION_REQUESTED,(function(){return{}})),e($i,Ji.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId;return{conversationId:t,previousId:void 0===r?null:r}})),e($i,Ji.CHANGE_CONVERSATION_STATUS_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e($i,Ji.FETCH_DEGRADE_CONVERSATIONS_DETAIL,(function(e){return{conversationIds:e.conversationIds}})),e($i,Ji.CONVERSATION_OPERATE_REQUESTED,(function(e){return{type:e.type,extra:e.extra}})),e($i,Ji.SEARCH_MORE_RESULTS,(function(e){return{type:e.type,reset:e.reset}})),e($i,Ji.SEARCH_MORE_SUCCEED,(function(e){return{type:e.type,total:e.total,results:e.results,isFromCache:e.isFromCache,hasMore:e.hasMore,nextOffset:e.nextOffset}})),e($i,Ji.SET_SEARCH_STATUS,(function(e){return{type:e.type,status:e.status}})),e($i,Ji.UPDATE_ACCESS,(function(e){return{access:e.access}})),e($i,Ji.SHOW_SEARCHED_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation}})),e($i,Ji.LOCATION_MESSAGE,(function(e){return{msgId:e.msgId,shopId:e.shopId}})),e($i,Ji.UPDATE_LOCATION_MODE,(function(e){return{inlocation:e.inlocation}})),e($i,Ji.UPDATE_SYNC_TIME_NOW,(function(e){return{timeNow:e.timeNow}})),e($i,Ji.SHOW_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId,n=void 0===r?null:r,o=e.type;return{conversationId:t,previousId:n,type:void 0===o?A.ConversationTypeEnum.Normal:o}})),e($i,Ji.SET_CURRENT_CONVERSATION_TYPE,(function(e){var t=e.type;return{type:void 0===t?A.ConversationTypeEnum.Normal:t}})),e($i,Ji.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e){return{isNavigateToUnreadMessage:e.isNavigateToUnreadMessage}})),e($i,Ji.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return{navigateToUnreadMessageId:e.navigateToUnreadMessageId}})),e($i,Ji.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(){})),e($i,Ji.SET_CONVERSATION_BEEN_DELETED,(function(e){return{conversationBeenDeleted:e.conversationBeenDeleted}})),e($i,Ji.MUTE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e($i,Ji.GET_PENDING_OFFERS_COUNT_REQUESTED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId}})),e($i,Ji.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId,count:e.count}})),e($i,Ji.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{records:e.records}})),e($i,Ji.SET_CURRENT_CONVERSATION_ID,(function(e){return{conversationId:e.conversationId,previousId:e.previousId}})),$i)),zu=Ku.deleteConversationRequested,Xu=Ku.deleteConversationSucceeded,Ju=Ku.getConversationDetailRequested,$u=Ku.fakeConversationSucceeded,Zu=Ku.fetchConversationsRequested,el=Ku.fetchConversationsSucceeded,tl=Ku.updateFetchConversationsStatus,rl=Ku.updateFetchConversationsDirection,nl=Ku.updateConversationTimestamp,ol=Ku.updateConversationFilter,al=(Ku.forwardConversationRequested,Ku.massForwardConversationRequested,Ku.markMessagesRequested),cl=Ku.markMessagesSucceeded,sl=Ku.updateReadRequestData,il=Ku.pinConversationRequested,ul=(Ku.searchConversationsRequested,Ku.resetSearchParams),ll=(Ku.updateExistedResultIdMap,Ku.updateCurrentConversationMode,Ku.setCurrentConversationMode,Ku.searchByCombinedApi,Ku.toggleMultipleSelectionMode,Ku.setSelectedConversationList,Ku.updateSelectedConversationId,Ku.selectedConversationsRequested,Ku.conversationBatchOperateRequested,Ku.setCurrentConversationCanRead),dl=Ku.showConversationRequested,pl=Ku.resetConversationRequested,fl=Ku.showConversationSucceeded,_l=Ku.changeConversationStatusRequested,El=Ku.fetchDegradeConversationsDetail,Sl=Ku.conversationOperateRequested,Ol=Ku.searchMoreResults,hl=(Ku.searchMoreSucceed,Ku.setSearchStatus,Ku.updateAccess),vl=Ku.showSearchedConversationRequested,Tl=Ku.locationMessage,ml=Ku.updateLocationMode,gl=Ku.updateSyncTimeNow,bl=Ku.showNormalConversationSucceeded,yl=Ku.setNavigateToUnreadMessage,Rl=Ku.setNavigateToUnreadMessageId,Dl=Ku.resetNavigateToUnreadMessageId,Al=Ku.setConversationBeenDeleted,Cl=Ku.muteConversationRequested,Il=Ku.getPendingOffersCountRequested,Pl=Ku.getPendingOffersCountSucceed,wl=Ku.getBatchPendingOffersCountSucceed,Nl=Ku.setCurrentConversationId,Ul=Ct().mark(kl),xl=Ct().mark(Ml);function kl(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.conversationId,c.prev=1,c.next=4,(0,on.select)(Iu(t));case 4:return r=c.sent,n=r.shop_id,o=r.pinned,a={method:"PUT",parent:"conversations",parentId:t,resource:o?"unpin":"pin"},n&&(a.payload=JSON.stringify({shop_id:n})),c.next=11,(0,on.call)(hr,a);case 11:c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(1),c.next=17,(0,on.put)(y_({error:c.t0}));case 17:case"end":return c.stop()}}),Ul,null,[[1,13]])}function Ml(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(il,kl);case 2:case"end":return e.stop()}}),xl)}function Ll(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ll(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gl,Fl=function(t,r){var n=r.payload.conversationId,o=jl(jl({},t.conversationIdsMap),{},e({},n,!1)),a=new Set(t.conversationIds);a.delete(n);var c=Array.from(a),s=t.currentConversationId;return jl(jl({},t),{},{currentConversationId:s===n?null:s,conversationIds:c,conversationIdsMap:o})};Gl="mini-filter";var Hl=function(e){return function(e,t){var r=t.payload.filter,n=JSON.parse(A.LS.getItem(Gl))||{};return A.LS.setItem(Gl,JSON.stringify({filter:r,userid:n.userid})),jl(jl({},e),{},{filter:r})}},Vl=function(e,t){var r=t.payload.status;return jl(jl({},e),{},{status:r})},Bl=function(e,t){var r=t.payload.direction;return jl(jl({},e),{},{direction:r})},Yl=function(e,t){var r=t.payload.conversationId;return jl(jl({},e),{},{previousConversationId:r})},Ql=function(e,t){var r=t.payload.canRead;return jl(jl({},e),{},{currentConversationCanRead:r})};function Wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ql(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Wl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Kl,zl=function(e,t){var r=t.payload.conversationId,n=ql({},e.draftHash);return delete n[r],ql(ql({},e),{},{draftHash:n})},Xl=function(e){return ql(ql({},e),{},{draftHash:{}})},Jl=function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=ql({},e.draftHash);return n.forEach((function(e){delete o[e]})),ql(ql({},e),{},{draftHash:o})},$l=function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,a=ql({},e.draftHash);return a[n]=o,ql(ql({},e),{},{draftHash:a})},Zl=Ct().mark(td),ed=(e(Kl={},A.ConversationTypeEnum.Agent,"receiveAgentMessageRequested"),e(Kl,A.ConversationTypeEnum.Normal,"receiveMessageRequested"),Kl);function td(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=e.type,n=ed[r],o.next=4,(0,on.spawn)(ld,t.request_id);case 4:return o.next=6,Uc().put(kc()[n]({payload:{message:t}}));case 6:case"end":return o.stop()}}),Zl)}function rd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?rd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var od=function(t,r){var n=r.payload,o=n.medias,a=n.conversationId,c=t.mediaMap,s=(c[a]||[]).concat(Array.isArray(o)?o:[o]);return nd(nd({},t),{},{mediaMap:nd(nd({},c),{},e({},a,s))})},ad=function(t,r){var n=r.payload,o=n.id,a=n.conversationId,c=t.mediaMap,s=Wt(c[a])||[];return s.splice(o,1),nd(nd({},t),{},{mediaMap:nd(nd({},c),{},e({},a,s))})},cd=function(t,r){var n=r.payload.conversationId,o=t.mediaMap;return nd(nd({},t),{},{mediaMap:nd(nd({},o),{},e({},n,[]))})},sd=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},id=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},ud=Ct().mark(ld);function ld(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,A.getItem)(e);case 2:(t=o.sent)&&(r=new Date,n=+r-+t,Xr(qr.MESSAGE_SOCKET,n),(0,A.removeItem)(e));case 4:case"end":return o.stop()}}),ud)}var dd=y(439).t,pd=A.MessageTypes.MSG_TYPE_TEXT,fd=function(e,r,n){var o=e.all||[],a=e.sending||[],s=e.failed||[],i=o.length,u=null;if(i){for(var l=0,d=null;l<i&&!d;){var p=e.all[l];(d=(0,t.denormalize)(p,c,{messages:n}))&&(d.type===A.MessageTypes.MSG_TYPE_SECURITY_TIPS||d.isFaking)&&(d=null),l++}d&&d.created_timestamp>Math.floor(r.last_message_time_nano/Math.pow(10,9))&&(u=(0,A.fillMessagePreview)(d))}if(!u){var f=r.latest_message_id,_=r.latest_message_content,E=r.latest_message_type,S=r.last_message_option,O=r.latest_message_source,h=r.last_message_time_nano;(u={id:f,content:_,type:E,message_option:S,source:O,to_shop_id:r.latest_message_to_shop_id}).created_at=new Date(h/1e6)+""}var v=u,T=v.id,m=v.message_option,g=a.includes(T)?A.MessageSendStatus.SENDING:s.includes(T)?A.MessageSendStatus.FAILED:u.send_status?A.MessageSendStatus.SUCCEED:null;return(0,A.hasTargetMessageOption)(m,A.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(g=A.MessageSendStatus.FAILED,u.type=pd,u.content={text:dd("common.blacklist.replaced_text")}),(0,A.hasTargetMessageOption)(m,A.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(g=A.MessageSendStatus.FAILED),u.send_status=g,u},_d={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation"},Ed=Ct().mark(Od),Sd=Ct().mark(hd);function Od(e){var t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.prev=1,n.next=4,(0,on.select)(Pu(t));case 4:return r=n.sent,n.next=7,(0,on.call)(hr,{method:"DELETE",resource:"conversations",id:t,params:{shop_id:r}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,(0,on.put)(y_({error:n.t0}));case 13:case"end":return n.stop()}}),Ed,null,[[1,9]])}function hd(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(zu,Od);case 2:case"end":return e.stop()}}),Sd)}const vd=e({},Ji.DELETE_CONVERSATION_SUCCEEDED,Fl);var Td,md=Ct().mark(Id),gd=Ct().mark(Pd),bd=Ct().mark(wd),yd=Ct().mark(Nd),Rd=Ct().mark(Ud),Dd=Ct().mark(xd);function Ad(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ad(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ad(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Id(e){var t,r,n,o,a,c,s,i,u,l,d,p,f;return Ct().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(t=e.conversation,r=e.isSubAccount,n=t.id,o=t.to_id,a={},r){_.next=8;break}return _.next=6,(0,on.call)(A.getItem,"mini-sc_redirect");case 6:(c=_.sent)&&(s=c.orderId,i=c.productId,u=c.conversationId,l=c.shopId,parseInt(n)===parseInt(u)&&(s?a={order_id:parseInt(s)}:i?a={product_id:parseInt(i)}:l&&(a={shop_id:parseInt(l)})));case 8:return _.next=10,(0,on.call)(hr,{method:"POST",parent:"conversation",resource:"enter",payload:JSON.stringify(Cd({conversation_id:n,to_id:o},a))});case 10:if(d=_.sent,p=d.faq_session_id,f=d.session_expiry_timestamp,r){_.next=16;break}return _.next=16,Uc().put(kc().fetchFaqSessionSucceed({payload:{conversationId:n,faqSessionId:p,sessionExpiryTime:f}}));case 16:case"end":return _.stop()}}),md)}function Pd(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y;return Ct().wrap((function(R){for(;;)switch(R.prev=R.next){case 0:return t=e.conversation,e.previousId,r=e.messageId,n=e.messageList,e.sourceInfo,a=(o=t).id,c=o.lack,R.next=4,(0,on.select)(Da);case 4:if((s=R.sent)||!c){R.next=11;break}return R.next=8,(0,on.call)(cp,{payload:{conversationIds:[a]}});case 8:return R.next=10,(0,on.select)(Iu(a));case 10:t=R.sent;case 11:return u=(i=t).faking,l=i.status,d=i.to_id,p=i.shop_id,f=i.latest_message_id,_=i.to_shop_id,E=i.unread_count,S=i.last_read_message_id,Gn({shopId:p,operation:A.TrackerOperation.IMPRESSION,trackerName:"impressionChatRoom",data:{convo_userid:d,conversation_id:a}}),R.next=15,(0,on.spawn)(Id,{conversation:t,isSubAccount:s});case 15:return R.next=17,(0,on.select)(Rh);case 17:if((O=R.sent)&&O[p]||!s){R.next=22;break}return R.next=22,(0,on.call)(Vh,Lh({shopId:p}));case 22:return R.next=24,(0,on.put)(oi({userId:d,shopId:p,buyerShopId:_}));case 24:return R.next=26,(0,on.put)(Dl());case 26:return h="number"==typeof E&&E>0&&!r,R.next=29,(0,on.put)(yl({isNavigateToUnreadMessage:h}));case 29:return R.next=31,Uc().put(kc().fetchMessagesRequested({payload:{conversationId:a,messageId:r||(h?S:void 0),direction:r||h?"around":"older",messageList:n,reset:!0}}));case 31:return R.next=33,(0,on.put)(Il({shopId:p,buyerId:d}));case 33:return R.next=35,Uc().call(kc().handleCurrentConversationChange({payload:a}));case 35:if(v=R.sent,!(!u&&"closed"!==l&&E>0||v)){R.next=41;break}return T=v||f,R.next=41,(0,on.put)(al({conversationId:a,isRead:!0,latestMessageId:T}));case 41:if(m={},!s){R.next=50;break}return R.next=45,(0,on.call)(i_,{payload:{shopId:p}});case 45:return g=R.sent,b=g.auth_names,y=void 0===b?[]:b,R.next=50,(0,on.put)(hl({access:y}));case 50:return R.next=52,(0,on.select)(Nf(p));case 52:if(m=R.sent){R.next=59;break}return R.next=56,(0,on.call)(Wf,{payload:{shopId:p}});case 56:return m=R.sent,R.next=59,(0,on.put)(ho({name:"shops",id:p,record:Cd({},m)}));case 59:return R.next=63,Uc().put(kc().messageSyncUpdate({payload:{conversation:t}}));case 63:return R.next=65,(0,on.put)(Al({conversationBeenDeleted:!1}));case 65:case"end":return R.stop()}}),gd)}function wd(e){var t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.conversation,n=t.previousId,o=t.messageId,a=t.messageList,c=t.sourceInfo,s=void 0===c?{}:c,i.prev=1,i.next=4,(0,on.spawn)(Pd,{conversation:r,previousId:n,messageId:o,messageList:a,sourceInfo:s});case 4:i.next=9;break;case 6:i.prev=6,i.t0=i.catch(1),console.log("*** Show Conversation Failed: ",i.t0);case 9:case"end":return i.stop()}}),bd,null,[[1,6]])}function Nd(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.conversationId,n=t.previousId,o.next=3,(0,on.put)(fl({conversationId:r,previousId:n}));case 3:case"end":return o.stop()}}),yd)}function Ud(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(t=e.payload).type,r=t.conversationId,n=t.previousId,o.next=4,(0,on.put)(bl({conversationId:r,previousId:n}));case 4:case"end":return o.stop()}}),Rd)}function xd(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)(dl,wd);case 2:return e.next=4,(0,on.takeEvery)(Nl,Nd);case 4:return e.next=6,(0,on.takeEvery)(fl,Ud);case 6:case"end":return e.stop()}}),Dd)}const kd=(e(Td={},Ji.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationId;return r.previousId,Cd(Cd({},e),{},{currentConversationId:n})})),e(Td,Ji.RESET_CONVERSATION_REQUESTED,(function(e){return Cd(Cd({},e),{},{currentConversationId:null})})),e(Td,Ji.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e,t){var r=t.payload.isNavigateToUnreadMessage;return Cd(Cd({},e),{},{isNavigateToUnreadMessage:r})})),e(Td,Ji.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e,t){var r=t.payload.navigateToUnreadMessageId;return Cd(Cd({},e),{},{navigateToUnreadMessageId:r})})),e(Td,Ji.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return Cd(Cd({},e),{},{navigateToUnreadMessageId:""})})),Td),Md=e({},Ji.UPDATE_CONVERSATION_FILTER,Hl(A.ConversationTypeEnum.Normal));function Ld(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ld(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ld(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gd,Fd=Ct().mark(Vd),Hd=Ct().mark(Bd);function Vd(e,t,r,n,o){var a,c,s,i,u,l,d,p,f,_,E,S,O,h,v;return Ct().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=T("conversations",e),m.next=3,(0,on.select)(Tu);case 3:return c=m.sent,m.next=6,(0,on.select)((function(e){return e.entityReducer}));case 6:return s=m.sent,i=s.conversations,u=void 0===i?{}:i,l=s.shops,d=void 0===l?{}:l,m.next=13,(0,on.select)(Sa);case 13:return m.sent,m.next=16,(0,on.select)(Ou);case 16:return m.sent,p=[],c&&c.faking?(f=c.id,p=ln({previousConversationIds:t,fetchedConversationIds:a.result,direction:n,fakeConversationId:f,sortByWaitTime:!1})):p=ln({previousConversationIds:t,fetchedConversationIds:a.result,direction:n,sortByWaitTime:!1}),_=p.length<A.persistLimit?null:Wt(p).splice(0,A.persistLimit),m.next=23,(0,on.put)(Oo({entities:{persist:_}}));case 23:return m.next=25,(0,on.call)(_v,u,e,"conversations");case 25:return m.next=27,(0,on.spawn)(Bd,e);case 27:if(!(E=o&&o.length)){m.next=33;break}return m.next=31,(0,on.call)(_v,d,o,"shops");case 31:return m.next=33,(0,on.put)(Gf({shopIds:o.map((function(e){return e.id}))}));case 33:return m.next=35,(0,on.put)(fr());case 35:if(!(S=fn(_,r,t))||!S.changed){m.next=47;break}if(h=S.lastConversationId,"older"!==n&&"reset"!==n){m.next=42;break}O=a.entities.conversations&&a.entities.conversations[h],m.next=46;break;case 42:return m.next=44,(0,on.select)(lu);case 44:v=m.sent,O=v.find((function(e){return e.id===h}));case 46:O&&(E?S.oldestReceivedMessageId=O.latest_message_id:S.oldestTimestampNano=O.last_msg_time_nano);case 47:return m.abrupt("return",{persistObj:S,resultConversationIds:p});case 48:case"end":return m.stop()}}),Fd)}function Bd(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_;return Ct().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(t=[],e.forEach((function(e){(0,A.hasTargetMessageOption)(e.last_message_option,A.MessageOption.MSG_OPT_RECALL)&&t.push({conversation_id:e.id,shop_id:e.shop_id})})),!t.length){E.next=27;break}return E.next=5,(0,on.call)(hr,{method:"POST",parent:"conversation",resource:"last_msg_in_conversation_batch",payload:JSON.stringify({pairs:t})});case 5:if(r=E.sent,!(n=Object.keys(r)).length){E.next=27;break}o={};case 9:if(!n.length){E.next=24;break}if(!(a=n.shift())){E.next=22;break}return E.next=14,(0,on.select)(Iu(a));case 14:if(c=E.sent,(0,A.hasTargetMessageOption)(c.last_message_option,A.MessageOption.MSG_OPT_RECALL)){E.next=17;break}return E.abrupt("continue",9);case 17:s=r[a],i=s.id,u=s.type,l=s.content,d=s.to_shop_id,p=s.created_at,f=(0,A.getChatBotParams)(s,{updateMaxGeneralOptionHideTime:c.shop_id!==d}),_=(0,A.getCrmPreviewParams)(s),o[a]=jd(jd({latest_message_id:i,latest_message_type:u,latest_message_content:l,last_message_time:p},f),_);case 22:E.next=9;break;case 24:if((0,A.checkEmptyObject)(o)){E.next=27;break}return E.next=27,(0,on.put)(To({name:"conversations",records:o}));case 27:case"end":return E.stop()}}),Hd)}var Yd=Ct().mark(np),Qd=Ct().mark(op),Wd=Ct().mark(ap),qd=Ct().mark(cp),Kd=Ct().mark(sp),zd=Ct().mark(ip);function Xd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Xd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $d=["pinned","unreplied"],Zd=function(e,t,r,n,o,a,c){var s={},i="older"===e?r:"latest"===e?n:"",u=$d.includes(o);return s.resource=u?"conversation/list":"conversations",s.params={next_timestamp_nano:i,direction:"latest"===e&&i?"latest":"older"},"unread"===o&&(s.params.unread_only=!0),u&&(s.params.type=o),new Promise((function(e,t){hr(s).then((function(t){var r=t.conversations,n=void 0===r?[]:r,o=t.page_result;e([n,void 0===o?{}:o])})).catch((function(e){t(e)}))}))},ep=function(e){e.source;var t=e.filter,r=e.shopId,n=e.direction,o=e.oldestMessageRegion,a=e.latestMessageRegion,c=e.oldestReceivedMessageId,s=e.latestReceivedMessageId,i="",u="";"older"===n?(i=o,u=c):"latest"===n&&(i=a,u=s);var l={direction:"latest"===n?"latest":"older"};return r&&(l.shop_id=r),i&&(l.last_message_region=i),u&&(l.last_received_message_id=u),t&&["unread","pinned","unreplied"].includes(t)&&(l.type=t),new Promise((function(e,t){hr({parent:"subaccount",resource:"conversations",params:l}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},tp=function(e){return new Promise((function(t,r){hr({subServer:"coreapi",parent:"conversation_list_by_ids",params:{conversation_ids:JSON.stringify(e)}}).then((function(e){var r=e.conversations;t(void 0===r?[]:r)})).catch((function(e){r(e)}))}))},rp=function(e){return e=e.filter((function(e){return e})),new Promise((function(t){hr({parent:"setting",resource:"auto_translations",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function np(t){var r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,D,A,C,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,Q,W,q,K;return Ct().wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return r=t.list,n=t.needFetchOfferCount,o=void 0!==n&&n,a=t.conversationId,c=t.handleSave,z.next=3,(0,on.select)(Da);case 3:s=z.sent,i=[],u=[],l=[],d=[],p={},f=0;case 10:if(!(f<r.length)){z.next=26;break}if(_=r[f],E=_.id,S=_.conversation_id,O=_.type,h=_.content,v=_.latest_message_type,T=_.latest_message_content,m=_.to_id,g=_.shop_id,b=v||O,y=T||h,R=S||E,o&&d.push({buyer_id:m,shop_id:g}),!["order","offer","voucher"].includes(b)){z.next=23;break}return z.next=19,(0,on.select)(Pu(R));case 19:D=z.sent,A=!1,"order"===b&&s&&D!==y.shop_id&&(A=!0),A||(C="".concat(b,"_id"),I=y[C],P="order"===b?u:"offer"===b?i:l,0!==(w=y.shop_id)&&0!==parseInt(I)&&(P.push(e({shop_id:w},C,parseInt(I))),p[E]={type:b,itemId:I,conversationId:R}));case 23:f++,z.next=10;break;case 26:if(Object.keys(p).length||d.length){z.next=28;break}return z.abrupt("return");case 28:return N={},z.next=31,(0,on.select)(Pa);case 31:if(U=z.sent){z.next=37;break}if(!a){z.next=37;break}return z.next=36,(0,on.select)(Pu(a));case 36:U=z.sent;case 37:return U&&(N={params:{shop_id:U}}),z.prev=38,z.next=41,(0,on.call)(hr,Jd(Jd({method:"POST",parent:"chat_preview",resource:"detail"},N),{},{payload:JSON.stringify({offer_preview_req:i,order_preview_req:u,voucher_preview_req:l,offer_count_req:d})}));case 41:x=z.sent,z.next=47;break;case 44:z.prev=44,z.t0=z.catch(38),x={};case 47:if(M=(k=x).vouchers,L=void 0===M?[]:M,j=k.offers,G=void 0===j?[]:j,F=k.orders,H=void 0===F?[]:F,V=k.buyer_offer_counts,B=void 0===V?[]:V,L.length||G.length||H.length||B.length){z.next=50;break}return z.abrupt("return");case 50:Y={},Q=Object.keys(p),W=Ct().mark((function e(){var t,r,n,o,a,c,s,i,u;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K[q],r=void 0,n=p[t],o=n.type,a=n.itemId,c=n.conversationId,e.next=5,(0,on.select)(qu(c));case 5:s=e.sent,e.t0=o,e.next="voucher"===e.t0?9:"offer"===e.t0?12:"order"===e.t0?15:17;break;case 9:return i=L.find((function(e){return e.id===a})),r=i?Jd(Jd({},i),Re(i)):i,e.abrupt("break",17);case 12:return u=G.find((function(e){return e.id===a})),r=u?Jd(Jd({},u),{},{offer_price:oe(u.offer_price,s)}):u,e.abrupt("break",17);case 15:return r=H.find((function(e){return e.id===a})),e.abrupt("break",17);case 17:r&&(Y[t]=r);case 18:case"end":return e.stop()}}),e)})),q=0,K=Q;case 54:if(!(q<K.length)){z.next=59;break}return z.delegateYield(W(),"t1",56);case 56:q++,z.next=54;break;case 59:c&&c({records:Y,buyerOfferCounts:B});case 60:case"end":return z.stop()}}),Yd,null,[[38,44]])}function op(e){var t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={},r={},n.next=4,(0,on.call)(np,{list:e,needFetchOfferCount:!0,handleSave:function(e){var n=e.records,o=e.buyerOfferCounts;Object.keys(n).forEach((function(e){t[e]={latest_message_content:n[e]}})),o.forEach((function(e){var t=e.shop_id,n=e.buyer_id,o=e.pending_count,a="".concat(t,"_").concat(n);r[a]=o}))}});case 4:return n.next=6,(0,on.put)(To({name:"conversations",records:t}));case 6:return n.next=8,(0,on.put)(wl({records:r}));case 8:case"end":return n.stop()}}),Qd)}function ap(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,C,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,Q,W,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,de,pe,fe,_e,Ee,Se,Oe;return Ct().wrap((function(he){for(;;)switch(he.prev=he.next){case 0:return t=e.payload,r=t.direction,n=t.noPending,o=t.source,a="latest"===r,c=null,s=!1,i=!1,he.next=7,(0,on.select)(Ou);case 7:return u=he.sent.toLowerCase(),he.next=10,(0,on.select)(Sa);case 10:return he.sent,he.next=13,(0,on.select)(Fa);case 13:return l=he.sent,he.next=16,(0,on.select)(Da);case 16:if(d=he.sent,p=!d,f=o===A.ConversationSource.SYNC,"reset"!==r){he.next=24;break}return he.next=22,Uc().put(kc().resetConversationQueue({isLazy:!0}));case 22:return he.next=24,(0,on.put)(el({conversationIds:[],oldestMessageRegion:"",latestMessageRegion:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:A.DataFetchStatus.SUCCEED,persist:null,shouldFetchByTimestamp:p}));case 24:return he.next=26,(0,on.select)((function(e){return e.conversationReducer}));case 26:if(_=he.sent,E=_.oldestTimestampNano,S=_.latestTimestampNano,O=_.maxLatestTimestampNano,h=_.oldestReceivedMessageId,v=_.latestReceivedMessageId,T=_.maxLatestReceivedMessageId,m=_.hasMore,g=_.persist,b=_.conversationIds,y=_.status,R=_.syncFetchException,C=_.currentConversationId,I=_.oldestMessageRegion,P=_.latestMessageRegion,w=_.nextMessageTimeNano,N="reset"===r||(p?!E:!h)&&"older"===r,he.prev=43,"older"===r&&(p?"0"===E:!m)){he.next=163;break}if(n){he.next=48;break}return he.next=48,(0,on.put)(tl({status:N?A.DataFetchStatus.INIT_PENDING:A.DataFetchStatus.PENDING}));case 48:if(U=[],x={},!p){he.next=59;break}return he.next=53,(0,on.call)(Zd,r,w,E,S,u,s,o);case 53:k=he.sent,M=D(k,2),U=M[0],x=M[1],he.next=62;break;case 59:return he.next=61,(0,on.call)(ep,{source:o,shopId:c,direction:r,oldestMessageRegion:I,latestMessageRegion:P,oldestReceivedMessageId:h,latestReceivedMessageId:v,filter:u});case 61:U=he.sent;case 62:if(!(L=U.length)){he.next=159;break}if("reset"===r&&(!p||$d.includes(u))){he.next=74;break}if(j=U[L-1],G="older"===r,p?(F=G?E:S,H=G?j.next_timestamp_nano:j.last_message_time_nano):(F=G?h:v,H=j.latest_message_id),!F||!H){he.next=74;break}if(G?H<F:H>F){he.next=74;break}return he.next=73,(0,on.put)(el({direction:r,status:A.DataFetchStatus.SUCCEED,hasMore:a,persist:g,oldestReceivedMessageId:h,latestReceivedMessageId:v,maxLatestReceivedMessageId:v,conversationIds:b,oldestTimestampNano:E,latestTimestampNano:S,maxLatestTimestampNano:S,shouldFetchByTimestamp:p}));case 73:return he.abrupt("return");case 74:if(l||d){he.next=84;break}return he.next=77,(0,on.select)(sS);case 77:if("enabled"===he.sent){he.next=84;break}return V=Array.from(new Set(U.map((function(e){return e.to_shop_id})))),he.next=82,(0,on.call)(rp,V);case 82:B=he.sent,U=U.map((function(e){var t=B.find((function(t){return t.shop_id===e.to_shop_id}));return Jd(Jd({},e),{},{translationAccess:!!t&&t.is_auto_translation})}));case 84:if(Y={},U.forEach((function(e){Y[e.id]=!0})),i?(W=Wt(U),sd(W),Q=W[0]):(sd(U),Q=U[0]),q=id(Q,x.next_cursor),K=Q.latest_message_id,z={status:A.DataFetchStatus.SUCCEED,direction:r,conversationIdsMap:Y,shouldFetchByTimestamp:p,latestMessageRegion:Q.last_message_region,maxLatestReceivedMessageId:!T||T<K?K:T},!p){he.next=105;break}return $=q.oldestTimestampNano,Z=q.latestTimestampNano,he.next=94,(0,on.select)((function(e){return e.conversationReducer}));case 94:return ee=he.sent,te=ee.conversationIds,re=ee.persist,he.next=99,(0,on.call)(Vd,U,te,re,r);case 99:ne=he.sent,oe=ne.persistObj,ae=ne.resultConversationIds,z=Object.assign({},z,{sortByWaitTime:i,nextMessageTimeNano:null===(X=x)||void 0===X||null===(J=X.next_cursor)||void 0===J?void 0:J.next_message_time_nano,oldestTimestampNano:$,latestTimestampNano:Z,persist:oe,conversationIds:ae,maxLatestTimestampNano:!O||O<Z?Z:O}),he.next=125;break;case 105:return ce=[],se=[],he.next=109,(0,on.select)(Uf);case 109:if(ie=he.sent,U.forEach((function(e){!ie.includes(e.shop_id)&&se.push(e.shop_id)})),!se.length){he.next=115;break}return he.next=114,(0,on.call)(s_,{shopIds:Wt(new Set(se))});case 114:ce=he.sent;case 115:return he.next=117,(0,on.select)((function(e){return e.conversationReducer}));case 117:return ue=he.sent,le=ue.conversationIds,de=ue.persist,he.next=122,(0,on.call)(Vd,U,le,de,r,ce);case 122:pe=he.sent,fe=U[L-1],z=Object.assign({},z,{hasMore:!0,conversationIdsMap:Y,persist:pe.persistObj,oldestMessageRegion:fe.last_message_region,oldestReceivedMessageId:fe.latest_message_id,latestReceivedMessageId:K,conversationIds:pe.resultConversationIds});case 125:if(!f){he.next=137;break}if(!C||!Y[C]){he.next=137;break}return _e=U.find((function(e){return e.id===C})),Ee=(_e||{}).latest_message_id,he.next=131,(0,on.select)(jE);case 131:if(Se=he.sent,Oe=Se.length?Se[Se.length-1].id:"",Ee===Oe){he.next=137;break}return he.next=137,Uc().put(kc().fetchMessagesRequested({payload:{conversationId:null==_e?void 0:_e.id,reset:!0},isLazy:!0}));case 137:return he.next=139,(0,on.put)(el(z));case 139:return he.next=141,(0,on.spawn)(op,U);case 141:if(!a){he.next=154;break}if(!p){he.next=150;break}if("0"===q.nextTimestampNano){he.next=148;break}return he.next=146,(0,on.put)(Zu({direction:r,noPending:!0}));case 146:he.next=148;break;case 148:he.next=152;break;case 150:return he.next=152,(0,on.put)(Zu({direction:r,noPending:!0}));case 152:he.next=157;break;case 154:if(!(z.conversationIds.length<=20)){he.next=157;break}return he.next=157,(0,on.put)(Zu({direction:"older",noPending:!0}));case 157:he.next=161;break;case 159:return he.next=161,(0,on.put)(el({direction:r,status:A.DataFetchStatus.SUCCEED,hasMore:a,persist:g,oldestReceivedMessageId:h,latestReceivedMessageId:v,maxLatestReceivedMessageId:T,oldestTimestampNano:E,latestTimestampNano:S,maxLatestTimestampNano:O,shouldFetchByTimestamp:p,syncFetchException:f?R+1:0,nextMessageTimeNano:w}));case 161:he.next=166;break;case 163:if(y===A.DataFetchStatus.INIT_FAILED){he.next=166;break}return he.next=166,(0,on.put)(tl({status:A.DataFetchStatus.SUCCEED}));case 166:he.next=177;break;case 168:if(he.prev=168,he.t0=he.catch(43),!(he.t0 instanceof gt||he.t0 instanceof it)){he.next=175;break}return he.next=173,(0,on.put)(tl({status:A.DataFetchStatus.TEMPORY_ERROR}));case 173:he.next=177;break;case 175:return he.next=177,(0,on.put)(tl({status:N?A.DataFetchStatus.INIT_FAILED:A.DataFetchStatus.FAILED}));case 177:case"end":return he.stop()}}),Wd,null,[[43,168]])}function cp(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload.conversationIds,r=void 0===t?[]:t,c.prev=1,r.length){c.next=6;break}return c.next=5,(0,on.select)(Eu);case 5:r=c.sent;case 6:if(!r.length){c.next=16;break}return c.next=9,(0,on.call)(tp,r.slice(0,20));case 9:if(n=c.sent,!(o=n.filter((function(e){return!e.lack}))).length){c.next=16;break}return a={},o.forEach((function(e){a[e.id]=e})),c.next=16,(0,on.put)(To({name:"conversations",records:a}));case 16:c.next=20;break;case 18:c.prev=18,c.t0=c.catch(1);case 20:case"end":return c.stop()}}),qd,null,[[1,18]])}function sp(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.shopId,n=t.buyerId,c.prev=1,c.next=4,(0,on.call)(hr,{parent:"offer",resource:"count",params:{shop_id:r,buyer_id:n}});case 4:return o=c.sent,a=o.pending_count,c.next=8,(0,on.put)(Pl({shopId:r,buyerId:n,count:a}));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(1),c.next=14,(0,on.put)(Pl({shopId:r,buyerId:n,count:0}));case 14:case"end":return c.stop()}}),Kd,null,[[1,10]])}function ip(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Zu,ap);case 2:return e.next=4,(0,on.takeEvery)(El,cp);case 4:return e.next=6,(0,on.takeEvery)(Il,sp);case 6:case"end":return e.stop()}}),zd)}const up=(e(Gd={},Ji.FETCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationIds,o=r.conversationIdsMap,a=void 0===o?{}:o,c=r.oldestMessageRegion,s=r.latestMessageRegion,i=r.oldestReceivedMessageId,u=r.latestReceivedMessageId,l=r.direction,d=void 0===l?"reset":l,p=r.status,f=r.hasMore,_=r.oldestTimestampNano,E=r.latestTimestampNano,S=r.persist,O=r.shouldFetchByTimestamp,h=r.maxLatestReceivedMessageId,v=r.maxLatestTimestampNano,T=r.syncFetchException,m=void 0===T?0:T,g=r.nextMessageTimeNano,b=r.sortByWaitTime,y=Jd(Jd({},e),{},{status:p,hasMore:f,persist:S,conversationIds:n||e.conversationIds,conversationIdsMap:"reset"===d?a:Jd(Jd({},e.conversationIdsMap),a),direction:"latest"===d?d:"older",maxLatestReceivedMessageId:h,maxLatestTimestampNano:v,syncFetchException:m,nextMessageTimeNano:g});switch(d){case"reset":O?(y.latestTimestampNano=E,y.oldestTimestampNano=_):(y.oldestReceivedMessageId=i,y.latestReceivedMessageId=u);break;case"latest":O?y.latestTimestampNano=E>e.latestTimestampNano?E:e.latestTimestampNano:y.latestReceivedMessageId=u;break;case"older":O?(y.oldestTimestampNano=_,b&&(y.latestTimestampNano=E)):y.oldestReceivedMessageId=i}return c&&(y.oldestMessageRegion=c),s&&(y.latestMessageRegion=s),y})),e(Gd,Ji.UPDATE_FETCH_CONVERSATIONS_STATUS,Vl),e(Gd,Ji.UPDATE_FETCH_CONVERSATIONS_DIRECTION,Bl),e(Gd,Ji.UPDATE_CONVERSATION_TIMESTAMP,(function(e,t){var r=t.payload,n=r.latestTimestampNano,o=r.oldestTimestampNano;return Jd(Jd({},e),{},{latestTimestampNano:n,oldestTimestampNano:o})})),e(Gd,Ji.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(t,r){var n=r.payload,o=n.shopId,a=n.buyerId,c=n.count,s="".concat(o,"_").concat(a);return Jd(Jd({},t),{},{pendingOffersCount:Jd(Jd({},t.pendingOffersCount),{},e({},s,c))})})),e(Gd,Ji.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e,t){var r=t.payload.records;return Jd(Jd({},e),{},{pendingOffersCount:Jd(Jd({},e.pendingOffersCount),r)})})),Gd),lp=e({},Ji.SET_CURRENT_CONVERSATION_CAN_READ,Ql);var dp,pp=Ct().mark(Sp),fp=Ct().mark(Op);function _p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ep(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_p(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Sp(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h;return Ct().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.conversationId,n=t.isRead,o=t.latestMessageId,v.prev=1,a=Date.now()+"",c=n?"read":"unread",v.next=6,(0,on.select)(Iu(r));case 6:if(s=v.sent,i=s.shop_id,u=s.last_read_message_id,!n){v.next=16;break}return v.next=12,(0,on.select)(Iu(r));case 12:if(l=v.sent,d=l.unread_count,u!==o||d){v.next=16;break}return v.abrupt("return");case 16:if(p=n?{last_read_message_id:o}:{},i&&(p.shop_id=i),!n){v.next=21;break}return v.next=21,(0,on.put)(sl({requestId:a}));case 21:return v.next=23,(0,on.call)(hr,{method:"PUT",parent:"conversations",parentId:r,resource:c,params:{request_id:a},payload:JSON.stringify(Ep({},p))});case 23:if(!n){v.next=41;break}return v.next=26,(0,on.select)((function(e){return e.conversationReducer}));case 26:return f=v.sent,_=f.conversationMark,E="socket"===_[r],v.next=31,(0,on.put)(cl({conversationId:r,markType:E?"":"api"}));case 31:if(E){v.next=41;break}return v.next=34,(0,on.select)(Iu(r));case 34:return S=v.sent,O=S.unread_count,h=S.shop_id,v.next=39,(0,on.put)(ho({name:"conversations",id:r,record:{last_read_message_id:o,unread_count:0}}));case 39:return v.next=41,(0,on.put)(Xo({type:Vo.MARK_AS_READ,conversation:{id:r,shop_id:h,unread_count:O}}));case 41:v.next=47;break;case 43:return v.prev=43,v.t0=v.catch(1),v.next=47,(0,on.put)(y_({error:v.t0}));case 47:case"end":return v.stop()}}),pp,null,[[1,43]])}function Op(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(al,Sp);case 2:case"end":return e.stop()}}),fp)}const hp=(e(dp={},Ji.MARK_MESSAGES_SUCCEEDED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.markType;return Ep(Ep({},t),{},{conversationMark:Ep(Ep({},t.conversationMark),{},e({},o,a))})})),e(dp,Ji.UPDATE_READ_REQUEST_DATA,(function(e,t){var r=t.payload,n=r.requestId,o=r.requestIds,a=r.count,c=Ep({},e);return n&&(c.readRequestIds=[n].concat(e.readRequestIds)),o&&(c.readRequestIds=o),a&&(c.missedReadNoticeCount=a),c})),dp);var vp,Tp=Ct().mark(gp),mp=Ct().mark(bp);function gp(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.conversationId,a.prev=1,a.next=5,(0,on.select)(Fa);case 5:if(!a.sent){a.next=10;break}return a.next=10,(0,on.put)(Yv({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 10:return a.next=12,(0,on.select)(Iu(t));case 12:return r=a.sent,n=r.shop_id,o=r.status,a.next=17,(0,on.call)(hr,{method:"PUT",resource:"conversations",id:t,suffix:"status",payload:JSON.stringify({shop_id:n,status:vp[o]})});case 17:a.next=23;break;case 19:return a.prev=19,a.t0=a.catch(1),a.next=23,(0,on.put)(y_({error:a.t0}));case 23:case"end":return a.stop()}}),Tp,null,[[1,19]])}function bp(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(_l,gp);case 2:case"end":return e.stop()}}),mp)}!function(e){e.activated="closed",e.closed="activated"}(vp||(vp={}));var yp=Ct().mark(Dp),Rp=Ct().mark(Ap);function Dp(e){var t,r,n,o,a,c,s,i,u,l,d,p,f;return Ct().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload.conversationId,_.prev=1,_.next=4,(0,on.select)(Iu(t));case 4:return r=_.sent,n=r.id,o=r.unread_count,a=r.shop_id,_.next=8,(0,on.select)(cu);case 8:return c=_.sent,_.next=11,(0,on.call)(hr,{resource:"conversations",id:t,params:{shop_id:a}});case 11:if(s=_.sent,i=s.flag,u=s.entry_point,l=s.unread_count,d=s.latest_message_id,n){_.next=19;break}return p=T("conversations",s),f=p.entities,_.next=17,(0,on.put)(Oo({entities:f}));case 17:_.next=21;break;case 19:return _.next=21,(0,on.put)(ho({name:"conversations",id:t,record:{flag:i,entry_point:u,unread_count:l}}));case 21:if(o||o===s.unread_count){_.next=24;break}return _.next=24,(0,on.put)(Xo({conversation:s,type:Vo.ACTIVE_CONVERSATION}));case 24:if(t!==c){_.next=28;break}if(!(l>0)){_.next=28;break}return _.next=28,(0,on.put)(al({conversationId:t,isRead:!0,latestMessageId:d}));case 28:return _.abrupt("return",s);case 31:return _.prev=31,_.t0=_.catch(1),_.abrupt("return",{});case 34:case"end":return _.stop()}}),yp,null,[[1,31]])}function Ap(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Ju,Dp);case 2:case"end":return e.stop()}}),Rp)}function Cp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ip(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Cp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Pp=e({},Ji.FAKE_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload.conversationId;return Ip(Ip({},e),{},{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));var wp=Ct().mark(Mp),Np=Ct().mark(Lp);function Up(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Up(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Up(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kp={restart:_l,delete:zu,read:al,unread:al,pin:il,unpin:il,mute:Cl,unmute:Cl};function Mp(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.type,n=t.extra,o=kp[r],a.next=4,(0,on.put)(o(xp({},n)));case 4:case"end":return a.stop()}}),wp)}function Lp(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Sl,Mp);case 2:case"end":return e.stop()}}),Np)}function jp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}kp.close=_l;var Fp={hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"},Hp=function(e){var t={},r=e.length;return Object.keys(Fp).forEach((function(n){t[n]=!r||e.includes(Fp[n])})),t};const Vp=e({},Ji.UPDATE_ACCESS,(function(e,t){var r=Hp(t.payload.access);return Gp(Gp({},e),{},{access:r})}));var Bp=["combine","user","orderId","message","agent","agentMessage"];function Yp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Yp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wp=Ct().mark(qp);function qp(){var e,t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,on.select)(au);case 2:return e=i.sent,i.prev=3,i.next=6,(0,on.call)(hr,{subServer:"coreapi",parent:"conversation",resource:"updated_conversation_list",params:{last_update_time:e}});case 6:if(t=i.sent,r=t.conversations,n=t.page_result,!(r.length>0)){i.next=13;break}return o={},r.forEach((function(e){o[e.id]=e})),i.next=13,(0,on.put)(To({name:"conversations",records:o}));case 13:if(c=(a=n||{}).has_more,!(s=a.next_last_update_time)){i.next=17;break}return i.next=17,(0,on.put)(gl({timeNow:s}));case 17:if(!(c&&r.length>0)){i.next=20;break}return i.next=20,(0,on.call)(qp);case 20:i.next=29;break;case 22:if(i.prev=22,i.t0=i.catch(3),!(i.t0 instanceof ft)){i.next=29;break}return i.next=27,(0,on.put)(gl({timeNow:"0"}));case 27:return i.next=29,(0,on.call)(ap,{payload:{direction:"reset"}});case 29:case"end":return i.stop()}}),Wp,null,[[3,22]])}const Kp=e({},Ji.UPDATE_SYNC_TIME_NOW,(function(e,t){var r=t.payload.timeNow;return Qp(Qp({},e),{},{updateTimeNow:r})}));var zp,Xp,Jp=Ct().mark(Zp),$p=Ct().mark(ef);function Zp(e){var t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.conversationId,i.prev=1,i.next=4,(0,on.select)(Iu(t));case 4:return r=i.sent,n=r.shop_id,o=r.mute,i.next=9,(0,on.select)(Da);case 9:return a=i.sent,c={biz_type:a?2:0},n&&(c.shop_id=n),s={method:"PUT",parent:"conversations",parentId:t,resource:o?"unmute":"mute",payload:JSON.stringify(c)},i.next=15,(0,on.call)(hr,s);case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,(0,on.put)(y_({error:i.t0}));case 21:case"end":return i.stop()}}),Jp,null,[[1,17]])}function ef(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Cl,Zp);case 2:case"end":return e.stop()}}),$p)}var tf=Ct().mark(lf),rf=Ct().mark(df);function nf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function of(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?nf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var af=(0,dr.createActions)((e(zp={},Ji.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.shopId;return{keyword:r,shopId:void 0===n?"":n}})),e(zp,Ji.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e){return{results:e.results,searchStatus:e.searchStatus}})),e(zp,Ji.UPDATE_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}})),zp)),cf=af.searchConversationsRequested,sf=af.searchConversationsSucceeded,uf=af.updateSearchParams;function lf(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.keyword,r=[],n=t.trim(),s.next=5,(0,on.put)(uf({keyword:n,searchStatus:A.DataFetchStatus.INIT_PENDING}));case 5:if(!n){s.next=15;break}return o=n.toLocaleLowerCase(),s.next=9,(0,on.select)((function(e){return e.entityReducer}));case 9:return a=s.sent,c=a.shops,s.next=13,(0,on.select)(lu);case 13:s.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(o)&&!e.faking&&r.push(of(of({},e),{},{shop_name:(c[e.shop_id]||{}).name}))}));case 15:return s.next=17,(0,on.put)(sf({results:r,searchStatus:A.DataFetchStatus.SUCCEED}));case 17:case"end":return s.stop()}}),tf)}function df(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)(cf,lf);case 2:case"end":return e.stop()}}),rf)}const pf=(e(Xp={},Ji.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.results,o=r.searchStatus;return of(of({},e),{},{results:n,searchStatus:o})})),e(Xp,Ji.UPDATE_SEARCH_PARAMS,(function(e,t){var r=t.payload,n=r.keyword,o=r.searchStatus;return of(of({},e),{},{keyword:n,searchStatus:o})})),Xp);var ff,_f=y(439).t;function Ef(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ef(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ef(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Of=Ct().mark(Tf),hf=Ct().mark(mf);function vf(e,t){return hr({parent:"conversation",resource:"conversation_info",params:{shop_id:t,message_id:e}})}function Tf(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h;return Ct().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.msgId,n=t.shopId,v.next=3,(0,on.select)(jE);case 3:return o=v.sent,a={},c=o.find((function(e){return e.id===r})),v.next=8,(0,on.put)(ml({inlocation:!0}));case 8:if(!c){v.next=16;break}return s=c.conversation_id,v.next=12,(0,on.select)(Iu(s));case 12:return a=v.sent,v.next=15,(0,on.call)(wd,{payload:{conversation:a,messageId:r,messageList:[]}});case 15:En.emit("scrollToMessage",r);case 16:if(a.id){v.next=58;break}return v.prev=17,v.next=20,(0,on.all)([(0,on.call)(vf,r,n),Uc().call(kc().fetchConversationMessagesSaga({payload:{msgId:r,shopId:n}}))]);case 20:if(i=v.sent,u=D(i,2),l=u[0],d=u[1],p=(l||{}).conversation_info,f=void 0===p?[]:p,_=(d||{}).get_messages,0!==(E=void 0===_?[]:_).length&&E.find((function(e){return e.id===r}))){v.next=28;break}throw new Error("message_not_found");case 28:if(!(a=f[0])){v.next=39;break}return S=T("conversations",a),O=S.entities,v.next=33,Uc().put(kc().deleteConversationMessageHash({payload:{conversationId:a.id}}));case 33:return v.next=35,(0,on.put)(Oo({entities:O}));case 35:return v.next=37,(0,on.delay)(300);case 37:return v.next=39,(0,on.call)(wd,{payload:{conversation:a,messageId:r,messageList:E}});case 39:v.next=58;break;case 41:v.prev=41,v.t0=v.catch(17),h=_f("common.server_error.warning_tips"),v.t1=v.t0.message,v.next="message_not_found"===v.t1?47:"conversation_not_found"===v.t1?49:55;break;case 47:return h=_f("message.server_error.not_found"),v.abrupt("break",56);case 49:return h=_f("conversation.server_error.deleted"),v.next=52,(0,on.put)(Al({conversationBeenDeleted:!0}));case 52:return v.next=54,(0,on.put)(pl());case 54:case 55:return v.abrupt("break",56);case 56:return v.next=58,(0,on.call)(P_,y_({toast:{show:!0,type:"fail",message:h}}));case 58:case"end":return v.stop()}}),Of,null,[[17,41]])}function mf(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)(Tl,Tf);case 2:case"end":return e.stop()}}),hf)}const gf=(e(ff={},Ji.UPDATE_LOCATION_MODE,(function(e,t){var r=t.payload.inlocation;return Sf(Sf({},e),{},{inlocation:r})})),e(ff,Ji.SET_CONVERSATION_BEEN_DELETED,(function(e,t){var r=t.payload.conversationBeenDeleted;return Sf(Sf({},e),{},{conversationBeenDeleted:r})})),ff);function bf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?bf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Rf,Df,Af,Cf,If=[hd,xd,Ml,Op,bp,ip,Ap,Lp,ef,df,mf],Pf=(Rf={},Bp.forEach((function(e){Rf[e]={pageIndex:1,pageSize:20,hasMore:!0,nextOffset:"0"}})),Df={},Bp.forEach((function(e){Df[e]={status:"",results:[],total:0}})),{conversationIds:[],conversationIdsMap:{},maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},status:"",hasMore:!0,persist:null,results:[],direction:"",searchStatus:"",inlocation:!1,conversationBeenDeleted:!1,syncFetchException:0,conversationMark:{},readRequestIds:[],missedReadNoticeCount:0,access:Hp([]),updateTimeNow:"0",isNavigateToUnreadMessage:!1,navigateToUnreadMessageId:"",pendingOffersCount:{},nextMessageTimeNano:""}),wf=(0,dr.handleActions)(yf(yf(yf(yf(yf(yf(yf(yf(yf(yf(yf({},vd),kd),Md),lp),up),Pp),hp),Vp),pf),gf),Kp),Pf),Nf=function(e){return(0,Wn.createSelector)(co,(function(r){return(0,t.denormalize)(e,p,{shops:r})}))},Uf=function(e){return e.shopReducer.fetchedShopIds},xf=(0,Wn.createSelector)(Tu,co,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),kf=(0,Wn.createSelector)(xu,Kn,(function(e,r){return(0,t.denormalize)(e,p,r)||{}}));!function(e){e.FETCH_SHOPS_REQUESTED="FETCH_SHOPS_REQUESTED",e.FETCH_SHOPS_SUCCEED="FETCH_SHOPS_SUCCEED",e.UPDATE_FETCH_SHOPS_STATUS="UPDATE_FETCH_SHOPS_STATUS",e.FETCH_SHOP_AUTH_REQUESTED="FETCH_SHOP_AUTH_REQUESTED",e.UPDATE_FETCHED_SHOP_IDS="UPDATE_FETCHED_SHOP_IDS",e.UPDATE_SHOP_FILTER="UPDATE_SHOP_FILTER",e.VISIT_SHOP_SELLER_CENTER_REQUESTED="VISIT_SHOP_SELLER_CENTER_REQUESTED",e.VISIT_MALL_REQUESTED="VISIT_MALL_REQUESTED",e.SEARCH_SHOPS_REQUESTED="SEARCH_SHOPS_REQUESTED",e.SEARCH_SHOPS_SUCCEED="SEARCH_SHOPS_SUCCEED",e.UPDATE_SEARCH_SHOPS_STATUS="UPDATE_SEARCH_SHOPS_STATUS",e.FETCH_SHOP_DETAIL_INFO="FETCH_SHOP_DETAIL_INFO",e.UPDATE_CURRENT_FETCH_SHOP_IDS="UPDATE_CURRENT_FETCH_SHOP_IDS",e.RESET_CURRENT_FETCH_SHOPS="RESET_CURRENT_FETCH_SHOPS"}(Af||(Af={}));var Mf=(0,dr.createActions)((e(Cf={},Af.FETCH_SHOPS_REQUESTED,(function(){return{}})),e(Cf,Af.FETCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result}})),e(Cf,Af.UPDATE_FETCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(Cf,Af.FETCH_SHOP_AUTH_REQUESTED,(function(e){return{shopId:e.shopId}})),e(Cf,Af.UPDATE_FETCHED_SHOP_IDS,(function(e){return{shopIds:e.shopIds}})),e(Cf,Af.UPDATE_SHOP_FILTER,(function(e){return{filter:e.filter}})),e(Cf,Af.VISIT_SHOP_SELLER_CENTER_REQUESTED,(function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId}})),e(Cf,Af.SEARCH_SHOPS_REQUESTED,(function(e){return{keyword:e.keyword}})),e(Cf,Af.SEARCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result,keyword:e.keyword}})),e(Cf,Af.UPDATE_SEARCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(Cf,Af.FETCH_SHOP_DETAIL_INFO,(function(e){return{shopId:e.shopId}})),Cf)),Lf=Mf.fetchShopsRequested,jf=(Mf.fetchShopsSucceed,Mf.updateFetchShopsStatus,Mf.fetchShopAuthRequested),Gf=Mf.updateFetchedShopIds,Ff=Mf.updateShopFilter,Hf=Mf.visitShopSellerCenterRequested,Vf=Mf.searchShopsRequested,Bf=(Mf.searchShopsSucceed,Mf.updateSearchShopsStatus,Mf.fetchShopDetailInfo),Yf=Ct().mark(Wf),Qf=Ct().mark(qf);function Wf(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.shopId,a.prev=1,a.next=4,(0,on.select)(Nf(t));case 4:return r=a.sent,a.next=7,(0,on.call)(hr,{resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});case 7:return r=a.sent,n=T("shops",r),o=n.entities,a.next=11,(0,on.put)(Oo({entities:o}));case 11:return a.next=13,(0,on.put)(Gf({shopIds:[r.id]}));case 13:return a.abrupt("return",r);case 16:return a.prev=16,a.t0=a.catch(1),a.abrupt("return",{});case 19:case"end":return a.stop()}}),Yf,null,[[1,16]])}function qf(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Bf,Wf);case 2:case"end":return e.stop()}}),Qf)}function Kf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Kf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Xf=e({},Af.UPDATE_SHOP_FILTER,(function(e,t){var r=t.payload.filter;return zf(zf({},e),{},{shopFilter:r})}));var Jf,$f=Ct().mark(e_),Zf=Ct().mark(t_);function e_(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R;return Ct().wrap((function(D){for(;;)switch(D.prev=D.next){case 0:return t=e.payload,r=t.url,n=t.shopId,o=t.orderId,a=t.itemId,D.prev=1,D.next=4,(0,on.call)(hr,{resource:"shop",id:n,suffix:"sc"});case 4:if(c=D.sent,s=c.sc_url,i=c.upgraded,u=c.region,!i){D.next=12;break}return l=window.open(),r?((d=r.split("/"))[2]=(0,A.getSellerCenterUrl)(u),p=d.join("/"),l.location=p.includes("?")?"".concat(p,"&cnsc_shop_id=").concat(n):"".concat(p,"?cnsc_shop_id=").concat(n)):l.location=o?"https://".concat((0,A.getSellerCenterUrl)(u),"/portal/sale/").concat(o,"?cnsc_shop_id=").concat(n):a?"https://".concat((0,A.getSellerCenterUrl)(u),"/portal/product/").concat(a,"?cnsc_shop_id=").concat(n):"https://".concat((0,A.getSellerCenterUrl)(u),"?cnsc_shop_id=").concat(n),D.abrupt("return");case 12:if(!s){D.next=25;break}if(f=s.split("?"),_=f[1].split("&").find((function(e){return e.startsWith("sig=")})),E=_.substring(4),S=f[0].split("."),O=S[S.length-1],h=window.open(),!r){D.next=22;break}return h.location=r.includes("?")?"".concat(r,"&sig=").concat(E):"".concat(r,"?sig=").concat(E),D.abrupt("return");case 22:o||a?o?(v="https://".concat((0,A.getSellerCenterUrl)(O),"/portal/sale/").concat(o,"?sig=").concat(E),h.location=v):a&&(T="https://".concat((0,A.getSellerCenterUrl)(O),"/portal/product/").concat(a,"?sig=").concat(E),h.location=T):(m="https://".concat((0,A.getSellerCenterUrl)(O),"?sig=").concat(E),h.location=m),D.next=28;break;case 25:return g=m_(!1,{type:"permission-denied"}),D.next=28,(0,on.put)(y_({toast:g}));case 28:D.next=38;break;case 30:return D.prev=30,D.t0=D.catch(1),D.next=34,(0,on.select)(Nf(n));case 34:b=D.sent,y="https://".concat((0,A.getSellerCenterUrl)(b.country),"/portal/"),R=o?"sale/".concat(o):a?"product/".concat(a):"",window.open(y+R);case 38:case"end":return D.stop()}}),$f,null,[[1,30]])}function t_(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Hf,e_);case 2:case"end":return e.stop()}}),Zf)}function r_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?r_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var o_=Ct().mark(i_),a_=Ct().mark(u_),c_=function(e){return new Promise((function(t){hr({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))},s_=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){hr({resource:"shops",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function i_(e){var t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.shopId,n.prev=1,n.next=4,(0,on.call)(hr,{parent:"shop",parentId:t,resource:"auth"});case 4:return r=n.sent,n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",{});case 11:case"end":return n.stop()}}),o_,null,[[1,8]])}function u_(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(jf,i_);case 2:case"end":return e.stop()}}),a_)}const l_=(e(Jf={},Af.FETCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result;return n_(n_({},e),{},{fetchResult:n_(n_({},e.fetchResult),{},{pagination:n,result:o})})})),e(Jf,Af.SEARCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result,a=r.keyword;return n_(n_({},e),{},{searchResult:n_(n_({},e.searchResult),{},{pagination:n,result:o,keyword:a})})})),e(Jf,Af.UPDATE_FETCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return n_(n_({},e),{},{status:r})})),e(Jf,Af.UPDATE_SEARCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return n_(n_({},e),{},{searchStatus:r})})),e(Jf,Af.UPDATE_FETCHED_SHOP_IDS,(function(e,t){var r=t.payload.shopIds,n=e.fetchedShopIds;return n_(n_({},e),{},{fetchedShopIds:Wt(new Set(n.concat(r)))})})),Jf);function d_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?d_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f_,__,E_={currentPage:0,perPage:20,hasMore:!0},S_=[qf,u_,t_],O_={shopFilter:null,fetchedShopIds:[],fetchResult:{pagination:p_({},E_),result:[]},status:"",searchResult:{pagination:p_({},E_),result:[],keyword:""},searchStatus:""},h_=(0,dr.handleActions)(p_(p_({},Xf),l_),O_),v_=function(e){return e.toastReducer.toast},T_=y(439).t,m_=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=T_("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=T_("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?T_("settings.failed_to_enable"):T_("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?T_("settings.message.save_successfully"):"delete"===t.action?T_("settings.message.delete_successfully"):T_("settings.message.import_successfully"):"save"===t.action?T_("settings.message.failed_to_save"):"delete"===t.action?T_("settings.message.failed_to_delete"):T_("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?T_("settings.failed_to_enable"):T_("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?T_("forward.exception",{forwardName:""}):T_("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=T_("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=T_("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=T_("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=T_("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=T_(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"private-image":r.message=T_("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=T_(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(f_||(f_={}));var g_=(0,dr.createActions)((e(__={},f_.COPY_SUCCEED_FEEDBACK,(function(){return{}})),e(__,f_.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),e(__,f_.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),__)),b_=g_.copySucceedFeedback,y_=g_.setToastInformation,R_=g_.setToastInformationSucceeded;function D_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?D_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C_=Ct().mark(P_),I_=Ct().mark(w_);function P_(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.type,n=t.error,o=t.toast,c.next=3,(0,on.select)(La);case 3:if(!c.sent){c.next=11;break}return a=null,r&&(a=m_(!1,{type:r})),void 0!==n&&(a=n instanceof ft||n instanceof St?n.handler():m_(!1,{type:"server-error-tips"})),o&&(a=o),c.next=11,(0,on.put)(R_({toast:a}));case 11:case"end":return c.stop()}}),C_)}function w_(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(y_,P_);case 2:case"end":return e.stop()}}),I_)}const N_=e({},f_.SET_TOAST_INFORMATION_SUCCEEDED,(function(e,t){var r=t.payload.toast;return A_(A_({},e),{},{toast:r})}));var U_=y(439).t,x_=Ct().mark(M_),k_=Ct().mark(L_);function M_(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.put)(y_({toast:m_(!0,{message:U_("common.successful_copied")})}));case 2:case"end":return e.stop()}}),x_)}function L_(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(b_,M_);case 2:case"end":return e.stop()}}),k_)}function j_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var G_=[w_,L_],F_=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?j_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},N_),{toast:{type:"",message:"",show:!1}});function H_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?H_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B_,Y_,Q_=A.MessageTypes.MSG_TYPE_OFFER,W_=A.MessageTypes.MSG_TYPE_ORDER,q_=A.MessageTypes.MSG_TYPE_PRODUCT,K_=A.MessageTypes.MSG_TYPE_IMAGE,z_=A.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,X_=A.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,J_=A.MessageTypes.MSG_TYPE_VIDEO,$_=A.MessageTypes.MSG_TYPE_NOTIFICATION,Z_=A.MessageTypes.MSG_TYPE_RATE_CARD,eE=A.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,tE=[W_,q_],rE=function(e){return(e.messageReducer||{}).faqHistoryStatus},nE=function(e){return(e.messageReducer||{}).faqHistoryHash},oE=function(e){return(e.messageReducer||{}).faqId},aE=(0,Wn.createSelector)(nE,oE,(function(e,t){return e&&t&&e[t]||{all:[]}})),cE=function(e){return(e.messageReducer||{}).status},sE=(0,Wn.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),iE=function(e){return e.messageReducer.offlineMessages},uE=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},lE=function(e){return(0,Wn.createSelector)(uE,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},dE=function(e){return(0,Wn.createSelector)(uE,(function(t){return Object.keys(t).find((function(r){return t[r].vid===e}))}))},pE=function(e){return(0,Wn.createSelector)($n,(function(r){return(0,t.denormalize)(e,c,{messages:r})}))},fE=function(e){return(0,Wn.createSelector)($n,(function(r){return(0,t.denormalize)(e,[c],{messages:r})}))},_E=(0,Wn.createSelector)(cu,sE,(function(e,t){return t[e]||{all:[]}})),EE=function(e){return(0,Wn.createSelector)(sE,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},SE=function(e){return(e.messageReducer||{}).messageFillStatusMap||{}},OE=Yn((function(e){return(0,Wn.createSelector)(EE(e),Iu(e),$n,(function(e,t,r){return fd(e,t,r)}))})),hE=(0,Wn.createSelector)(_E,(function(e){var t=Wt(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),vE=(0,Wn.createSelector)(_E,(function(e){return e.sending||[]})),TE=(0,Wn.createSelector)(_E,(function(e){return e.failed||[]})),mE=(0,Wn.createSelector)(_E,(function(e){return e.hasMoreOlderMessage})),gE=(0,Wn.createSelector)(_E,(function(e){return e.hasMoreLatestMessage})),bE=(0,Wn.createSelector)(_E,(function(e){return e.hasNext})),yE=function(e){return e.messageReducer.entryPoint},RE=function(e){return e.messageReducer.toBottomHasConflict},DE=(0,Wn.createSelector)($n,hE,(function(e,r){return((0,t.denormalize)(r,[c],{messages:e})||[]).filter(Boolean)})),AE=function(e){return(0,Wn.createSelector)(EE(e),$n,(function(e,r){return((0,t.denormalize)(e.all,[c],{messages:r})||[]).filter((function(e){return null==e?void 0:e.isFaking}))}))},CE=(0,Wn.createSelector)(DE,(function(e){return e.reverse()})),IE=(0,Wn.createSelector)(CE,Tu,(function(e,t){var r=0,n=[];return e.forEach((function(e,o){var a=(0,A.getMessageIsSend)(e,t);e.warning&&!a&&(o-r<10&&n.pop(),n.push(e.id),r=o)})),n})),PE=(0,Wn.createSelector)(Tu,CE,(function(e,t){if(!e)return[];var r=e.last_read_message_id;return t.filter((function(t){var n=(0,A.getMessageIsSend)(t,e);return t&&!n&&(0,A.greaterThan)(t.id,r)&&t.type!==$_}))})),wE=(0,Wn.createSelector)(Kn,aE,(function(e,r){var n=r.all;return(0,t.denormalize)(n,[c],e)})),NE=(0,Wn.createSelector)(wE,CE,(function(e,t){return(e&&e.length?e:t).filter((function(e){var t=(e||{}).type;return!(0,A.isDeletedMessage)(e)&&[K_,J_,eE].includes(t)}))})),UE=(0,Wn.createSelector)(NE,Tu,gu,ya,Nu,(function(e,t,r,n,o){var a=r&&r.country||"sg",c=(0,A.getVideoServer)(a);return e.map((function(e){var r="",a=!1,s=(0,A.getMessageIsSend)(e,t);switch(e.type){case K_:var i=e.content;r=1!==i.file_server_id&&i.url_hash?"".concat((0,A.getFileServer)()).concat(i.url_hash):i.url||i.localUrl,a=i.unknown_qr_code&&!s;break;case J_:var u=e.content;r=u.video_url?"".concat(c).concat(u.video_url):u.localVideoUrl;break;case eE:var l=e.content;r=l.thumb_url?"".concat((0,A.getFileServer)()).concat(l.thumb_url):l.image_url}var d=e.id,p=e.type,f=e.request_id,_=e.content;return{type:p,id:d,url:r,unknownQrCode:a,trackerData:{shopid:o,account_type:n.role||"shopee_user",message_id:d===f?0:d,conversation_id:t.id,account_id:n.id,is_sender:s,video_original_duration:_.duration_seconds}}}))})),xE=(0,Wn.createSelector)(PE,(function(e){return e.length?e.map((function(e){return e.id})):[]})),kE=(0,Wn.createSelector)(Tu,CE,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var r=t.type,n=t.source_type,o=t.source_content,a=t.content;if(!n||r===Q_||[-1,0].includes(o["".concat(n,"_id")]))return e;if(tE.includes(r)&&o){var c="".concat(r,"_id");if(a[c]===o[c])return e}var s=e.lastSourceMessage,i=e.sourceList;if(!i.length)return{sourceList:i.concat(t),lastSourceMessage:t};if(n===q_){var u=null==o?void 0:o.product_id,l=s.source_content&&s.source_content.product_id;if(!u||l===u)return e}else if(n===W_){var d=null==o?void 0:o.order_id,p=s.source_content&&s.source_content.order_id;if(!d||[-1,0,p].includes(d))return e}return{sourceList:i.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),ME=(0,Wn.createSelector)(kE,(function(e){return e.map((function(e){return e.id}))})),LE=(0,Wn.createSelector)(Kn,DE,(function(e,r){var n=r.filter((function(e){return e&&e.type===Q_})).map((function(e){return e.content.offer_id}));return(0,t.denormalize)(n,[l],e)})),jE=(0,Wn.createSelector)(CE,ME,vE,TE,Tu,ao,LE,(function(e,t,r,n,o,a,c){return o?e.filter((function(e){if(!e)return!1;var t=e.content,r=e.type;return!(![z_,X_].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=r.includes(e.id)?A.MessageSendStatus.SENDING:n.includes(e.id)?A.MessageSendStatus.FAILED:e.send_status?A.MessageSendStatus.SUCCEED:null,s=t.includes(e.id),i=Object.assign({},e,{send_status:o,hasMessageSource:s}),u=i,l=u.type,d=u.content,p=void 0===d?{}:d,f=u.message_option;switch(l){case Q_:var _=c.find((function(e){return e&&e.id===p.offer_id}));i=Object.assign({},i,{textContent:_});break;case Z_:var E=a[p.card_id];E&&(i=Object.assign({},i,{textContent:E}))}return(0,A.hasTargetMessageOption)(f,A.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(i=V_(V_({},i),{},{send_status:A.MessageSendStatus.FAILED,errorCode:A.MessageErrorCode.BLACKLIST})),i})):[]})),GE=function(e){return(0,Wn.createSelector)(ao,(function(r){return(0,t.denormalize)(e,E,{rateCards:r})}))},FE=(0,Wn.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),HE=(0,Wn.createSelector)(cu,FE,(function(e,t){return t[e]||""})),VE=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.scrollToMessageId},BE=(0,Wn.createSelector)(HE,$n,(function(e,r){return(0,t.denormalize)(e,c,{messages:r})})),YE=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.inScrollToMessage},QE=function(e){return e.messageReducer.imageUrl},WE=function(e){return e.messageReducer.faqSessions||{}},qE=(0,Wn.createSelector)(cu,WE,(function(e,t){return t[e]||{}})),KE=function(e){return e.messageShortcutGroupReducer},zE=function(e){return e.messageShortcutGroupReducer&&e.messageShortcutGroupReducer.currentGroupType},XE=(0,Wn.createSelector)(KE,zE,(function(e,t){return e&&e[t]||{groups:[],status:""}})),JE=(0,Wn.createSelector)(XE,(function(e){return e.status})),$E=(0,Wn.createSelector)(XE,(function(e){return e.currentGroupId})),ZE=(0,Wn.createSelector)(XE,(function(e){var t=e.groups,r=void 0===t?[]:t,n=e.currentGroupId,o=(r.find((function(e){return e.id===n}))||{}).message_shortcuts;return void 0===o?[]:o})),eS=(0,Wn.createSelector)(KE,(function(e){var t=(e&&e[A.MessageShortcutGroupType.PERSONAL]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),tS=(0,Wn.createSelector)(KE,(function(e){var t=(e&&e[A.MessageShortcutGroupType.TEAM]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),rS=(0,Wn.createSelector)(eS,tS,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Wt(e),Wt(t))})),nS=function(e){return e.settingsReducer.settings},oS=function(e){return e.settingsReducer.needForceUpdate},aS=function(e){return e.settingsReducer.status},cS=function(e){return e.settingsReducer.fetchStatus},sS=(0,Wn.createSelector)(nS,(function(e){return e.auto_translation_status||""})),iS=(0,Wn.createSelector)(nS,(function(e){return e.show_msg_time||"enabled"})),uS=(0,Wn.createSelector)(nS,(function(e){return e.message_shortcuts_status||""})),lS=(0,Wn.createSelector)(nS,(function(e){return e.legacy_message_shortcuts_count||0})),dS=(0,Wn.createSelector)(nS,(function(e){return e.distribution_account_status||"enabled"}));!function(e){e.FETCH_SETTINGS_REQUESTED="FETCH_SETTINGS_REQUESTED",e.FETCH_SETTINGS_SUCCEEDED="FETCH_SETTINGS_SUCCEEDED",e.FETCH_SETTINGS_STATUS="FETCH_SETTINGS_STATUS",e.UPDATE_SETTING_STATUS="UPDATE_SETTING_STATUS",e.UPDATE_SETTINGS_REQUESTED_BY_TYPE="UPDATE_SETTINGS_REQUESTED_BY_TYPE",e.UPDATE_SETTINGS_REQUESTED="UPDATE_SETTINGS_REQUESTED",e.UPDATE_SETTINGS_SUCCEEDED="UPDATE_SETTINGS_SUCCEEDED"}(B_||(B_={}));var pS,fS=(0,dr.createActions)((e(Y_={},B_.FETCH_SETTINGS_REQUESTED,(function(){return{}})),e(Y_,B_.FETCH_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,fetchStatus:e.fetchStatus,timestamp:e.timestamp,needForceUpdate:e.needForceUpdate}})),e(Y_,B_.FETCH_SETTINGS_STATUS,(function(e){return{fetchStatus:e.fetchStatus}})),e(Y_,B_.UPDATE_SETTING_STATUS,(function(e){return{status:e.status}})),e(Y_,B_.UPDATE_SETTINGS_REQUESTED_BY_TYPE,(function(e){return e})),e(Y_,B_.UPDATE_SETTINGS_REQUESTED,(function(e){return{params:e.params}})),e(Y_,B_.UPDATE_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,needForceUpdate:e.needForceUpdate}})),Y_)),_S=fS.fetchSettingsRequested,ES=fS.fetchSettingsSucceeded,SS=fS.fetchSettingsStatus;function OS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?OS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}fS.updateSettingStatus,fS.updateSettingsRequestedByType,fS.updateSettingsRequested,fS.updateSettingsSucceeded;var vS=Ct().mark(mS),TS=Ct().mark(gS);function mS(){var e;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,on.put)(SS({fetchStatus:A.DataFetchStatus.PENDING}));case 3:return t.next=5,(0,on.call)(hr,{parent:"user",resource:"setting"});case 5:return e=t.sent,t.next=8,(0,on.put)(ES({settings:e,fetchStatus:A.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 8:return t.abrupt("return",e);case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,(0,on.put)(SS({fetchStatus:A.DataFetchStatus.FAILED}));case 15:return t.abrupt("return",{});case 16:case"end":return t.stop()}}),vS,null,[[0,11]])}function gS(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)([_S],mS);case 2:case"end":return e.stop()}}),TS)}const bS=(e(pS={},B_.FETCH_SETTINGS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.settings,o=r.fetchStatus,a=r.timestamp,c=r.needForceUpdate;return hS(hS({},e),{},{settings:n,fetchStatus:o,timestamp:a,needForceUpdate:c})})),e(pS,B_.FETCH_SETTINGS_STATUS,(function(e,t){var r=t.payload.fetchStatus;return hS(hS({},e),{},{fetchStatus:r})})),pS);function yS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var RS,DS,AS=[gS],CS=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?yS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},bS),{settings:{},fetchStatus:""}),IS={currentPage:0,perPage:20,total:0,hasMore:!0},PS=function(e){return e.offerReducer.status},wS=(0,Wn.createSelector)(Kn,(function(e){return e.offers||{}})),NS=function(e,t,r,n){return(0,Wn.createSelector)(wS,(function(o){return Object.values(o).filter((function(o){return o.product_id===n&&o.model_id===t&&o.conversation_id===e&&o.id!==r&&o.status===A.OfferStatus.PENDING}))}))},US=function(e){return(0,Wn.createSelector)(Kn,(function(r){return(0,t.denormalize)(e,l,r)}))},xS=function(e){return e.offerReducer.fetchResult},kS=function(e,t){return(0,Wn.createSelector)(xS,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:IS,result:[]}}))},MS=(0,Wn.createSelector)(xS,Tu,(function(e,t){var r=t.shop_id,n=t.to_id,o=e["".concat(r,"_").concat(n)];return o?o.pagination:IS})),LS=(0,Wn.createSelector)(xS,Tu,Kn,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[l],n).filter((function(e){return e}))})),jS=(0,dr.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;!function(e){e.REMOVE_SINGLE_DRAFT="REMOVE_SINGLE_DRAFT",e.REMOVE_ALL_DRAFT="REMOVE_ALL_DRAFT",e.BATCH_REMOVE_DRAFT="BATCH_REMOVE_DRAFT",e.SAVE_DRAFT="SAVE_DRAFT"}(RS||(RS={}));const GS=(e(DS={},RS.REMOVE_SINGLE_DRAFT,zl),e(DS,RS.REMOVE_ALL_DRAFT,Xl),e(DS,RS.BATCH_REMOVE_DRAFT,Jl),DS),FS=e({},RS.SAVE_DRAFT,$l);var HS,VS=(0,dr.createActions)((e(HS={},RS.REMOVE_SINGLE_DRAFT,(function(e){return{conversationId:e.conversationId}})),e(HS,RS.REMOVE_ALL_DRAFT,(function(){return{}})),e(HS,RS.BATCH_REMOVE_DRAFT,(function(e){return{conversationIds:e.conversationIds}})),e(HS,RS.SAVE_DRAFT,(function(e){return{conversationId:e.conversationId,draft:e.draft}})),HS)),BS=VS.removeSingleDraft,YS=VS.removeAllDraft,QS=VS.batchRemoveDraft,WS=VS.saveDraft;function qS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?qS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zS=(0,dr.handleActions)(KS(KS({},FS),GS),{draftHash:{}}),XS=function(e){return e.draftReducer.draftHash},JS=function(e){return(0,Wn.createSelector)(XS,(function(t){return t[e]}))},$S=(0,Wn.createSelector)(cu,XS,(function(e,t){return e&&t[e]}));function ZS(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?eO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rO,nO=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.exceptionType,a=e.reconnectCount,c=void 0===a?0:a,s=e.exceptionReason,i=void 0===s?"":s,u={status:-1,userId:t,userType:r};if(o===A.SocketConnectionStatus.DISCONNECT){var l=c<=5?"s":c<=10?"m":"l";u=tO(tO({},u),{},{reconnectType:l,exceptionReason:i,exceptionType:o})}else u=tO(tO({},u),{},{exceptionType:o});Xr(qr[n?"SOCKET_FAILED":"CHATWS_SOCKET_FAILED"],0,u)};!function(e){e.FEEDBACK_REQUESTED="FEEDBACK_REQUESTED",e.FEEDBACK_SUCCEEDED="FEEDBACK_SUCCEEDED",e.UPDATE_RECONNECT_FLAG="UPDATE_RECONNECT_FLAG",e.UPDATE_NOTICES_COUNT="UPDATE_NOTICES_COUNT"}(rO||(rO={}));var oO=y(439).t,aO=["type"];function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?cO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var iO,uO,lO=Ct().mark(fO),dO=Ct().mark(_O),pO=function(e){return bO({feedback:{status:e,network:!0,content:oO("common.toast.".concat(e))}})};function fO(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.__WEBCHAT_LOGIN__){e.next=19;break}return e.next=3,(0,on.select)(Da);case 3:if(!e.sent){e.next=19;break}return e.next=7,(0,on.select)(ya);case 7:if("working"!==(e.sent||{}).distribution_status){e.next=19;break}return e.prev=10,e.next=13,(0,on.call)(hr,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_event",payload:JSON.stringify({event_type:"login"})});case 13:window.__WEBCHAT_LOGIN__=!1,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),window.__WEBCHAT_LOGIN__=!1;case 19:case"end":return e.stop()}}),lO,null,[[10,16]])}function _O(e,t){return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next=r.t0===A.ShareDataType.UNREAD?3:6;break;case 3:return r.next=5,(0,on.put)(Jo({count:t.total_unread_count}));case 5:return r.abrupt("break",6);case 6:case"end":return r.stop()}}),dO)}var EO=(0,dr.createActions)(e({},rO.UPDATE_RECONNECT_FLAG,(function(e){return{flag:e.flag}}))).updateReconnectFlag;iO=Ct().mark((function e(t){var r;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==(r=t.status)){e.next=8;break}return e.next=4,(0,on.put)(ns({socketSuccess:!0}));case 4:return e.next=6,(0,on.spawn)(fO);case 6:e.next=11;break;case 8:return Xr(qr.SOCKET_FAILED,0,{status:r}),e.next=11,(0,on.put)(ns({socketSuccess:!1}));case 11:case"end":return e.stop()}}),e)})),uO=Ct().mark((function e(t){var r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.event,n=t.payload,"reportUPLPoint"!==r){e.next=9;break}return e.next=4,(0,A.getItem)("session");case 4:c=e.sent,s=c&&c.user,u=(i=s||{}).id,l=i.type,o=u,a=l;case 9:e.t0=r,e.next=e.t0===A.SocketConnectionStatus.CONNECT?12:e.t0===A.SocketConnectionStatus.DISCONNECT?38:e.t0===A.SocketConnectionStatus.RECONNECT_ERROR?43:e.t0===A.SocketConnectionStatus.RECONNECTING?49:e.t0===A.SocketConnectionStatus.RECONNECT?52:"emit"===e.t0?55:"close"===e.t0?60:"ack"===e.t0?63:"reportUPLPoint"===e.t0?65:"reportConnections"===e.t0?67:"setMainPage"===e.t0?69:"shareApiData"===e.t0?72:76;break;case 12:return e.next=14,(0,on.select)(oh);case 14:if(!e.sent){e.next=19;break}return d=1e3*Math.floor(30*Math.random()+1),e.next=19,(0,on.delay)(d);case 19:return e.next=21,(0,on.put)(yO({feedback:void 0}));case 21:return e.next=23,(0,A.getItem)("mini-session");case 23:if(p=e.sent,f=p&&p.p_token,_=p&&p.user,!f||!_){e.next=33;break}return e.next=29,(0,on.call)(Yt,{token:f,account_id:_.uid});case 29:if(E=e.sent,Vt){e.next=33;break}return e.next=33,(0,on.call)(iO,E);case 33:return e.next=35,(0,on.put)(EO({flag:!1}));case 35:return e.next=37,(0,on.put)(ns({socketSuccess:!0}));case 37:return e.abrupt("break",76);case 38:return e.next=40,(0,on.put)(EO({flag:!0}));case 40:return e.next=42,(0,on.put)(pO("error"));case 42:return e.abrupt("break",76);case 43:return e.next=45,(0,on.put)(pO("error"));case 45:return Xr(qr.SOCKET_FAILED,0,{status:-1}),e.next=48,(0,on.put)(ns({socketSuccess:!1}));case 48:return e.abrupt("break",76);case 49:return e.next=51,(0,on.put)(pO("pending"));case 51:return e.abrupt("break",76);case 52:return e.next=54,(0,on.put)(pO("resolved"));case 54:return e.abrupt("break",76);case 55:if(O=(S=n).type,h=S.response,"login"!==O){e.next=59;break}return e.next=59,(0,on.call)(iO,h);case 59:return e.abrupt("break",76);case 60:return e.next=62,(0,on.call)(Yi,!1);case 62:return e.abrupt("break",76);case 63:return Bt.dispatch(A.CustomShareEvent.ACK),e.abrupt("break",76);case 65:return nO(n,o,a),e.abrupt("break",76);case 67:return Xr(qr.SHARED_TABS,n),e.abrupt("break",76);case 69:return e.next=71,(0,on.put)(pi({isMainPage:n.isMainPage}));case 71:return e.abrupt("break",76);case 72:return T=(v=n).type,m=ZS(v,aO),e.next=75,(0,on.call)(_O,T,m);case 75:return e.abrupt("break",76);case 76:case"end":return e.stop()}}),e)}));const SO=e({},rO.UPDATE_RECONNECT_FLAG,(function(e,t){var r=t.payload.flag;return sO(sO({},e),{},{reconnectFlag:r})}));var OO;function hO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?hO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var TO=Ct().mark(RO),mO=Ct().mark(DO),gO=(0,dr.createActions)((e(OO={},rO.FEEDBACK_REQUESTED,(function(e){return{feedback:e.feedback}})),e(OO,rO.FEEDBACK_SUCCEEDED,(function(e){return{feedback:e.feedback}})),OO)),bO=gO.feedbackRequested,yO=gO.feedbackSucceeded;function RO(e){var t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.feedback,r.next=3,(0,on.put)(yO({feedback:t}));case 3:return r.next=5,(0,on.delay)(2500);case 5:return r.next=7,(0,on.put)(yO({feedback:void 0}));case 7:case"end":return r.stop()}}),TO)}function DO(){var e,t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,on.actionChannel)(bO);case 2:e=n.sent;case 3:return n.next=6,(0,on.take)(e);case 6:return t=n.sent,r=t.payload,n.next=10,(0,on.call)(RO,{payload:r});case 10:n.next=3;break;case 12:case"end":return n.stop()}}),mO)}const AO=e({},rO.FEEDBACK_SUCCEEDED,(function(e,t){var r=t.payload.feedback;return vO(vO({},e),{},{feedback:r})}));var CO=y(655);function IO(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var PO=y(439).t,wO=Ct().mark(jO),NO=Ct().mark(GO);function UO(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return xO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xO(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function xO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?kO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var LO=function(e,t){var r,n,o=t.conversation,a=t.read,c=t.pinned,s=t.offer,i=t.status,u=t.userId,l=t.flag,d=t.cardId,p=t.mute;switch(e){case"conversations":r=l?{flag:l}:i?{status:i}:a?{last_read_message_id:o.latest_message_id,unread_count:0}:{unread_count:1},void 0!==c&&(r={pinned:c}),void 0!==p&&(r={mute:p}),n=o.id;break;case"offers":r={status:i},n=s.id;break;case"users":r={distribution_status:i},n=u;break;case"rateCards":r={status:i},n=d}return ho({name:e,id:n,record:r})};function jO(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,m,g,b,y,R,D,C,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,Q,W,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,de,pe,fe,_e,Ee,Se,Oe,he;return Ct().wrap((function(ve){for(;;)switch(ve.prev=ve.next){case 0:return t=e.type,r=e.payload,ve.next=3,(0,on.select)(ia);case 3:return n=ve.sent,ve.next=6,(0,on.select)(cu);case 6:if(o=ve.sent,"notification"!==t){ve.next=301;break}if(c=(a=r).type,s=a.user_id,i=a.from_id,u=a.content,l=u.flag,d=u.status,p=u.card_id,f=u.offer_id,_=u.shop_id,E=u.request_id,S=u.conversation_id,O=u.conversation_ids,h=void 0===O?[]:O,v=u.is_main_agent_change,m=u.msg_id,g=u.faq_session_id,b=u.expiry_time,y=u.is_auto_update,R={},D={},!S){ve.next=17;break}return ve.next=14,(0,on.select)(Iu(S));case 14:R=ve.sent,ve.next=22;break;case 17:if(!f){ve.next=22;break}return ve.next=20,(0,on.select)(wS);case 20:C=ve.sent,D=C[f];case 22:return I=R&&n===s,ve.next=25,(0,on.select)(Ou);case 25:P=ve.sent,w="Unread"===P,ve.t0=c,ve.next=ve.t0===_d.MARK_AS_READ?30:ve.t0===_d.MARK_AS_UNREAD?59:ve.t0===_d.DELETE_CONVERSATION?65:ve.t0===_d.UPDATE_OFFER_STATUS?84:ve.t0===_d.UPDATE_CONVERSATION?98:ve.t0===_d.UPDATE_USER_STATUS?126:ve.t0===_d.UPDATE_CONVERSATION_FLAG?150:ve.t0===_d.FORCE_LOGOUT?154:ve.t0===_d.UPDATE_RATING_CARD_STATUS?157:ve.t0===_d.PIN_CONVERSATION?160:ve.t0===_d.UNPIN_CONVERSATION?163:ve.t0===_d.MASS_READ?169:ve.t0===_d.MASS_UNREAD?179:ve.t0===_d.MASS_PIN?189:ve.t0===_d.MASS_UNPIN?195:ve.t0===_d.MASS_ACTIVATE?201:ve.t0===_d.MASS_CLOSE?230:ve.t0===_d.VIDEO_UPLOAD?249:ve.t0===_d.MARK_AS_UNREPLIED||ve.t0===_d.MARK_AS_REPLIED?258:ve.t0===_d.CHAT_DELETE_MSG?266:ve.t0===_d.FAQ_SESSION_UPDATE?287:ve.t0===_d.MUTE_CONVERSATION?291:ve.t0===_d.UNMUTE_CONVERSATION?295:299;break;case 30:if(!I){ve.next=58;break}return ve.next=33,(0,on.select)((function(e){return e.conversationReducer}));case 33:return N=ve.sent,U=N.conversationMark,x="api"===U[S],ve.next=38,(0,on.put)(cl({conversationId:S,markType:x?"":"socket"}));case 38:return ve.next=40,(0,on.select)(ru);case 40:if(k=ve.sent,M=k.findIndex((function(e){return e===E})),-1===M){ve.next=51;break}return Xr(qr.READ_SOCKET,Date.now()-E),ve.next=46,(0,on.select)(nu);case 46:return L=ve.sent,M>0&&(L+=M),k=k.slice(M+1),ve.next=51,(0,on.put)(sl({requestIds:k,count:L}));case 51:if(x){ve.next=58;break}if(!R.unread_count){ve.next=58;break}return ve.next=56,(0,on.put)(LO("conversations",{conversation:R,read:!0}));case 56:return ve.next=58,(0,on.put)(Xo({type:Vo.MARK_AS_READ,conversation:R}));case 58:return ve.abrupt("break",299);case 59:if(w&&(I=R&&n===s),!I){ve.next=64;break}if(0!==R.unread_count){ve.next=64;break}return ve.next=64,(0,on.put)(Xo({type:Vo.MARK_AS_UNREAD,conversation:R}));case 64:return ve.abrupt("break",299);case 65:return ve.next=67,Uc().put(kc().deleteConversationMessageHash({payload:{conversationId:S},isLazy:!0}));case 67:return ve.next=69,(0,on.put)(BS({conversationId:S}));case 69:return ve.next=71,(0,on.put)(Xu({conversationId:S}));case 71:return ve.next=73,(0,on.put)(vo({name:"conversations",id:S}));case 73:return ve.next=75,(0,on.select)(tu);case 75:if(!(ve.sent.length<20)){ve.next=79;break}return ve.next=79,(0,on.put)(Zu({direction:"older"}));case 79:if(!R){ve.next=83;break}return ve.next=83,(0,on.put)(Xo({type:Vo.DELETE_CONVERSATION,conversation:R}));case 83:return ve.abrupt("break",299);case 84:if(!D||!d||d===A.OfferStatus.PENDING){ve.next=97;break}return j=r.conversation_id,ve.next=88,(0,on.select)(Iu(j));case 88:return G=ve.sent,ve.next=91,(0,on.put)(LO("offers",{offer:D,status:d}));case 91:return ve.next=93,(0,on.put)(Il({buyerId:D.buyer_id,shopId:D.shop_id}));case 93:if(F=G.latest_message_type,H=G.latest_message_content,F!==A.MessageTypes.MSG_TYPE_OFFER||(null==H?void 0:H.offer_id)!==f||(null==H?void 0:H.status)!==A.OfferStatus.PENDING){ve.next=97;break}return ve.next=97,(0,on.put)(ho({name:"conversations",id:j,record:{latest_message_content:MO(MO({},H),{},{status:d})}}));case 97:return ve.abrupt("break",299);case 98:if(!I){ve.next=125;break}return IO(R),ve.next=103,(0,on.put)(LO("conversations",{conversation:R,status:d}));case 103:if("closed"!==d){ve.next=116;break}return ve.next=106,(0,on.put)(fh({conversationId:S}));case 106:return ve.next=108,(0,on.put)(BS({conversationId:S}));case 108:return ve.next=110,Uc().call(kc().deleteFakingMessages({payload:{conversationId:S}}));case 110:return ve.next=112,(0,on.put)(Xo({type:Vo.CLOSE_CONVERSATION,conversation:R}));case 112:return ve.next=114,(0,on.put)(LO("conversations",{conversation:R,read:!0}));case 114:ve.next=125;break;case 116:if("activated"!==d){ve.next=125;break}return o===S&&Uc().put(kc().fetchMessagesRequested({payload:{conversationId:S,reset:!0},isLazy:!0})),ve.next=121,(0,on.select)(tu);case 121:if(!ve.sent.includes(S)){ve.next=125;break}return ve.next=125,(0,on.put)(Ju({conversationId:S}));case 125:return ve.abrupt("break",299);case 126:return ve.next=128,(0,on.select)(Wa);case 128:if(V=ve.sent,n!==s){ve.next=147;break}if(!y){ve.next=138;break}if(V){ve.next=136;break}return ve.next=134,(0,on.put)(Lo({type:"CONFIRM_MODAL",title:PO("modal.title.auto_switch_to_hangup"),actions:{confirm:{label:PO("common.close"),handler:function(){It.store.dispatch(jo()),It.store.dispatch(zc({showAutoHangupModal:!1}))}}},additions:{content:PO("modal.content.auto_switch_to_hangup")}}));case 134:return ve.next=136,(0,on.put)(zc({showAutoHangupModal:!0}));case 136:ve.next=144;break;case 138:if("working"!==d){ve.next=144;break}if(!V){ve.next=144;break}return ve.next=142,(0,on.put)(jo());case 142:return ve.next=144,(0,on.put)(zc({showAutoHangupModal:!1}));case 144:if(!v){ve.next=147;break}return ve.next=147,(0,on.put)(Lo({type:"CONFIRM_MODAL",title:PO("common.confirm"),additions:{content:{key:"modal.content.switch_status",vars:{status:PO("common.".concat("working"===d?"online":"offline"))}}},actions:{confirm:{label:PO("common.ok")}}}));case 147:return ve.next=149,(0,on.put)(LO("users",{userId:s,status:d}));case 149:return ve.abrupt("break",299);case 150:if(!I){ve.next=153;break}return ve.next=153,(0,on.put)(LO("conversations",{conversation:R,flag:l}));case 153:return ve.abrupt("break",299);case 154:return ve.next=156,(0,on.call)(Qi);case 156:return ve.abrupt("break",299);case 157:return ve.next=159,(0,on.put)(LO("rateCards",{cardId:p,status:d}));case 159:return ve.abrupt("break",299);case 160:return ve.next=162,(0,on.put)(LO("conversations",{conversation:R,pinned:!0}));case 162:return ve.abrupt("break",299);case 163:return ve.next=165,(0,on.put)(LO("conversations",{conversation:R,pinned:!1}));case 165:if(o!==S||"Pinned"!==P){ve.next=168;break}return ve.next=168,(0,on.put)(pl());case 168:return ve.abrupt("break",299);case 169:if(!(B=h.length)){ve.next=178;break}return Y={},h.forEach((function(e){Y[e]={unread_count:0}})),ve.next=175,(0,on.put)(To({name:"conversations",records:Y}));case 175:return Q=Object.assign({},{count:B,type:Vo.MASS_READ},_?{shopId:_}:{}),ve.next=178,(0,on.put)(Xo(Q));case 178:return ve.abrupt("break",299);case 179:if(W=h.length,!h.length){ve.next=188;break}return q={},h.forEach((function(e){q[e]={unread_count:1}})),ve.next=185,(0,on.put)(To({name:"conversations",records:q}));case 185:return K=Object.assign({},{count:W,type:Vo.MASS_UNREAD},_?{shopId:_}:{}),ve.next=188,(0,on.put)(Xo(K));case 188:return ve.abrupt("break",299);case 189:if(!h.length){ve.next=194;break}return z={},h.forEach((function(e){z[e]={pinned:!0}})),ve.next=194,(0,on.put)(To({name:"conversations",records:z}));case 194:return ve.abrupt("break",299);case 195:if(!h.length){ve.next=200;break}return X={},h.forEach((function(e){X[e]={pinned:!1}})),ve.next=200,(0,on.put)(To({name:"conversations",records:X}));case 200:return ve.abrupt("break",299);case 201:return ve.next=203,(0,on.put)(Zu({direction:"latest"}));case 203:if(!h.length){ve.next=229;break}J={},$=UO(h),ve.prev=207,$.s();case 209:if((Z=$.n()).done){ve.next=217;break}if(ee=Z.value,J[ee]={status:"activated"},o!==ee){ve.next=215;break}return ve.next=215,Uc().put(kc().fetchMessagesRequested({payload:{conversationId:o,reset:!0},isLazy:!0}));case 215:ve.next=209;break;case 217:ve.next=222;break;case 219:ve.prev=219,ve.t1=ve.catch(207),$.e(ve.t1);case 222:return ve.prev=222,$.f(),ve.finish(222);case 225:return ve.next=227,(0,on.put)(To({name:"conversations",records:J}));case 227:return ve.next=229,(0,on.call)(handleNotifyBatchConversation);case 229:return ve.abrupt("break",299);case 230:if(!h.length){ve.next=248;break}return te={},re=[],ve.next=236,(0,on.select)(wu(h));case 236:return ne=ve.sent,oe=ne.filter((function(e){return(null==e?void 0:e.unread_count)>0})),h.forEach((function(e){te[e]={status:"closed",unread_count:0},re.push((0,on.put)(fh({conversationId:e}))),Uc().call(kc().deleteFakingMessages({payload:{conversationId:e}}))})),ve.next=241,(0,on.all)(re);case 241:return ve.next=243,(0,on.put)(To({name:"conversations",records:te}));case 243:return ae=Object.assign({},{count:oe.length,type:Vo.MASS_CLOSE},_?{shopId:_}:{}),ve.next=246,(0,on.put)(Xo(ae));case 246:return ve.next=248,(0,on.put)(QS({conversationIds:h}));case 248:return ve.abrupt("break",299);case 249:return ce=r.content,ve.next=252,(0,on.select)(dE(ce.vid));case 252:return se=ve.sent,ve.next=255,(0,on.select)(lE(se));case 255:return ve.sent.status||(ie=ce.status,ue=ce.vid,"successful"===ie&&(le=performance.getEntriesByName("REPORT_UPLOAD_".concat(ue),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(ue)),de=performance.getEntriesByName("SERVICE_DONE_".concat(ue))[0].startTime-le.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(ue)),performance.clearMarks("SERVICE_DONE_".concat(ue)),Xr(qr.SERVICE_DONE,de)),Uc().put(kc().updateVideoInfo({payload:{id:se,info:{status:ie,uploadResult:ce}}}))),ve.abrupt("break",299);case 258:if("Unreplied"!==P){ve.next=265;break}return ve.next=261,(0,on.select)(tu);case 261:if(!ve.sent.includes(S)){ve.next=265;break}return ve.next=265,(0,on.put)(ho({name:"conversations",id:S,record:{unreplied:c===_d.MARK_AS_UNREPLIED}}));case 265:return ve.abrupt("break",299);case 266:return ve.next=268,(0,on.select)(pE(m));case 268:if(!(pe=ve.sent)){ve.next=281;break}return fe=pe.message_option|A.MessageOption.MSG_OPT_DELETE,_e=T("messages",MO(MO({},pe),{},{message_option:fe})),Ee=_e.entities,ve.next=274,(0,on.put)(Oo({entities:Ee}));case 274:if(![A.MessageTypes.MSG_TYPE_VIDEO,A.MessageTypes.MSG_TYPE_IMAGE,A.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT].includes(pe.type)){ve.next=281;break}return ve.next=277,(0,on.select)((function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId}));case 277:if(ve.sent!==m){ve.next=281;break}return ve.next=281,(0,on.put)(gh());case 281:if(!R||R.latest_message_id!==m){ve.next=286;break}return Se=R.last_message_option|A.MessageOption.MSG_OPT_DELETE,Oe=T("conversations",MO(MO({},R),{},{last_message_option:Se,latest_message_content:{text:""},latest_message_from_id:i})),he=Oe.entities,ve.next=286,(0,on.put)(Oo({entities:he}));case 286:return ve.abrupt("break",299);case 287:if(!I){ve.next=290;break}return ve.next=290,Uc().put(kc().fetchFaqSessionSucceed({payload:{faqSessionId:g,sessionExpiryTime:b,conversationId:S}}));case 290:return ve.abrupt("break",299);case 291:if(!I){ve.next=294;break}return ve.next=294,(0,on.put)(LO("conversations",{conversation:R,mute:!0}));case 294:return ve.abrupt("break",299);case 295:if(!I){ve.next=298;break}return ve.next=298,(0,on.put)(LO("conversations",{conversation:R,mute:!1}));case 298:return ve.abrupt("break",299);case 299:ve.next=304;break;case 301:if("message"!==t){ve.next=304;break}return ve.next=304,(0,on.call)(td,{payload:r,type:A.ConversationTypeEnum.Normal});case 304:case"end":return ve.stop()}}),wO,null,[[207,219,222,225]])}function GO(e){return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,on.call)(jO,e);case 2:case"end":return t.stop()}}),NO)}function FO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function HO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?FO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var VO=Ct().mark(qO),BO=Ct().mark(KO),YO=(0,dr.createActions)(e({},rO.UPDATE_NOTICES_COUNT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"add":t;return{type:r}}))),QO=YO.updateNoticesCount,WO=function(){return(0,CO.eventChannel)((function(e){return Vt?Bt.on("message",(function(t){var r=t.data,n=r.message_type,o=r.message_content,a=r.worker_event,c=r.payload;e(a?{event:a,payload:void 0===c?{}:c}:{pushedType:n,payload:JSON.parse(o)})})):(Object.values(A.SocketConnectionStatus).forEach((function(t){Bt.on(t,(function(){return e({event:t})}))})),Bt.on("message",(function(t){if(t){var r=t.message_type,n=t.message_content;e({pushedType:r,payload:JSON.parse(n)})}}))),function(){}}))};function qO(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.event,r=e.pushedType,n=e.payload,!t){o.next=6;break}return o.next=4,(0,on.call)(uO,{event:t,payload:n});case 4:o.next=11;break;case 6:if(!r){o.next=11;break}return o.next=9,(0,on.put)(QO());case 9:return o.next=11,(0,on.call)(GO,{type:r,payload:n});case 11:case"end":return o.stop()}}),VO)}function KO(){var e;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,on.call)(WO);case 2:return e=t.sent,t.next=5,(0,on.takeEvery)(e,qO);case 5:case"end":return t.stop()}}),BO)}const zO=e({},rO.UPDATE_NOTICES_COUNT,(function(e,t){var r=t.payload.type;return HO(HO({},e),{},{noticesCount:"add"===r?e.noticesCount+1:0})}));var XO=Ct().mark(JO);function JO(){var e,t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e="mini-session";case 1:return o.next=4,(0,on.delay)(6e4);case 4:return o.next=6,(0,A.getItem)(e);case 6:return t=o.sent,o.next=9,(0,on.select)(ah);case 9:return r=o.sent,o.next=12,(0,on.select)(nu);case 12:if(n=o.sent,!t||!t.token){o.next=19;break}return Qt({noticesCount:r,readMissedCount:n}),o.next=17,(0,on.put)(sl({count:0}));case 17:return o.next=19,(0,on.put)(QO({type:"reset"}));case 19:o.next=1;break;case 21:case"end":return o.stop()}}),XO)}function $O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ZO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?$O(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var eh,th=[DO,JO,KO],rh=(0,dr.handleActions)(ZO(ZO(ZO({},SO),AO),zO),{reconnectFlag:!1,feedback:null,noticesCount:0}),nh=function(e){return e.socketReducer.feedback},oh=function(e){return e.socketReducer.reconnectFlag},ah=function(e){return e.socketReducer.noticesCount};function ch(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var sh,ih=function(e){return e.mediaPreviewerReducer.mediaMap},uh=(0,Wn.createSelector)(cu,ih,(function(e,t){return t[e]||[]})),lh=(0,dr.createActions)({ADD_MEDIA_FILE:function(e){return{medias:e.medias,conversationId:e.conversationId}},DELETE_MEDIA_FILE:function(e){return{id:e.id,conversationId:e.conversationId}},CLEAR_MEDIA_FILE:function(e){return{conversationId:e.conversationId}}}),dh=lh.addMediaFile,ph=lh.deleteMediaFile,fh=lh.clearMediaFile,_h=(e(eh={},dh,od),e(eh,ph,ad),e(eh,fh,cd),eh),Eh=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ch(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ch(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},_h),{mediaMap:{}});function Sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Oh,hh=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.showMediaPreviewModal},vh=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId},Th=(0,dr.createActions)({SHOW_MEDIA_PREVIEW_MODAL_REQUESTED:function(e){return{messageId:e.messageId}},CLOSE_MEDIA_PREVIEW_MODAL_REQUESTED:function(){return{}}}),mh=Th.showMediaPreviewModalRequested,gh=Th.closeMediaPreviewModalRequested,bh=(e(sh={},mh,(function(e,t){return{showMediaPreviewModal:!0,currentPreviewMediaId:t.payload.messageId}})),e(sh,gh,(function(e){return{showMediaPreviewModal:!1,currentPreviewMediaId:null}})),sh),yh=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Sh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},bh),{showMediaPreviewModal:!1,currentPreviewMediaId:null}),Rh=function(e){return e.translatePreferenceReducer.translationSettings},Dh=function(e){return e.translatePreferenceReducer.fetchSettingsStatus},Ah=function(e){return e.translatePreferenceReducer.updateStatus};!function(e){e.FETCH_SHOP_TRANSLATION_SETTINGS="FETCH_SHOP_TRANSLATION_SETTINGS",e.UPDATE_SHOP_TRANSLATION_SETTINGS="UPDATE_SHOP_TRANSLATION_SETTINGS",e.UPDATE_FETCH_STATUS="UPDATE_FETCH_STATUS",e.UPDATE_SETTING_PREFERENCE_STATUS="UPDATE_SETTING_PREFERENCE_STATUS",e.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD="UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD"}(Oh||(Oh={}));var Ch,Ih,Ph=y(439).t;function wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Uh=Ct().mark(Vh),xh=Ct().mark(Bh),kh=Ct().mark(Yh),Mh=(0,dr.createActions)((e(Ch={},Oh.FETCH_SHOP_TRANSLATION_SETTINGS,(function(e){return{shopId:e.shopId}})),e(Ch,Oh.UPDATE_SHOP_TRANSLATION_SETTINGS,(function(e){return{settings:e.settings}})),e(Ch,Oh.UPDATE_FETCH_STATUS,(function(e){return{status:e.status}})),e(Ch,Oh.UPDATE_SETTING_PREFERENCE_STATUS,(function(e){return{status:e.status}})),e(Ch,Oh.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e){return{shopId:e.shopId,source:e.source,translationPreference:e.translationPreference,autoTranslationStatus:e.autoTranslationStatus,inTranslationFeedbackWhitelist:e.inTranslationFeedbackWhitelist}})),Ch)),Lh=Mh.fetchShopTranslationSettings,jh=Mh.updateShopTranslationSettings,Gh=Mh.updateFetchStatus,Fh=Mh.updateSettingPreferenceStatus,Hh=Mh.updateShopTranslationSettingsRecord;function Vh(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.shopId,s.prev=1,s.next=4,(0,on.put)(Gh({status:"loading"}));case 4:return s.next=6,(0,on.call)(hr,{subServer:"workbenchapi",parent:"shop",resource:"setting",params:{shop_id:t}});case 6:return r=s.sent,n=r.source,o=r.translation_preference,a=r.auto_translation_status,c=r.in_translation_feedback_whitelist,s.next=13,(0,on.put)(Gh({status:"succeed"}));case 13:return s.next=15,(0,on.put)(Hh({shopId:t,source:n,translationPreference:o,autoTranslationStatus:a,inTranslationFeedbackWhitelist:c}));case 15:s.next=21;break;case 17:return s.prev=17,s.t0=s.catch(1),s.next=21,(0,on.put)(Gh({status:"failed"}));case 21:case"end":return s.stop()}}),Uh,null,[[1,17]])}function Bh(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.settings,a.prev=1,a.next=4,(0,on.put)(Yv({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 4:return a.next=6,(0,on.put)(Fh({status:""}));case 6:return r=t.shop_id,n=t.auto_translation_status,o=t.translation_preference,a.next=9,(0,on.call)(hr,{method:"PUT",subServer:"workbenchapi",parent:"shop",resource:"setting",payload:JSON.stringify(t)});case 9:return a.next=11,(0,on.put)(Hh({shopId:r,translationPreference:o,autoTranslationStatus:n}));case 11:return a.next=13,(0,on.call)(P_,y_({toast:{show:!0,type:"success",message:Ph("tips.set_preference_succeed")}}));case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(1),a.next=19,(0,on.put)(Fh({status:"failed"}));case 19:return a.next=21,(0,on.call)(P_,y_({toast:{show:!0,type:"fail",message:Ph("tips.set_preference_failed")}}));case 21:case"end":return a.stop()}}),xh,null,[[1,15]])}function Yh(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Lh,Vh);case 2:return e.next=4,(0,on.takeEvery)(jh,Bh);case 4:case"end":return e.stop()}}),kh)}var Qh=(0,dr.handleActions)((e(Ih={},Oh.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e,t){var r=t.payload,n=r.shopId,o=r.source,a=r.translationPreference,c=r.autoTranslationStatus,s=r.inTranslationFeedbackWhitelist,i=Nh({},e.translationSettings),u=i[n]||{};return i[n]=Nh(Nh({},u),{},{translationPreference:a,autoTranslationStatus:c}),o&&(i[n].source=o),s&&(i[n].inTranslationFeedbackWhitelist=s),Nh(Nh({},e),{},{translationSettings:i})})),e(Ih,Oh.UPDATE_FETCH_STATUS,(function(e,t){var r=t.payload.status;return Nh(Nh({},e),{},{fetchSettingsStatus:r})})),e(Ih,Oh.UPDATE_SETTING_PREFERENCE_STATUS,(function(e,t){var r=t.payload.status;return Nh(Nh({},e),{},{updateStatus:r})})),Ih),{translationSettings:{},fetchSettingsStatus:"",updateStatus:""}),Wh=[Yh];function qh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?qh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zh=Ct().mark(nv),Xh=Ct().mark(ov),Jh=Ct().mark(av),$h=Ct().mark(cv),Zh=Ct().mark(sv),ev=Ct().mark(iv),tv=Ct().mark(uv),rv=Ct().mark(lv);function nv(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.id,n=t.shopId,s.next=3,(0,on.call)(hr,{resource:"products",id:r,params:{shop_id:n,need_cache:1,cache_expires:600},cleaner:Bn});case 3:return o=s.sent,o=ce(o),a=T("products",o),c=a.entities,s.next=8,(0,on.put)(Oo({entities:c}));case 8:return s.abrupt("return",o);case 9:case"end":return s.stop()}}),zh)}function ov(e){var t,r,n,o,a,c,s,i,u,l;return Ct().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.id,n=t.shopId,o=t.isChatbotOrder,d.next=3,(0,on.select)(bu);case 3:return a=d.sent,d.next=6,(0,on.call)(hr,{resource:"order",id:r,params:{shop_id:n}});case 6:return c=d.sent,d.next=9,(0,on.select)(Fa);case 9:return s=d.sent,i=Qe(c,n,a,!s||o),u=T("orders",i),l=u.entities,d.next=15,(0,on.put)(Oo({entities:l}));case 15:return d.abrupt("return",i);case 16:case"end":return d.stop()}}),Xh)}function av(e,t,r,n,o){var a,c,s,i,u,l;return Ct().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(a=Array.isArray(e),c=a?e:[e],s=Array.from(new Set(c.map((function(e){return e.product_id})))),i=[],!a){d.next=19;break}return d.prev=5,d.next=8,(0,on.call)(showProducts,{payload:{productIds:s,shopId:t}});case 8:i=d.sent,d.next=17;break;case 11:return d.prev=11,d.t0=d.catch(5),u=s.map((function(e){return(0,on.call)(nv,{payload:{id:e,shopId:t}})})),d.next=16,(0,on.all)(u);case 16:i=d.sent;case 17:d.next=23;break;case 19:return d.next=21,(0,on.call)(nv,{payload:{id:e.product_id,shopId:t}});case 21:l=d.sent,i=[l];case 23:return d.abrupt("return",c.map((function(e){var t=i.find((function(t){return t.id===e.product_id}))||{};return Se(e,"list",r,n,t,o)})));case 24:case"end":return d.stop()}}),Jh,null,[[5,11]])}function cv(e){var t,r,n,o,a,c,s,i,u,l,d;return Ct().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.id,n=t.shopId,p.next=3,(0,on.select)(US(r));case 3:return o=p.sent,p.next=6,(0,on.select)(bu);case 6:return a=p.sent,p.next=9,(0,on.select)(Aa);case 9:return c=p.sent,p.next=12,(0,on.select)(Ra);case 12:if(s=p.sent,!o||o.status===A.OfferStatus.PENDING){p.next=15;break}return p.abrupt("return",o);case 15:return p.next=17,(0,on.call)(hr,{resource:"offers",id:r,params:{shop_id:n}});case 17:return i=p.sent,p.next=20,(0,on.call)(av,i,n,a,c,s);case 20:return u=p.sent,l=T("offers",u),d=l.entities,p.next=24,(0,on.put)(Oo({entities:d}));case 24:return p.abrupt("return",u[0]);case 25:case"end":return p.stop()}}),$h)}function sv(e){var t,r,n,o,a,c,s,i,u;return Ct().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.shopId,r=e.id,l.next=3,(0,on.select)(ia);case 3:return n=l.sent,l.next=6,(0,on.select)(Da);case 6:return o=l.sent,a="vouchers_by_ids",l.next=10,(0,on.call)(hr,{parent:"vouchers",resource:a,params:{ids:JSON.stringify([parseInt(r)]),shop_id:t,buyer_id:o?0:n}});case 10:if(c=l.sent,!(s=c[a])||!s.length){l.next=18;break}return s=s.map((function(e){return Re(e,!1)})),i=T("vouchers",s),u=i.entities,l.next=17,(0,on.put)(Oo({entities:u}));case 17:return l.abrupt("return",s[0]);case 18:case"end":return l.stop()}}),Zh)}function iv(e){var t,r,n,o,a,c,s,i,u;return Ct().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,r=t.id,n=t.creatorId,l.next=3,(0,on.select)(Tu);case 3:return o=l.sent,a=o.shop_id,l.next=7,(0,on.call)(hr,{parent:"feed",resource:"stories",params:{ids:JSON.stringify([r]),creator:n,shop_id:a,need_cache:1,cache_expire:1800}});case 7:return c=l.sent,s=c.stories[0],i=T("feedStories",s),u=i.entities,l.next=12,(0,on.put)(Oo({entities:u}));case 12:return l.abrupt("return",s);case 13:case"end":return l.stop()}}),ev)}function uv(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.cartItems,r=e.shopId,c.next=3,(0,on.call)(hr,{parent:"product",resource:"get",method:"POST",payload:JSON.stringify({shop_id:r,items:t.slice(0,4)})});case 3:return n=c.sent,o=n.get,a=void 0===o?[]:o,c.abrupt("return",a.map(_e));case 7:case"end":return c.stop()}}),tv)}function lv(e){var t,r,n,o,a,c,s,i;return Ct().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.ids,n=t.id,u.next=3,(0,on.select)(Tu);case 3:return o=u.sent,a=o.shop_id,c=o.id,u.next=7,(0,on.call)(hr,{parent:"conversation",resource:"messages",params:{ids:"[".concat(r.join(","),"]"),shop_id:a}});case 7:return s=u.sent,i=s.messages,u.next=11,(0,on.call)(np,{list:Wt(i),conversationId:c,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var r=i.findIndex((function(t){return t.id===e}));if(r>=0){var n=i[r];i.splice(r,1,Kh(Kh({},n),{},{content:Kh(Kh({},n.content),t[e])}))}}))}});case 11:return u.abrupt("return",{id:n,messages:i});case 12:case"end":return u.stop()}}),rv)}var dv=Ct().mark(_v);function pv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?pv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _v(e,t,r){var n,o,a,c,s=arguments;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=s.length>3&&void 0!==s[3]?s[3]:[],o=e,a=[],c=[],Array.isArray(e)&&(o=(T(r,e).entities||{})[r]||{}),t.forEach((function(e){var t=e.id,s=o[t];s?["conversations","agentConversations"].includes(r)&&(void 0!==s.faking||s.latestMessageStatus||void 0!==s.unreplied)?(delete(e=fv(fv({},s),e)).faking,delete e.latestMessageStatus,delete e.unreplied,c.push(e)):(n.length&&n.forEach((function(t){e[t]=s[t]})),a.push((0,on.put)(ho({name:r,id:t,record:fv({},e)})))):c.push(e)})),c.length&&a.push((0,on.put)(Oo({entities:T(r,c).entities}))),i.next=9,(0,on.all)(a);case 9:case"end":return i.stop()}}),dv)}var Ev,Sv,Ov=function(e){return e.voucherReducer.status},hv=(0,Wn.createSelector)(ro,(function(e){return e.voucherReducer.voucherIds}),(function(e,r){return((0,t.denormalize)(r,[h],{vouchers:e})||[]).filter((function(e){return e}))})),vv=function(e){return(0,Wn.createSelector)(ro,(function(r){return(0,t.denormalize)(e,h,{vouchers:r})}))},Tv={currentPage:0,perPage:20,total:0,hasMore:!0},mv=function(e){return(0,Wn.createSelector)(eo,(function(r){return(0,t.denormalize)(e,i,{orders:r})}))},gv=function(e){return(e.orderReducer||{}).cancelReasons},bv=function(e){return e.orderReducer.status},yv=function(e){return e.orderReducer.fetchResult},Rv=function(e,t){return(0,Wn.createSelector)(yv,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:Tv,result:[]}}))},Dv=(0,Wn.createSelectorCreator)(Wn.defaultMemoize,(function(e,t){return e.id===t.id}))(Tu,(function(e){return e})),Av=(0,Wn.createSelector)(yv,Dv,eo,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[i],{orders:n})})),Cv=function(e){return(0,Wn.createSelector)(to,(function(r){return(0,t.denormalize)(e,u,{products:r})}))},Iv=function(e){return(0,Wn.createSelector)(to,(function(r){return(0,t.denormalize)(e,[u],{products:r})}))},Pv={currentPage:0,perPage:20,total:0,hasMore:!0},wv=function(e){return e.productReducer.fetchResult},Nv=function(e){return e.productReducer.allProductsSearchStatus},Uv=function(e){return e.productReducer.sellerRecommendProducts},xv=function(e){return e.productReducer.systemRecommendProducts},kv=function(e){return e.productReducer.groups},Mv=function(e){return e.productReducer.systemRecommendProductsFetchStatus},Lv=function(e){return e.productReducer.sellerRecommendProductsFetchStatus},jv=function(e){return e.productReducer.fetchGroupsStatus},Gv=function(e){return(0,Wn.createSelector)(wv,(function(t){return t[e]||{pagination:Pv,result:[]}}))},Fv=(0,Wn.createSelector)(wv,Nu,to,(function(e,r,n){var o=e[r];if(!o)return[];var a=o.result||[];return(0,t.denormalize)(a,[u],{products:n})})),Hv=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(Ev||(Ev={}));var Vv,Bv=(0,dr.createActions)((e(Sv={},Ev.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),e(Sv,Ev.CLEAR_REPORT_REQUESTED,(function(){return{}})),Sv)),Yv=Bv.reportRequested,Qv=Bv.clearReportRequested,Wv=Ct().mark(Xv),qv=Ct().mark(Jv);function Kv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Kv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xv(){var e,t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,on.select)(Hv);case 2:if(!(e=r.sent).length){r.next=10;break}return t=Wt(e),r.next=7,(0,on.put)(Qv());case 7:return t.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),r.next=10,(0,on.call)(hr,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(zv(zv({},t[0]),{},{platform_id:(0,A.isVisitingCNSC)()||(0,A.isVisitingKRSC)()?2:1}))});case 10:case"end":return r.stop()}}),Wv)}function Jv(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,on.delay)(6e4);case 3:return e.next=5,Xv();case 5:e.next=0;break;case 7:case"end":return e.stop()}}),qv)}const $v=(e(Vv={},Ev.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(Wt(e.beingReported),[{event_time:n,url:o}])}})),e(Vv,Ev.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),Vv);function Zv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var eT=[Jv],tT=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Zv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},$v),{beingReported:[]}),rT=Ct().mark(lT);function nT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?nT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var aT,cT=48e4,sT=6e4,iT=!1,uT="9223372036854775807";function lT(){var e,t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S;return Ct().wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=3,(0,on.delay)(sT);case 3:return e=void 0,e="mini-session",O.next=7,(0,A.getItem)(e);case 7:if(!(t=O.sent)||!t.token){O.next=58;break}return O.prev=9,O.next=12,(0,on.select)((function(e){return e.conversationReducer}));case 12:return r=O.sent,n=r.maxLatestReceivedMessageId,o=r.maxLatestTimestampNano,O.next=17,(0,on.select)(Da);case 17:return a=O.sent,O.next=20,(0,on.select)(Ou);case 20:return c=O.sent.toLowerCase(),s=!a&&["all","unread"].includes(c),i=["pinned","unread"].includes(c),u={},s?u.last_timestamp_nano=o||uT:u.last_message_id=n||uT,u.last_unread_count_sync=iT,O.next=28,(0,on.spawn)(hr,{method:"POST",resource:"user",suffix:"sync",params:oT({},u)});case 28:return l=O.sent,O.next=31,(0,on.join)(l);case 31:if(d=O.sent,p=d.have_new_msg,f=d.unread_count,_=d.current_version,iT=!1,!p){O.next=44;break}return O.next=39,(0,on.select)((function(e){return e.conversationReducer}));case 39:if(!(O.sent.syncFetchException<3)||i){O.next=44;break}return O.next=44,(0,on.put)(Zu({direction:"latest",source:A.ConversationSource.SYNC}));case 44:if(!(f>-1)){O.next=53;break}return O.next=47,(0,on.select)(Ho);case 47:if((E=O.sent)===f){O.next=52;break}return O.next=51,(0,on.put)(Jo({count:f}));case 51:iT=!0;case 52:a||(sT=E!==f||p?6e4:sT>=cT?cT:2*sT);case 53:_&&_!==t.version&&(S=Object.assign({},t,{version:_}),(0,A.setItem)(e,S)),O.next=58;break;case 56:O.prev=56,O.t0=O.catch(9);case 58:O.next=0;break;case 60:case"end":return O.stop()}}),rT,null,[[9,56]])}function dT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.REDIRECT_CONVERSATION_REQUESTED="REDIRECT_CONVERSATION_REQUESTED"}(aT||(aT={}));var fT=Ct().mark(hT),_T=Ct().mark(vT),ET=Ct().mark(TT),ST=(0,dr.createActions)(e({},aT.REDIRECT_CONVERSATION_REQUESTED,(function(e){var t=e.userId,r=e.shopId,n=e.orderId,o=e.productId,a=e.message;return{userId:t,shopId:r,orderId:n,productId:o,message:void 0===a?"":a,entryPointType:e.entryPointType}}))),OT=ST.redirectConversationRequested;function hT(e){var t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=T("conversations",e),r.next=3,(0,on.put)(Oo({entities:t.entities}));case 3:case"end":return r.stop()}}),fT)}function vT(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T;return Ct().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.orderId,a=t.isFromSearch,c=void 0!==a&&a,s=t.productId,i=t.message,u=t.entryPointType,m.next=3,(0,on.select)(tu);case 3:return l=m.sent,m.next=6,(0,on.call)(hr,{method:"POST",resource:"conversation",suffix:"redirection",payload:JSON.stringify({user_id:parseInt(r),shop_id:n})});case 6:if(d=m.sent,p=d.id,f=d.faking,_=d.mask,E=d.to_name,O=pT(pT({userId:r,shopId:n},S={orderId:o,productId:s}),{},{conversationId:d.id}),h=l.length,v=f||!l.includes(p),u&&Uc().put(kc().setEntryPoint({payload:{type:u,conversationId:p}})),!v){m.next=21;break}return m.next=16,(0,on.call)(hT,d);case 16:if(!h){m.next=19;break}return m.next=19,(0,on.put)($u({conversationId:p}));case 19:m.next=23;break;case 21:return m.next=23,(0,on.put)(ho({name:"conversations",id:p,record:{to_name:E,mask:_}}));case 23:if(!i){m.next=26;break}return m.next=26,(0,on.put)(WS({draft:i,conversationId:p}));case 26:return m.next=28,(0,on.call)(A.setItem,"mini-sc_redirect",O);case 28:return m.next=30,(0,on.select)(cu);case 30:if(m.sent===p&&!v){m.next=36;break}return m.next=34,(0,on.put)(Nl({conversationId:d.id}));case 34:return m.next=36,(0,on.put)(dl({conversation:d,sourceInfo:S}));case 36:return m.next=38,(0,on.select)(ja);case 38:if(m.sent){m.next=44;break}return T="",o?T=A.ChatbotFromType.OrderPage:s?T=A.ChatbotFromType.ProductPage:n&&(T=A.ChatbotFromType.ShopPage),m.next=44,(0,on.call)(ls,{payload:{shouldShowWindow:!0,from:T}});case 44:if(h){m.next=47;break}return m.next=47,(0,on.put)($u({conversationId:p}));case 47:return m.next=49,(0,on.put)($c({shouldShowConversationDetail:!0}));case 49:!c&&Uc().put(kc().sendMessagesRequested({payload:{conversationId:d.id,messages:[{type:"text",content:{text:""},isFaking:!0}],more:{isFakingSource:!0}}}));case 50:case"end":return m.stop()}}),_T)}function TT(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(OT,vT);case 2:case"end":return e.stop()}}),ET)}var mT=[lT,TT],gT=Ct().mark(bT);function bT(e,t,r){return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,on.takeEvery)(e,Ct().mark((function e(n){var o;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.payload.id){e.next=5;break}return e.next=4,(0,on.call)(t,n);case 4:return e.abrupt("return");case 5:return e.next=7,(0,on.race)({task:(0,on.call)(t,n),cancel:(0,on.take)((function(e){return e.type===r.toString()&&e.payload.id===o}))});case 7:case"end":return e.stop()}}),e)})));case 2:case"end":return n.stop()}}),gT)}})(),R})(),e.exports=n(r(82677),r(26842),r(58518),r(28366),r(36808),r(6222),r(94301),r(68214),r(52153),r(53053),r(59065),r(67677),r(58397),r(98282),r(34857),r(47190),r(97869),r(20573),r(847),r(17311),r(67429),r(46811))},26842:function(e,t,r){var n;n=(e,t,r,n)=>(()=>{var o={757:(e,t,r)=>{e.exports=r(666)},470:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,t:()=>u});var n=r(661),o=r.n(n),a=r(547),c=!1,s=function(e,t){c=!0;var r=t||(0,a.CE)();o().init({lng:r,fallbackLng:r,defaultNS:"common",keySeparator:!1,debug:!1,resources:e&&e.resources||{},interpolation:{prefix:"{",suffix:"}",escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}})},i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";c||s({resources:{}},e),o().changeLanguage(e),o().addResourceBundle(e,r,t,!0,!0)},u=o().t.bind(o())},547:(e,t,r)=>{"use strict";r.d(t,{An:()=>F,CE:()=>K,Db:()=>z,E3:()=>A,Ey:()=>C,Fy:()=>V,Ht:()=>R,I7:()=>k,I9:()=>X,IE:()=>Q,Jy:()=>N,L6:()=>q,Ll:()=>x,Od:()=>M,S1:()=>i,S8:()=>y,Vm:()=>D,X7:()=>W,Y8:()=>O,YH:()=>j,dV:()=>U,jz:()=>J,k2:()=>G,nr:()=>m,qk:()=>b,r:()=>Y,u7:()=>P,wK:()=>I,xC:()=>L,z$:()=>S});var n,o,a,c,s={sg:"en",ph:"en",tw:"zh-Hant",my:"ms-MY",th:"th-TH",vn:"vi-VN",id:"id-ID",br:"pt-BR",in:"hi",cn:"zh-CN",mx:"es-MX",co:"es-CO",cl:"es-CL",ar:"es-AR",pl:"pl",es:"es-ES",fr:"fr",us:"en",kr:"en"},i=function(e,t,r){n=e.toLowerCase(),o="liveish"===t?"live-test":"stable"===t?"test-stable":t,a=r,c=s[n]||"en"},u=["my","br","mx","co","ar"],l=["id","th"],d=["us"],p=function(e){return u.includes(e)?"com.".concat(e):l.includes(e)?"co.".concat(e):d.includes(e)?"com":e},f=function(e){return"tw"===e?"xiapi":e.toLowerCase()},_=function(e){return p(e)},E=function(){return"live"===o?"shopee":"".concat(o,".shopee")},S=function(){return"cn"===n},O=function(){return"kr"===n};function h(){return v()&&!S()}function v(){var e=window.location.hostname;return e&&e.includes("cn")}var T=function(e,t){return"seller"===e?"vn"!==t||h()?"seller":"banhang":e},m=function(e,t){var r=t?t.toLowerCase():n;return"".concat(T(e,r),".").concat(f(r),".").concat(E(),".").concat("cn")},g=function(e,t){var r,a=t?t.toLowerCase():n;return h()?m(e,a):"".concat(T(e,a),".").concat((r=window.location.hostname,r&&r.includes("shopeebrasil")?"live"===o?"shopeebrasil":"".concat(o,".shopeebrasil"):E()),".").concat(_(a))},b=function(e){return g("seller",e)},y=function(){return"live"===o?"seller.shopee.cn":"seller.".concat(o,".shopee.cn")},R=function(){return"live"===o?"seller.shopee.kr":"seller.".concat(o,".shopee.kr")},D=function(){return"".concat(b(),"/webchat/api")},A=function(){return"".concat(b(),"/api")},C=function(){return g("seller-push-ws")},I=function(){return g("chat-ws")},P=function(e){var t=e?e.toLowerCase():n;return"cn"!==t&&"kr"!==t||(t="my"),v()?"".concat(f(t),".").concat("live"===o?"":"".concat(o,".")).concat("xiapibuy.com"):"".concat(E(),".").concat(_(t))},w=["sg","my","th","ph","vn","id","tw","br"],N=function(e){var t=e?e.toLowerCase():n;if(S())return"https://s-cf-sg.shopeesz.com/file/";if(O())return"https://cf.shopee.sg/file/";var r=w.includes(t);return h()&&r?"https://s-cf-".concat(t,".shopeesz.com/file/"):"https://cf.shopee.".concat(p(t),"/file/")},U=function(e){var t=e?e.toLowerCase():n;return"tw"===t&&v()?"https://cvf.shopee.cn/file/":"https://cvf.shopee.".concat(p(t),"/file/")},x=function(e){var t=e?e.toLowerCase():n,r="test-stable"===o?"staging":o;return"".concat(v()?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee").concat("live"===o?"":"/test","/shopee-sticker-").concat(r,"-").concat(t)},k=function(){return"https://subaccount.".concat(E(),".com/")},M=function(){return"https://deo.shopeemobile.com/shopee/shopee-seller-live-".concat(S()||O()?"sg":n,"/downloads/")},L=function(){return"https://".concat(g("seller"),"/webchat/conversations")},j=function(){return"https://".concat(g("seller"),"/webchat")},G=function(){var e="test-stable"===o?"stable":o;return"https://deo.".concat(h()?"shopeesz":"shopeemobile",".com/shopee/shopee-seller-").concat(e,"-").concat(n,"/")},F={sg:"https://help.shopee.sg/sg/s/article/What-happens-if-I-ve-accumulated-Penalty-Points-1542975961836",my:"https://help.shopee.com.my/my/s/article/What-is-Shopee-s-Seller-Penalty-Points-system-1542971633226",th:"https://help.shopee.co.th/th/s/article/%E0%B8%A3%E0%B8%B0%E0%B8%9A%E0%B8%9A%E0%B8%84%E0%B8%B0%E0%B9%81%E0%B8%99%E0%B8%99%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%9E%E0%B8%A4%E0%B8%95%E0%B8%B4%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B8%84%E0%B8%B7%E0%B8%AD%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3-1542967300368",tw:"https://help.shopee.tw/tw/s/article/%E5%A6%82%E6%9E%9C%E7%B4%AF%E7%A9%8D%E4%BA%86%E8%A8%88%E5%88%86-%E8%B3%A3%E5%AE%B6%E6%9C%83%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E7%9A%84%E9%99%90%E5%88%B6-1542986467060",vn:"https://banhang.shopee.vn/edu/article/237",ph:"https://help.shopee.ph/ph/s/article/How-does-the-Seller-Penalty-Points-system-work-1542963021404",id:"https://seller.shopee.co.id/edu/article/1762",in:"https://seller.shopee.in/edu/courseDetail/482"},H={sg:"7a48024995c847d9a4586bab9fde57a7",id:"888adc066bf3426a8c70227470281818",mx:"e58cb9c620f54aec9e18a01632c35c05",br:"d75e2dbb49594bd19d1ea83485339a45",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",my:"b7a7ff2afd484f1dbddb3a922c7e90e7",th:"38e4b86fd0c04ae3b2c9200c7ea9c89e",ph:"bafd4812311d417c981d2690cda870bf",vn:"9e0e87184cf14246aabe6af0d78b2aa9",tw:"1bfa4a9834204eccb62858d0e2d9e083",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t=H[e];return t?"https://help.shopee.".concat(p(e),"/portal/webform/").concat(t):"https://help.shopee.".concat(p(e),"/s/contactusform")},B={sg:"cc5c96e6af6140b6920f13c6fa67ddd1",my:"2e11e4a4fd554f4aaba90814987e8d3f",th:"fab4029ae0614fdd96021ba21bdd5d56",tw:"6331df0cc3e5409c85b5f3331e385a5c",vn:"1214504dda894592a1c7ef4236912f4d",ph:"bafd4812311d417c981d2690cda870bf",id:"13a6214dacf54eeb83cea7110c6adde6",br:"23b02efbc1254721ab69549e442a6466",mx:"e58cb9c620f54aec9e18a01632c35c05",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",ar:"16e6e483bc5244d9946daf570c954dc3",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t="";return t=["tw","vn"].includes(e)?"https://cs.shopee.".concat(p(e)):"https://help.shopee.".concat(p(e)),"".concat(t,"/portal/webform/").concat(B[e])},Q=function(){return o},W=function(){return n},q=function(){return a},K=function(){return c},z=function(e,t,r){var n=e||{},o=n.status,a=n.checkout_id,c=n.order_id,s=n.id,i=n.shop_id;return"unpaid"===o?"https://".concat(P(r),"/user/purchase/checkout/").concat(a,"/?shopid=").concat(i||t):"https://".concat(P(r),"/user/purchase/order/").concat(c||s,"/?shopid=").concat(i||t)},X=function(e,t,r,n){window.open("https://".concat(e?P(t):P(),"/product/").concat(n,"/").concat(r,"/"))},J=function(){return v()?"https://deo.shopeesz.com/shopee/":"https://deo.shopeemobile.com/shopee/"}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new C(n||[]);return a._invoke=function(e,t,r){var n=d;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function O(){}function h(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=h.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:P}}function P(){return{value:t,done:!0}}return O.prototype=g.constructor=h,h.constructor=O,O.displayName=i(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},994:t=>{"use strict";t.exports=e},602:e=>{"use strict";e.exports=t},661:e=>{"use strict";e.exports=r},349:e=>{"use strict";e.exports=n}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";c.r(s),c.d(s,{AVAILABLE_IMAGE_TYPE:()=>Ce,AVAILABLE_VIDEO_EXT:()=>Pe,AVAILABLE_VIDEO_TYPE:()=>Ie,AccountType:()=>_e,AgentOnlineStatus:()=>R,AlertType:()=>Ge,AllProductFilters:()=>se,ApiMessageTypes:()=>Zn,BATCH_OPERATE_MAX_SELECTION:()=>W,BatchOperates:()=>q,CHAT_MIN_TEXT_BOX_HEIGHT:()=>S,ChatBotInteractionType:()=>Le,ChatBotMessageContentSource:()=>je,ChatbotFromType:()=>J,ConversationFilter:()=>K,ConversationSource:()=>ee,ConversationTab:()=>X,ConversationTypeEnum:()=>M,Currencies:()=>r,CustomShareEvent:()=>Ke,DataFetchStatus:()=>C,DiscountType:()=>L,EvaluationErrorCode:()=>u,EvaluationStatus:()=>i,FeedbackInfo:()=>E,FetchMessageStatus:()=>v,HALF_HOUR:()=>Yo,INVALID_PRICE:()=>mt,LS:()=>br,LogisticsLog:()=>ye,LogisticsStatus:()=>Re,MAX_IMAGE_SIZE:()=>Ne,MAX_MEDIA_NUM:()=>p,MAX_SHOWING_ITEM_COUNT:()=>ue,MAX_VIDEO_SIZE:()=>Ue,MAX_Z_INDEX:()=>Xe,MINI_MIN_TEXT_BOX_HEIGHT:()=>O,MessageErrorCode:()=>a,MessageFillStatus:()=>h,MessageOption:()=>e,MessageSendStatus:()=>o,MessageShortcutGroupType:()=>f,MessageSource:()=>te,MessageStatus:()=>d,MessageTypes:()=>n,MessagesRelatedKey:()=>T,NO_ACCESS_KEY:()=>xe,ONE_DAY:()=>Qo,OfferStatus:()=>U,OperationStatus:()=>I,OrderCancelReason:()=>Te,OrderItemStatus:()=>Oe,OrderListTabs:()=>ne,OrderListType:()=>ge,OrderPayMethod:()=>he,OrderStatusExt:()=>me,OrderTabStatus:()=>Ee,OrderTabStatusIndex:()=>Se,OrderType:()=>be,PERMISSION_DELETE_MESSAGE:()=>_,PredictionType:()=>$,ProductFiltersMap:()=>ce,ProductPromotionLabel:()=>le,ProductStatusUsingNumber:()=>oe,ProductStatusUsingString:()=>ae,PromotionStatus:()=>l,ReportType:()=>Z,RewardType:()=>j,SECOND_TO_MILLISECOND:()=>Bo,SERVER_ERROR_CAPACITY:()=>Ae,SERVER_ERROR_VALID_CONV_COUNT:()=>De,SPECIAL_VIDEO_MIME_TYPE:()=>we,SearchFilter:()=>Qe,SearchResultType:()=>We,SellerCancelOrderReason:()=>ve,ShareDataType:()=>ze,SocketConnectionStatus:()=>Q,SocketToAlertType:()=>Fe,SortByFilterEnum:()=>z,StorageKey:()=>qe,SubAccountRole:()=>fe,SubAccountShopStatus:()=>pe,SwitchStatus:()=>w,SystemProductFilters:()=>ie,TrackerOperation:()=>Me,TranslationFeedbackQuality:()=>t,TranslationStatus:()=>N,UnreadSource:()=>re,UserLoginStatus:()=>P,VIEW_DETAIL_KEY:()=>ke,VoucherOperateType:()=>Y,VoucherStamp:()=>V,VoucherStatus:()=>H,VoucherTab:()=>G,VoucherTabIndex:()=>F,VoucherType:()=>B,WorkstationCommonKey:()=>He,WorkstationProductCommonKey:()=>Ve,WorkstationProductPanel:()=>de,WorkstationVoucherCommonKey:()=>Be,camelCase:()=>dt,cancelOrderPolicy:()=>qn.An,capitalizeFirstLetter:()=>Jt,changeLanguage:()=>ua.D,checkEmptyObject:()=>$e,checkEntryGuide:()=>Tr,checkHeaderGuide:()=>vr,checkImportTemplateGuide:()=>pr,checkIsScChat:()=>rt,checkMassToolGuide:()=>Er,checkMiniUnrepliedGuide:()=>dr,checkObjectId:()=>Ze,checkProductDeleted:()=>Go,checkProductInvalid:()=>Vo,checkRegionFilterGuide:()=>hr,checkReplyGuide:()=>Or,checkSearchGuilde:()=>Sr,checkTranslationGuilde:()=>fr,checkTranslationSettingsGuide:()=>_r,checkUnrepliedFilterGuide:()=>lr,convertBase64ToBlob:()=>pt,countingDown:()=>qo,customizeTime:()=>wt,debounce:()=>or,deepMerge:()=>ft,downloadVideoWithBlob:()=>Wn,encode:()=>st,escapeRegex:()=>fo,fillMessagePreview:()=>Cn,fillWithZero:()=>Ko,formatDiscount:()=>$o,formatMessageTime:()=>kt,formatPrice:()=>gt,formatTransifyKeyWithNumber:()=>Yt,getApiServer:()=>qn.Vm,getBrowserInfo:()=>Wt,getCDNUrl:()=>qn.jz,getCNSCSellerCenterUrl:()=>qn.S8,getCSChatServer:()=>qn.wK,getCancelOrderDisplayStatus:()=>Mo,getChatBotParams:()=>Rn,getCrmPreviewParams:()=>Dn,getCurrentTimestampString:()=>zo,getCustomMessageText:()=>pn,getFileServer:()=>qn.Jy,getFormattedData:()=>Bn,getFormattedTime:()=>Ut,getHasSameSourceAndTarget:()=>bn,getIsMessageShortcutKeywordValid:()=>uo,getIsMessageValidToDelete:()=>ro,getItem:()=>yr,getKRSCSellerCenterUrl:()=>qn.Ht,getLocaleText:()=>gn,getMallOrderUrl:()=>qn.Db,getMallUrl:()=>qn.u7,getMediaData:()=>Gn,getMessageIsRatecard:()=>mn,getMessageIsSend:()=>no,getMessageShortcutsKeywords:()=>lo,getOrderPayment:()=>So,getOrderStatusTransifyKey:()=>Eo,getPayMethod:()=>ko,getProductStatusTransifyKey:()=>jo,getPushServer:()=>qn.Ey,getReplyTrackerMessageType:()=>eo,getRuntimeLocale:()=>qn.CE,getRuntimeRegion:()=>qn.X7,getRuntimeServer:()=>qn.IE,getRuntimeVersion:()=>qn.L6,getSCApiServer:()=>qn.E3,getSellerCenterUrl:()=>qn.qk,getServiceLocale:()=>rr,getShopeeCNUrl:()=>qn.nr,getShopeeCustomerService:()=>qn.Fy,getSpammerPolicyUrl:()=>qn.r,getSystemMessageByLocale:()=>An,getTimestampNano:()=>Xo,getTranslateFileServer:()=>qn.k2,getTranslationLocale:()=>er,getUrlParam:()=>Qt,getVideoServer:()=>qn.dV,getVoucherCondition:()=>na,getVoucherTimeText:()=>oa,getWebChatPureUrl:()=>qn.YH,getWebChatUrl:()=>qn.xC,goToPcMall:()=>qn.I9,greaterThan:()=>tt,handleBigNumber:()=>_t,handleDisplayTranslation:()=>Zo,handleReportItem:()=>ia,handleReportItems:()=>sa,hasSelectShop:()=>ot,hasTargetMessageOption:()=>hn,hasTargetMessageOptions:()=>Tn,init:()=>qn.S1,isAbnormalProduct:()=>Fo,isDeletedMessage:()=>vn,isProductSoldout:()=>Ho,isValidBrowser:()=>nt,isValidMessageStatusToReply:()=>$n,isValidMessageTypeToReply:()=>zn,isVisitingCNSC:()=>qn.z$,isVisitingKRSC:()=>qn.Y8,itemSize:()=>Ye,makeSecurityTipsMessage:()=>yn,memFn:()=>cr,needWarnNotificationType:()=>m,persistLimit:()=>Ar,previewMessage:()=>On,redirectionWithAccess:()=>nr,removeItem:()=>Dr,removeItemFromArray:()=>Et,searchMessageShortcuts:()=>po,setItem:()=>Rr,simpleEqualCheck:()=>et,stickersURI:()=>qn.Ll,subAccountURL:()=>qn.I7,throttle:()=>ar,transPrice:()=>bt,transformVideoTime:()=>xt,unifyLocale:()=>Zt,updateTimeLocale:()=>Ct,validateDuration:()=>Mn,validateMediaDuration:()=>kn,validateTypeAndSize:()=>Qn,videoURL:()=>qn.Od,voucherIsExpired:()=>ta,voucherIsStockout:()=>ra});var e,t,r={SG:"$",TH:"฿",VN:"₫",ID:"Rp",TW:"$",MY:"RM",PH:"₱",BR:"R$",IN:"₹",CN:"¥",MX:"$",CO:"$",CL:"$",AR:"$",PL:"zł",ES:"€",FR:"€",KR:"₩",US:"$"},n={MSG_TYPE_TEXT:"text",MSG_TYPE_IMAGE:"image",MSG_TYPE_OFFER:"offer",MSG_TYPE_PRODUCT:"product",MSG_TYPE_ORDER:"order",MSG_TYPE_STICKER:"sticker",MSG_TYPE_NOTIFICATION:"notification",MSG_TYPE_VOUCHER:"voucher",MSG_TYPE_FEED_STORY:"feed_story",MSG_TYPE_ITEM_LIST:"item_list",MSG_TYPE_SHOPPING_CART:"shopping_cart",MSG_TYPE_FAQ:"faq",MSG_TYPE_FAQ_QUESTION:"faq_question",MSG_TYPE_FAQ_FEEDBACK:"faq_feedback",MSG_TYPE_FAQ_LIVEAGENT:"faq_liveagent",MSG_TYPE_FAQ_UNSUPPORTED:"faq_unsupported",MSG_TYPE_FAQ_FEEDBACK_PROMPT:"faq_feedback_prompt",MSG_TYPE_FAQ_LIVEAGENT_PROMPT:"faq_liveagent_prompt",MSG_TYPE_UNTATED_ORDER_REMINDER:"unrated_order_reminder",MSG_TYPE_FLASH_SALE:"flash_sale",MSG_TYPE_BUNDLE_DEAL:"bundle_deal",MSG_TYPE_BUNDLE_MESSAGE:"bundle_message",MSG_TYPE_OPTION_PACK:"option_pack",MSG_TYPE_SELECTED_OPTION:"selected_option",MSG_TYPE_ADD_ON_DEAL:"add_on_deal",MSG_TYPE_VIDEO:"video",MSG_TYPE_IMAGE_WITH_TEXT:"image_with_text",MSG_TYPE_RATE_CARD:"rating_card",MSG_TYPE_NEW_FAQ:"new_faq",MSG_TYPE_FAQ_CATEGORY_CHOICE:"faq_category_choice",MSG_TYPE_FAQ_QUESTION_LIST:"faq_question_list",MSG_TYPE_FAQ_TYPE_CHOICE:"faq_type_choice",MSG_TYPE_FAQ_CATEGORY_LIST:"faq_category_list",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE:"faq_bot_request_text",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE:"faq_bot_request_order",FAQ_TYPE_BOT_RESPONSE_MESSAGE:"faq_bot_response",MSG_TYPE_SECURITY_TIPS:"security_tips"},o={SENDING:1,FAILED:2,SUCCEED:3},a={FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACKLIST:43,CANCEL_ORDER:44,UNVERIFIED_PHONE_NUMBER:45,EXCEED_DAILY_LIMIT:26,UNTRUSTED_NETWORK:46,NEED_CAPTCHA:47,DFP_ERROR:48,SPAMMER:49,FAQ_EXPIRED:50,FAQ_SESSION_OLD:51,DEFAULT:-1},i={UNRATED:"unrated",RATED:"rated",EXPIRED:"expired",INVALID:"invalid"},u={RATED:"rating_card_rated",EXPIRED:"rating_card_expired"},l={UPCOMING:"upcoming",ONGOING:"ongoing",EXPIRED:"expired"},d={CENSORED_BLACKLIST:"censored_blacklist",NORMAL:"normal"},p=9,f={PERSONAL:1,TEAM:2},_=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT];!function(e){e[e.MSG_OPT_NORMAL=0]="MSG_OPT_NORMAL",e[e.MSG_OPT_AUTO_REPLY=1]="MSG_OPT_AUTO_REPLY",e[e.MSG_OPT_BLOCKED=2]="MSG_OPT_BLOCKED",e[e.MSG_OPT_CENSORED_BLACKLIST=16]="MSG_OPT_CENSORED_BLACKLIST",e[e.MSG_OPT_CENSORED_WHITELIST=32]="MSG_OPT_CENSORED_WHITELIST",e[e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER=64]="MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER",e[e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER=128]="MSG_OPT_IGNORE_UNREAD_FOR_SENDER",e[e.MSG_OPT_INVISIBLE_FOR_RECEIVER=256]="MSG_OPT_INVISIBLE_FOR_RECEIVER",e[e.MSG_OPT_INVISIBLE_FOR_SENDER=512]="MSG_OPT_INVISIBLE_FOR_SENDER",e[e.MSG_OPT_ADS=1024]="MSG_OPT_ADS",e[e.MSG_OPT_FAQ_SESSION=2048]="MSG_OPT_FAQ_SESSION",e[e.MSG_OPT_TRIGGER_FAQ=4096]="MSG_OPT_TRIGGER_FAQ",e[e.MSG_OPT_SOCIAL_MESSAGE=8192]="MSG_OPT_SOCIAL_MESSAGE",e[e.MSG_OPT_OFFWORK_AUTOREPLY=16384]="MSG_OPT_OFFWORK_AUTOREPLY",e[e.MSG_OPT_CANCELORDER_WARNING_SENT=32768]="MSG_OPT_CANCELORDER_WARNING_SENT",e[e.MSG_OPT_CANCELORDER_WARNING_RETRACT=65536]="MSG_OPT_CANCELORDER_WARNING_RETRACT",e[e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND=66496]="MSG_OPT_CANCELORDER_WARNING_NOT_SEND",e[e.MSG_OPT_CHATBOT_SESSION=131072]="MSG_OPT_CHATBOT_SESSION",e[e.MSG_OPT_TRIGGER_CHATBOT=262144]="MSG_OPT_TRIGGER_CHATBOT",e[e.MSG_OPT_PRIVATE_MESSAGE=524288]="MSG_OPT_PRIVATE_MESSAGE",e[e.MSG_OPT_SILENT_FOR_SENDER=1048576]="MSG_OPT_SILENT_FOR_SENDER",e[e.MSG_OPT_DELETE=2097152]="MSG_OPT_DELETE",e[e.MSG_OPT_RECALL=8388608]="MSG_OPT_RECALL"}(e||(e={})),function(e){e[e.bad=1]="bad",e[e.average=2]="average",e[e.good=3]="good"}(t||(t={}));var E={IMPROVED:1,WRONG:2,OFFENSIVE:4},S=156,O=88,h={FILLED:"filled",FILLING:"filling",FAILED:"failed"},v={PRELOADING:"preloading",FETCHING:"fetching"},T={TIME_NOW:"timeNow",PRELOADED:"preloaded"},m=["game_quota_reach","game_block"];function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R,D,A={NORMAL:"normal",PENDING:"pending",SUCCEED:"succeed",FAILED:"failed"},C=y(y({},A),{},{INIT_PENDING:"pendingInit",INIT_FAILED:"failedInit",TEMPORY_ERROR:"temporyError"}),I=y(y({},A),{},{BLACKLIST_ERROR:"blacklistError",INTERNAL_SERVER_ERROR:"internalServerError"}),P={SUCCEED:"succeed",FORBIDDEN_ERROR:"forbidden",INTERNAL_SERVER_ERROR:"internalServerError",LOGOUT:"logout"},w={ENABLED:"enabled",DISABLED:"disabled",NO_PERSSION:"no_permission"},N={SUCCEED:"succeed",FAILED:"failed",HISTORY:"history",SHOW:"show",PENDING:"pending"},U={PENDING:"pending",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled"};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.OFFLINE=-1]="OFFLINE",e[e.ONLINE=0]="ONLINE",e[e.HANGUP=1]="HANGUP"}(R||(R={}));var M,L={AMOUNT:"amount",PERCENTAGE:"percentage"},j={DISCOUNT:"discount",COIN_CASHBACK:"coin_cashback"},G={ONGOING:"ongoing",SCHEDULED:"scheduled"},F=(g(D={},G.ONGOING,0),g(D,G.SCHEDULED,1),D),H=k(k({},G),{},{FINISHED:"finished"}),V={USED:"used",EXPIRED:"expired",REDEEM:"redeem"},B={ITEM:"item",SHOP:"shop"},Y={DETAILS:"details",CLAIM:"claim",USE:"use"},Q={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECTING:"reconnecting",RECONNECT:"reconnect"},W=50,q={PIN:"pin",UNPIN:"unpin",MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",FORWARD:"forward"};!function(e){e[e.Normal=0]="Normal",e[e.Agent=1]="Agent"}(M||(M={}));var K,z,X={CUSTOMER:"customer",AGENT:"agent"};!function(e){e.All="All",e.Unread="Unread",e.Pinned="Pinned",e.Closed="Closed",e.Unreplied="Unreplied"}(K||(K={})),function(e){e[e.LatestMessage=0]="LatestMessage",e[e.LongestWaitTime=1]="LongestWaitTime"}(z||(z={}));var J,$,Z,ee={FILTER:1,SHOP:2,SHOP_LIST:3,SYNC:4,QUEUE:5,FAKING:6,LATEST:7,OLDER:8,DELETE:9,LOAD_MORE:10,SOCKET:11,PRELOAD:12},te={VIEW:1,FETCH:2,CLEAR_SEARCH:3,SHOW:4,SYNC:5,AUTO:6,SEND:7,UPDATE:8,CATCH:9},re={PRELOAD:1,QUEUE:2,RECEIVE_TOTAL:3,RECEIVE_SINGLE:4,SYNC:5},ne={MINE:"mine",HIS:"his"},oe={SOLD_OUT:-1,DELETED:0,NORMAL:1,REVIEWING:2,BANNED:3,INVALID:4,INVALID_HIDE:5,OFFENSIVE_HIDE:6,AUDITING:7,NORMAL_UNLIST:8,DELISTED:9},ae={DELETED:"deleted",BANNED:"banned",NORMAL:"normal",SOLD_OUT:"sold_out",DELISTED:"delisted"},ce={sales:"sold",recent:"mtime"},se={SALES:"sales",RECENT:"recent"},ie={RELATED:"related",TOP_RATED:"top_rated",FREQUENTLY_BOUGHT_TOGETHER:"frequently_bought_together"},ue=4,le={ADD_ON_DEAL:"add_on_deal",BUNDLE_DEAL:"bundle_deal",CAMPAIGN:"campaign",FLASH_SALES:"flash_sales",GIFT_WITH_PURCHASE:"gift_with_purchase",SHOW_DISCOUNT:"show_discount"},de={ALL:"All",SELLER_RECOMMENDATION:"Seller_Recommendation",SYSTEM_RECOMMENDATION:"System_Recommendation"},pe={UNACCESSIBLE:"unaccessible",NONE:"none",UNALLOCATED:"unallocated"},fe={MAIN_SUBACCOUNT:"main_subaccount",ADMIN_SUBACCOUNT:"admin_subaccount",NORMAL_SUBACCOUNT:"normal_subaccount"},_e={SELLER:"seller",SUBACCOUNT:"subaccount"},Ee={ALL:"all",UNPAID:"unpaid",TO_SHIP:"to_ship",SHIPPING:"shipping",COMPLETED:"completed",CANCELLED:"cancelled",REFUND:"refund"},Se={all:0,unpaid:1,to_ship:2,shipping:3,completed:4,cancelled:5,refund:6},Oe={DELETE:0,UNRATED:1,RATED:2,RETURNED:3,RETURN_RATED:4,CANCEL:5},he={PAY_CREDIT_CARD:1,PAY_BANK_TRANSFER:2,PAY_OFFLINE_PAYMENT:3,PAY_IPAY88:4,PAY_FREE:5,PAY_COD:6,PAY_ESUN:7,PAY_BILL_PAYMENT:8,PAY_INDOMARET:13,PAY_KREDIVO:14,PAY_NICEPAY_CC:15,PAY_AIRPAY:18,PAY_SHOPEE_WALLET:20,PAY_SHOPEE_WALLET_V2:27,PAY_AKULAKU:21,PAY_INSTALLMENT:23,PAY_IBANKING:29},ve=[{cancel_reason_code:1,transify_key:"common.order.cancel_reason.out_of_stock"},{cancel_reason_code:3,transify_key:"common.order.cancel_reason.undeliverable_area"}],Te={NONE:0,OUT_OF_STOCK:1,CUSTOMER_REQUEST:2,UNDELIVERABLE_AREA:3,CANNOT_SUPPORT_COD:4,LOST_PARCEL:5,SYSTEM_UNPAID:100,SYSTEM_UNDERPAID:101,SYSTEM_PAYMENT_REJECTED:102,LOGISTICS_REQUEST_CANCELED:200,LOGISTICS_PICKUP_FAILED:201,LOGISTICS_DELIVERY_FAILED:202,LOGISTICS_COD_REJECTED:203,BACKEND_LOGISTICS_NOT_STARTED:204,BACKEND_ESCROW_TERMINATED:300,BACKEND_INACTIVE_SELLER:301,BACKEND_SELLER_DID_NOT_SHIP:302,RULE_ENGINE_AUTO_CANCEL:400},me={ORDER_EXT_DELETE:0,ORDER_EXT_UNPAID:1,ORDER_EXT_PAID:2,ORDER_EXT_SHIPPED:3,ORDER_EXT_COMPLETED:4,ORDER_EXT_INVALID:6,ORDER_EXT_CANCEL_PROCESSING:7,ORDER_EXT_CANCEL_COMPLETED:8,ORDER_EXT_RETURN_PROCESSING:9,ORDER_EXT_RETURN_COMPLETED:10,ORDER_EXT_ESCROW_PAID:11,ORDER_EXT_ESCROW_CREATED:12,ORDER_EXT_ESCROW_PENDING:13,ORDER_EXT_ESCROW_VERIFIED:14,ORDER_EXT_ESCROW_PAYOUT:15,ORDER_EXT_CANCEL_PENDING:16},ge={PAID:1,UNPAID:2,COMPLETED:3,CANCELLED:4,SHIPPED:5,ALL:6,TOSHIP:7,TORECEIVE:8,TOPAY:9,TOSHIP_UNPROCESSED:10,TOSHIP_PROCESSED:11,RETURN:12,GROUP_BUY_ALL:13,GROUP_BUY_ONGOING:14,GROUP_BUY_COMPLETED:15,GROUP_BUY_INVALID:16},be={UNKNOWN:0,SIMPLE:1,ESCROW:2},ye={ORDER_DETAIL_SHIPPING_CONFIRMED:2,ORDER_DETAIL_SHIPPED:4,ORDER_DETAIL_RECEIVED:5,ORDER_DETAIL_CANCELED:6,ORDER_DETAIL_NOTIFY_SHIP:7},Re={LOGISTICS_NOT_STARTED:0,LOGISTICS_REQUEST_CREATED:1,LOGISTICS_PICKUP_DONE:2,LOGISTICS_PICKUP_RETRY:3,LOGISTICS_PICKUP_FAILED:4,LOGISTICS_DELIVERY_DONE:5,LOGISTICS_DELIVERY_FAILED:6,LOGISTICS_REQUEST_CANCELED:7,LOGISTICS_COD_REJECTED:8,LOGISTICS_READY:9,LOGISTICS_INVALID:10,LOGISTICS_LOST:11,LOGISTICS_PENDING_ARRANGE:12},De=-1,Ae=0,Ce=["image/png","image/jpeg","image/jpg"],Ie=["video/*",".flv",".3gp",".rm",".rmvb",".asf",".mp4",".webm"],Pe=["MP4","TS","FLV","WMV","ASF","RM","RMVB","MPG","MPEG","3GP","MOV","WEBM","AVI"],we=["application/vnd.rn-realmedia","application/vnd.rn-realmedia-vbr"],Ne=2097152,Ue=31457280,xe="common.no_sc_access",ke="conversation_detail.workstation.order_panel.manage",Me={CLICK:"click",IMPRESSION:"impression",ACTION_DRAG_VIDEO:"action_drag_video",DELETE_PREVIEW_MEDIA:"delete_preview_media",CLOSE_PREVIEW_MEDIA:"close_preview_media",ACTION_FINISH_VIDEO:"action_finish_video",VIEW:"view",ACTION_ADJUST_MESSAGE_SHORTCUT:"action_adjust_message_shortcut",ACTION_SELECT:"action_select",ACTION_SEARCH:"action_search",CLOSE:"close"},Le={MESSAGE:1001,SOLUTION:1002},je={HEAD_HOTQUESTION_SOURCE:1,SHORTCUT_SOURCE:2,CATEGORY_HOTQUESTION_SOURCE:3,FAQ_RECOMMEND_SOURCE:4,KB_INTENT_SOURCE:5,LIVEAGENT_RECOMMENDER_SOURCE:6};!function(e){e.LandingPage="SIPDirectChatFromChatLandingPage",e.ProductPage="SIPProductPage",e.OrderPage="SIPOrderPageFromBuyer",e.ShopPage="SIPShopPage"}(J||(J={})),function(e){e[e.Faq=0]="Faq",e[e.Intent=1]="Intent"}($||($={})),function(e){e[e.Categories=0]="Categories",e[e.OtherFaqType=1]="OtherFaqType",e[e.Intent=2]="Intent",e[e.Question=3]="Question",e[e.ChatWithSeller=4]="ChatWithSeller"}(Z||(Z={}));var Ge={error:"error",success:"success",normal:"normal",warn:"warn",info:"info"},Fe={pending:Ge.warn,error:Ge.error,resolved:Ge.success},He="conversation_detail.workstation.panel",Ve="".concat(He,".product"),Be="conversation_detail.workstation.voucher_panel",Ye={itemHeight:{conversationCellForBCSubAccount:94,conversationCell:72,shopCardCell:212,shopListCell:72,voucherCell:146,conversationShopListCell:60,dropdownShopListCell:44,contactCell:48},itemWidth:{shopCardCell:356}},Qe={ALL:"all",CUSTOMER:"customer",MESSAGES:"messages",AGENT:"agent"},We={NAME:"name",ORDER:"order",MESSAGE:"message",AGENT:"agent",AGENT_MESSAGE:"agentMessage"},qe={USERID:"__chat_userid__",LAST_ACTIVE:"last-active-time",MINI_ALERT:"mini-should-show-alert"},Ke={ACK:"ack",TAB_FOCUSED:"tabFocused",CALC_CONNECTIONS:"calcConnections",CLOSE_CONNECTION:"closeConnection",SHARE_API_DATA:"shareApiData"},ze={UNREAD:"unread",UPDATE_SETTING:"updateSetting",UPDATE_OFFLINE_SETTING:"updateOfflineSetting"},Xe=199999;function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}var $e=function(e){return!e||0===Object.keys(e).length},Ze=function(e,t){return null===e&&null===t||(null==e?void 0:e.id)===(null==t?void 0:t.id)},et=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},tt=function(e,t){if(!e)return!1;if(!t)return!0;var r=(e+="").length,n=(t+="").length;if(r!==n)return r>n;var o=e.split(""),a=null;return o.forEach((function(e,r){"boolean"!=typeof a&&(a=parseInt(e)>parseInt(t[r])||parseInt(e)===parseInt(t[r])&&null)})),!!a},rt=function(){var e=window.location.hostname;return["seller","banhang","localhost"].some((function(t){return e.includes(t)}))},nt=function(){try{return!("undefined"!=typeof window&&"object"===Je(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===Je(process.versions)&&process.versions.electron||"object"===("undefined"==typeof navigator?"undefined":Je(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}catch(e){return!0}}(),ot=function(e){return!(null==e||!e.id)};function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ct(e){return function(e){if(Array.isArray(e))return at(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,r,n){n[r]=e.charCodeAt(r)})),window.encodeURIComponent(window.btoa(String.fromCharCode.apply(null,new Uint8Array(t.buffer))))}var it,ut,lt,dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}))},pt=function(e){for(var t=window.atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new window.Blob([o],{type:r})},ft=function e(t,r){var n=JSON.parse(JSON.stringify(t));for(var o in r)n[o]=n[o]&&"[object Object]"===n[o].toString()?e(n[o],r[o]):r[o];return n},_t=function(e){return e>=1e3?"999+":e},Et=function(e,t){var r=ct(e),n=r.indexOf(t);return n>-1&&r.splice(n,1),r},St=c(994),Ot=["PL","ES","FR"],ht=function(e){return e?e.toUpperCase():"SG"},vt=function(e){var t=e.price,r=e.country,n=function(e,t){return"TW"!==e||void 0!==t&&!t?"CL"===e?"$":(0,St.getCurrencyConfig)(e).symbol||"":"NT$"}(r,e.isSCChat);if(Ot.includes(r))return"".concat(n).concat(t).concat(n);var o=(0,St.getCurrencyConfig)(r).symbolPosition===St.SYMBOL_POSITION.BACK?"".concat(t).concat(n):"".concat(n).concat(t);return"MX"===r?"".concat(o," MXN"):o},Tt=function(e){for(var t="",r=+e,n=["K","M","B"];r>1e3&&(t=n.shift()||"");)r/=1e3;var o=parseInt(100*+r+"")/100;return{value:r=Number.isInteger(o)?o:o.toFixed(2),unit:t}},mt="NaN",gt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=r.withSpaces,a=void 0!==o&&o,c=r.withMinus,s=void 0!==c&&c,i=r.withUnit,u=void 0!==i&&i,l=r.withComma,d=void 0===l||l,p=ht(t),f=Number(e);if(Number.isNaN(f))return vt({price:mt,country:p,isSCChat:n});var _="",E="";if(u){var S=Tt(f);_=S.unit,f=S.value}return s&&(E="-"),f=(0,St.formatCurrency)(p,f,{symbol:"",spaceBetweenSymbol:a,noSeparator:!d}),f=vt({price:f,country:p,isSCChat:n}),"".concat(E).concat(f).concat(_)},bt=function(e,t,r){return t=ht(t),vt({price:e,country:t,isSCChat:r})},yt=c(602),Rt=c.n(yt),Dt=c(470).t,At=new(Rt()),Ct=function(e){return At.locale.set(e)};!function(e){e.Today="today",e.Yesterday="yesterday"}(it||(it={})),function(e){e[e.Time=0]="Time"}(ut||(ut={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(lt||(lt={}));var It,Pt=function(e){var t=e.value,r=e.date,n=e.suffix,o=e.prefix,a="",c="";if(o&&(a=Dt("conversation_detail.message_list.".concat(o.type))+(void 0===o.separator?"  ":o.separator)),n){var s=n.type===ut.Time?function(e){return e.format("hh:mm")}(r):"";c=(void 0===n.separator?", ":n.separator)+s}return a+t+c};!function(e){e[e.Yesterday=0]="Yesterday",e[e.Today=1]="Today",e[e.ThisMonth=2]="ThisMonth",e[e.ThisYear=3]="ThisYear",e[e.ThisWeek=4]="ThisWeek",e[e.NONE=5]="NONE"}(It||(It={}));var wt=function(e,t){var r=t||{},n=r.noTodayFlag,o=r.noTimeFlag,a=r.needFullFormat,c=r.onlyKeepDate,s=r.isConvPreview,i=At.create(e);if(a)return Pt({value:i.format("LHD"),date:i,suffix:{type:ut.Time}});if(c)return i.format("LHD");var u=["tw","cn"].includes(At.locale.current),l=function(e,t){var r=new Date,n=new Date(e);if(t){var o=r-n,a=(new Date).setHours(0,0,0,0);if(o<=6048e5&&o>=r.getTime()-a+864e5)return It.ThisWeek}if(r.getFullYear()===n.getFullYear()){if(r.getMonth()===n.getMonth()){var c=r.getDate(),s=n.getDate();return c===s?It.Today:c-1===s?It.Yesterday:It.ThisMonth}return It.ThisYear}return It.NONE}(e,s);switch(l){case It.Today:var d=n?void 0:{type:it.Today},p={type:ut.Time,separator:""};return Pt({value:"",date:i,prefix:d,suffix:p});case It.Yesterday:var f={type:it.Yesterday},_=o?void 0:{type:ut.Time,separator:""};return Pt({value:"",date:i,prefix:f,suffix:_});case It.ThisWeek:return Dt("common.".concat(lt[new Date(e).getDay()]));case It.ThisMonth:case It.ThisYear:var E=o?void 0:{type:ut.Time};return Pt({value:i.format(s?u?"MM/DD":"DD/MM":"LHDS"),date:i,suffix:E});default:var S=o?void 0:{type:ut.Time};return Pt({value:i.format(s?u?"YY/MM/DD":"DD/MM/YY":"LHD"),date:i,suffix:S})}},Nt="YYYY-MM-DD hh:mm",Ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=At.create(e);return r.format(t||Nt)},xt=function(e){var t=Math.ceil(e),r=t/3600<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=t/60%60<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),o=t%60<10?"0"+t%60:t%60;return t>=3600?"".concat(r,":").concat(n,":").concat(o):"".concat(n,":").concat(o)},kt=function(e){var t=e.created_at,r=e.created_timestamp;return wt(t||1e3*r,{noTodayFlag:!0,noTimeFlag:!0,isConvPreview:!0})},Mt=c(661),Lt=c.n(Mt),jt=function(e){return 0===e||1===e?"one":e>=1e6?"many":"other"},Gt=function(e){return 1===e?"one":Number.isInteger(e)?[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":![2,3,4].includes(e%10)||[12,13,14].includes(e%100)?"many":"other":"other"},Ft=function(e){return e<=1?"one":"other"},Ht={fr:jt,pl:Gt,default:Ft},Vt={fr:function(e,t){return"".concat(jt(e),".").concat(jt(t))},pl:function(e,t){return"".concat(Gt(e),".").concat(Gt(t))},default:function(e,t){return"".concat(Ft(e),"_").concat(Ft(t))}},Bt=["fr","pl"],Yt=function(e,t,r){var n=Lt().language||"en",o=Bt.includes(n)?n:"default";return void 0!==r?"".concat(e,"_").concat(Vt[o](t,r)):"".concat(e,"_").concat(Ht[o](t))},Qt=function(e,t){var r=t||window.location.search,n=null;if(r){var o=r.indexOf("?")+1,a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");n=r.substr(o).match(a)}return n?unescape(n[2]):null},Wt=function(){var e=navigator.userAgent.toLowerCase(),t=null;return e.indexOf("msie")>0&&(t=e.match(/msie [\d.]+;/gi)),e.indexOf("firefox")>0&&(t=e.match(/firefox\/[\d.]+/gi)),e.indexOf("safari")>0&&e.indexOf("chrome")<0&&(t=e.match(/safari\/[\d.]+/gi)),e.indexOf("chrome")>0&&(t=e.match(/chrome\/[\d.]+/gi)),t?t.toString():"unknown"};function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Kt,zt=["hans","hant"],Xt=["en","zh-hans","zh-hant","ms-my","th-th","vi-vn","id-id","zh-cn","pt-br","hi","es-mx","es-co","es-cl","es-es","es-ar","pl","fr"],Jt=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1))},$t=function(e){if(e.includes("-")){var t=e.split("-");return zt.includes(t[1])?"".concat(t[0],"-").concat(Jt(t[1])):"".concat(t[0],"-").concat(t[1].toUpperCase())}return e},Zt=function(e){var t,r=(e||"en").toLowerCase(),n="en",o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(Xt);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.includes(r)){n=$t(a);break}}}catch(e){o.e(e)}finally{o.f()}return n},er=function(e){var t=Zt(e);switch(t){case"th-TH":return"th";case"vi-VN":return"vi";case"id-ID":return"id";default:return t}},tr={en:"default","ms-MY":"ms-my","th-TH":"th","zh-Hans":"tw","zh-Hant":"tw","vi-VN":"vn","id-ID":"id","zh-CN":"cn","pt-BR":"pt-br",hi:"hi","es-MX":"es-mx","es-CO":"es-co","es-CL":"es-cl",pl:"pl","es-ES":"es-es",fr:"fr","es-AR":"es-ar"},rr=function(e){var t=Zt(e);return tr[t]||"default"},nr=function(e){var t=e.access,r=e.isSubAccount,n=e.action,o=e.url,a=void 0===o?"":o;t&&(r?n():window.open().location=a)},or=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=Date.now();return function(){for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];t&&(clearTimeout(t),t=null);var i=Date.now();i-o>n?(e.apply(void 0,c),o=Date.now()):t=window.setTimeout((function(){e.apply(void 0,c),o=Date.now()}),r)}},ar=function(e,t){var r,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null,s=0,i=function(){s=!1===a.leading?0:(new Date).getTime(),c=null,o=e.apply(r,n),c||(r=n=null)},u=function(){var u=(new Date).getTime();s||!1!==a.leading||(s=u);var l=t-(u-s);r=this;for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];return n=p,l<=0||l>t?(c&&(clearTimeout(c),c=null),s=u,o=e.apply(r,n),c||(r=n=null)):c||!1===a.trailing||(c=window.setTimeout(i,l)),o};return u},cr=function(e,t){var r=0;return{check:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(void 0,ct(o))?r+=1:this.reset(),r>=t&&(this.reset(),!0)},reset:function(){r=0}}},sr="Auto-Translation",ir="modal",ur=function(e,t){var r=t.superType,n=t.secondaryType,o=e.find((function(e){return e.name===r}));if(o){var a=o.children;if(a.length){var c=a.find((function(e){return e.name===n}));return c||!1}return!1}return!1},lr=function(e){return ur(e,{superType:"Unreplied-Filter",secondaryType:ir})},dr=function(e){return ur(e,{superType:"MiniChat-Unreplied-Filter",secondaryType:ir})},pr=function(e){return ur(e,{superType:"Import-Template",secondaryType:ir})},fr=function(e){return ur(e,{superType:sr,secondaryType:ir})},_r=function(e){return ur(e,{superType:sr,secondaryType:"settings"})},Er=function(e){return ur(e,{superType:"Mass-Tool",secondaryType:ir})},Sr=function(e){return ur(e,{superType:"SearchV3",secondaryType:ir})},Or=function(e){return ur(e,{superType:"Reply",secondaryType:ir})},hr=function(e){return ur(e,{superType:"Region-Filter",secondaryType:ir})},vr=function(e){return ur(e,{superType:"MiniChat-Header",secondaryType:ir})},Tr=function(e){return ur(e,{superType:"MiniChat-Entry",secondaryType:ir})},mr=c(349),gr=c.n(mr),br={getItem:function(e,t){try{var r=window.localStorage.getItem(e);return null==r?r:t?JSON.parse(r):r}catch(e){console.warn("*** LocalStorage Error: Can not get LocalStorage *** \n".concat(e))}},setItem:function(e,t,r){try{var n=r?JSON.stringify(t):t;window.localStorage.setItem(e,n)}catch(e){console.warn("*** LocalStorage Error: Can not set LocalStorage *** \n".concat(e))}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){console.warn("*** LocalStorage Error: Can not remove LocalStorage *** \n".concat(e))}}},yr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?br.getItem(e):gr().getItem(e)},Rr=function(e,t){return gr().setItem(e,t)},Dr=function(e,t){return t?br.removeItem(e):gr().removeItem(e)},Ar=gr().supports(gr().INDEXEDDB)||gr().supports(gr().WEBSQL)?1e3:100,Cr=c(470).t;function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wr=n.MSG_TYPE_TEXT,Nr=n.MSG_TYPE_IMAGE,Ur=n.MSG_TYPE_OFFER,xr=n.MSG_TYPE_PRODUCT,kr=n.MSG_TYPE_ORDER,Mr=n.MSG_TYPE_STICKER,Lr=n.MSG_TYPE_NOTIFICATION,jr=n.MSG_TYPE_VOUCHER,Gr=n.MSG_TYPE_ITEM_LIST,Fr=n.MSG_TYPE_FAQ,Hr=n.MSG_TYPE_FAQ_QUESTION,Vr=n.MSG_TYPE_FAQ_LIVEAGENT,Br=n.MSG_TYPE_FAQ_FEEDBACK,Yr=n.MSG_TYPE_FAQ_UNSUPPORTED,Qr=n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Wr=n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,qr=n.MSG_TYPE_BUNDLE_MESSAGE,Kr=n.MSG_TYPE_OPTION_PACK,zr=n.MSG_TYPE_SELECTED_OPTION,Xr=n.MSG_TYPE_VIDEO,Jr=n.MSG_TYPE_IMAGE_WITH_TEXT,$r=n.MSG_TYPE_RATE_CARD,Zr=n.MSG_TYPE_NEW_FAQ,en=n.MSG_TYPE_FAQ_CATEGORY_CHOICE,tn=n.MSG_TYPE_FAQ_QUESTION_LIST,rn=n.MSG_TYPE_FAQ_TYPE_CHOICE,nn=n.MSG_TYPE_FAQ_CATEGORY_LIST,on=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,an=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,cn=n.FAQ_TYPE_BOT_RESPONSE_MESSAGE,sn=U.PENDING,un=U.REJECTED,ln="common.unsupported_message",dn=(g(Kt={},n.MSG_TYPE_FAQ_LIVEAGENT,"faq.live_agent"),g(Kt,n.MSG_TYPE_FAQ_UNSUPPORTED,"faq.new_unsupport_input"),g(Kt,n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,"faq.feedback_prompt"),g(Kt,n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,"faq.new_live_agent_prompt"),g(Kt,n.MSG_TYPE_VIDEO,"conversation_detail.input_field.toolbar.video.tip"),g(Kt,n.MSG_TYPE_IMAGE_WITH_TEXT,"conversation_list.conversation_cell.new_image_message"),Kt),pn=function(e){return Cr(dn[e]||ln)},fn=[Gr],_n=[Xr,Yr,Qr,Wr,Jr],En=[Nr,qr,an,Ur,xr,kr,jr,$r,Mr],Sn=[tn,rn,nn],On=function(t){var r=t.message,n=t.enableTranslation,o=t.locale,a=t.conversationShopId;if(!r)return{text:Cr(ln)};var c=r.type,s=r.content,i=void 0===s?{}:s,u=r.crm_message_preview,l=void 0===u?{}:u,d=r.message_option,p=r.source,f=r.send_status;if(l.text)return{text:l.text};if(null!=i&&i.preview_text&&c===cn)return{text:i.preview_text};if(hn(d,e.MSG_OPT_CENSORED_BLACKLIST))return{text:Cr("common.blacklist.replaced_text")};if(c){var _,E,S=i||{},O=S.text,h=void 0===O?"":O,v=S.title,T=S.opening,m=S.caption,g=S.translation,b=S.product_name,y=S.sticker_name,R=S.chat_product_infos,D=void 0===R?[]:R,A=S.products,C=void 0===A?[]:A,I=no(r,{isAgent:!1,shop_id:a}),P=function(e,t,r,n){var o,a=t||{},c=a.live_agent_text,s=void 0===c?[]:c,i=a.fixed_title,u=a.faq_type_choice_translation;if(_n.includes(e))o=s.length?gn(s,r):pn(e);else if(Sn.includes(e))o=gn(e===rn?u:i,r);else{var l=En.includes(e)?"conversation_list.conversation_cell.new_".concat(e,"_message"):fn.includes(e)?"common.tips.recommended".concat(n?"":"_for_you"):"";o=l?"[".concat(Cr(l),"]"):Cr(ln)}return o}(c,i,o,I);switch(c){case Zr:case Fr:E=T||Cr("faq.no_set.chat_bot_title");break;case wr:var w=bn(i);E=!n||w||d===e.MSG_OPT_SOCIAL_MESSAGE||["crm","proactive_update"].includes(p)||2===f?h:(null==g?void 0:g.text)||h;break;case Vr:case Hr:case Br:case zr:case Kr:case en:case on:E=h||v;break;case Xr:E="[".concat(P,"]");break;case Jr:E="[".concat(P,"] ").concat(m||v||h);break;case Yr:case Qr:case Wr:case tn:case rn:case nn:E=P;break;case xr:E="".concat(P," ").concat(b);break;case Mr:E=y?"[".concat(y,"]"):P;break;case Gr:var N=D.map((function(e){return e.name})).join("; ");E="".concat(P," ").concat(N);break;case Lr:var U=An(i||{},o),x=U.notification_for_sender,k=U.notification_for_receiver;E=I?x:k;break;case $r:E="".concat(P," ").concat(Cr(I?"conversation_list.preview.rate_card_sender":"rate_card.rate_out_service"));break;case Ur:var M=i||{},L=M.status,j=M.products_count,G=M.offer_price;if(L)if(L===sn){var F=Cr("conversation_list.preview.offer_pending_".concat(I?"sender":"receiver"));E="".concat(P," ").concat(F,": ").concat(G," x ").concat(j),I||(_=!0)}else{var H=L===un?"declined":L;E="".concat(P," ").concat(Cr("conversation_detail.workstation.offer_panel.".concat(H)))}else E=P;break;case kr:E="".concat(P," ").concat(C.map((function(e){return e.title})).join("; "));break;case jr:var V=i||{},B=V.type,Y=V.rule_text,Q=V.discount_text;if(B){var W="[".concat(Cr("conversation_detail.workstation.voucher_panel.".concat(B,"_voucher")),"]");E="".concat(W," ").concat(Q,", ").concat(Y)}else E=P;break;default:E=P}return{text:E,isPendingReceivedOffer:_}}return{text:Cr(ln)}},hn=function(e,t){return(e&t)===t},vn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hn(t.message_option,e.MSG_OPT_DELETE)},Tn=function(e,t){return t.some((function(t){return hn(e,t)}))},mn=function(e){return e===$r},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.find((function(e){return er(t).toLocaleLowerCase().includes(e.lang.toLocaleLowerCase())}))||e.find((function(e){return"en"===e.lang}));return(r||{}).text},bn=function(e){var t=e||{},r=t.translation,n=t.mid;if(!r)return!0;var o=(void 0===n?{}:n).source_language,a=void 0===o?"":o,c=r||{},s=c.final,i=c.mid,u=c.target_language,l=void 0===u?"":u,d=c.source_language,p=void 0===d?"":d,f=s?s.target_language:l,_=s?s.source_language:p,E=i?i.source_language:a;return E?E===f:_===f&&"unknown"!==_},yn=function(e,t){return{type:n.MSG_TYPE_SECURITY_TIPS,content:{text:""},id:e,conversation_id:t,to_id:"",from_id:"",shop_id:"",created_timestamp:Math.floor((new Date).getTime()/1e3)}},Rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateMaxGeneralOptionHideTime,n=void 0===r||r,o=t.updateMessageOption,a=void 0===o||o,c=e||{},s=c.created_timestamp,i=c.message_option,u=n?{max_general_option_hide_time:s}:{},l=a?{last_message_option:i}:{};return Pr(Pr({},u),l)},Dn=function(e){var t=e.crm_message_preview,r=void 0===t?{}:t;return r.text?{crm_message_preview:r}:{crm_message_preview:{}}},An=function(e,t){var r=e.noti_text_of_all_languages,n=void 0===r?[]:r;if(!n.length)return e;var o=n.find((function(e){return er(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}));if(o)return o;var a=n.find((function(e){return"en"===e.language}));return a||e},Cn=function(e){var t=e.type,r=e.textContent,n=e.content,o={};switch(t){case kr:o={products:(r||{}).products};break;case jr:var a=r||{};o={rule_text:a.rule_text,discount_text:a.discount_text,type:a.type};break;case Ur:var c=r||{};o={status:c.status,products_count:c.products_count,offer_price:c.offer_price};break;case xr:o={product_name:n.product_name||(null==r?void 0:r.name)}}return Pr(Pr({},e),{},{content:Pr(Pr({},n),o)})};function In(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function Pn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){In(a,n,o,c,s,"next",e)}function s(e){In(a,n,o,c,s,"throw",e)}c(void 0)}))}}var wn,Nn=c(757),Un=c.n(Nn),xn=c(470).t,kn=function(e){return Mn(e)?xn(Yt("label.exceed_media_limit.video_duration",180),{max:180}):null},Mn=function(e){var t=e.type,r=e.duration,n=void 0===r?0:r;return"video"===t&&(n<0||n>180)},Ln=function(){return window.createObjectURL||window.URL.createObjectURL},jn=function(e){return{type:"video",cover:"",file:e,duration:0}},Gn=function(e,t){return new Promise((function(r){"image"===t?function(e,t){var r=Ln()(e),n=new Image;n.onload=function(){var o=n.width,a=n.height;t({type:"image",cover:r,file:e,width:o,height:a})},n.src=r}(e,r):"video"===t&&function(e,t){var r;try{r=Ln()(e)}catch(r){return void t(jn(e))}var n=document.createElement("video");n.setAttribute("crossOrigin","anonymous"),n.setAttribute("autoplay","autoplay"),n.muted=!0,n.src=r,n.addEventListener("loadeddata",(function(){n?function(e,t,r,n){var o=document.createElement("canvas"),a=e,c=a.videoWidth,s=a.videoHeight,i=a.duration;o.width=c,o.height=s,o.getContext("2d").drawImage(e,0,0,c,s);var u={type:"video",file:t,duration:Math.ceil(i),width:c,height:s,videoUrl:r};o.toBlob?o.toBlob((function(t){u.cover=t?Ln()(t):"",n(u),e=null}),"image/png",.5):(u.cover=o.toDataURL?o.toDataURL("image/png"):"",n(u))}(n,e,r,t):t(jn(e))})),n.addEventListener("error",(function(){t(jn(e))}))}(e,r)}))},Fn=function(e){return e.size},Hn=function(e){return e.type},Vn=function(e){var t=Hn(e);return function(e){return e.includes("video")||we.includes(e)}(t)?"video":function(e){return e.includes("image")}(t)?"image":null},Bn=function(){var e=Pn(Un().mark((function e(t){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(){var e=Pn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(t,Vn(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yn="common.toast.file_unsupport",Qn=function(e,t,r,n){var o=Vn(e);if("all"===r&&!o||"all"!==r&&o!==r)return xn(Yn);if("video"===o){if(!t)return xn(Yn);if(!function(e){return Fn(e)<=Ue}(e))return xn("label.exceed_media_limit.video_size",{max:30});if(!function(e){var t=function(e){return e.name}(e),r=(t.substr(t.lastIndexOf(".")+1)||"").toUpperCase();return Pe.includes(r)}(e))return xn(Yn)}else if("image"===o){if(!function(e,t){return Fn(e)<=(t||Ne)}(e,n))return n?xn("ps_feedback_upload_img_size_error"):xn("common.toast.file_size_exceeds",{maxFileSize:"2MB"});if(!function(e){return Ce.includes(Hn(e))}(e))return xn("feedback_modal.error.upload_image_failed.format")}return null},Wn=function(e,t){var r=new XMLHttpRequest;r.open("get",e),r.responseType="blob",r.onload=function(){t(r.response)},r.send()},qn=c(547),Kn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER],zn=function(e){return Kn.includes(e)},Xn=[e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND],Jn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ITEM_LIST,n.MSG_TYPE_SHOPPING_CART,n.MSG_TYPE_UNTATED_ORDER_REMINDER,n.MSG_TYPE_ADD_ON_DEAL,n.MSG_TYPE_VOUCHER,n.MSG_TYPE_BUNDLE_DEAL,n.MSG_TYPE_FLASH_SALE,n.MSG_TYPE_OFFER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT,n.MSG_TYPE_IMAGE_WITH_TEXT],$n=function(e,t){var r=e.type,c=e.send_status,s=e.errorCode,i=e.status,u=e.message_option;if(!t){var l=Jn.includes(r)&&!Xn.find((function(e){return hn(u,e)})),p=c!==o.SENDING&&c!==o.FAILED&&i!==d.CENSORED_BLACKLIST&&s!==a.BLACKLIST;if(l&&p){var f=(e||{}).textContent,_=void 0===f?{}:f;if(r===n.MSG_TYPE_ORDER)return!(!_||!_.id);if(r===n.MSG_TYPE_PRODUCT){var E=_,S=E.id,O=E.actual_price;return!(!S||!O)}return!0}}return!1},Zn=(g(wn={},n.MSG_TYPE_TEXT,0),g(wn,n.MSG_TYPE_IMAGE,1),g(wn,n.MSG_TYPE_OFFER,3),g(wn,n.MSG_TYPE_PRODUCT,4),g(wn,n.MSG_TYPE_ORDER,5),g(wn,n.MSG_TYPE_STICKER,6),g(wn,n.MSG_TYPE_VIDEO,18),g(wn,n.MSG_TYPE_ITEM_LIST,1011),g(wn,n.MSG_TYPE_VOUCHER,1013),g(wn,n.MSG_TYPE_SHOPPING_CART,1014),g(wn,n.MSG_TYPE_UNTATED_ORDER_REMINDER,1015),g(wn,n.MSG_TYPE_BUNDLE_DEAL,1016),g(wn,n.MSG_TYPE_FLASH_SALE,1017),g(wn,n.MSG_TYPE_ADD_ON_DEAL,1018),wn),eo=function(e){return void 0!==Zn[e]?Zn[e]:-1},to=[e.MSG_OPT_AUTO_REPLY,e.MSG_OPT_BLOCKED,e.MSG_OPT_CENSORED_BLACKLIST,e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER,e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER,e.MSG_OPT_INVISIBLE_FOR_RECEIVER,e.MSG_OPT_INVISIBLE_FOR_SENDER,e.MSG_OPT_ADS,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_OFFWORK_AUTOREPLY,e.MSG_OPT_CANCELORDER_WARNING_RETRACT,e.MSG_OPT_CHATBOT_SESSION,e.MSG_OPT_TRIGGER_CHATBOT,e.MSG_OPT_PRIVATE_MESSAGE,e.MSG_OPT_SILENT_FOR_SENDER],ro=function(e,t,r){var n=e.type,a=e.send_status,c=e.created_timestamp,s=e.message_option,i=!0;return t&&_.includes(n)&&![o.SENDING,o.FAILED].includes(a)&&!Tn(s,to)||(i=!1),(!r||Math.floor((new Date).getTime()/1e3)-c>=r)&&(i=!1),i},no=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isAgent,n=t.to_tob_user_id,o=t.shop_id,a=e.from_id,c=e.to_shop_id;return r?a!==n:c!==o};function oo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var co,so,io=function(e,t){return t.map((function(t){return function(e,t){var r=function(e,t){var r=t.trim().toLocaleLowerCase();return e.filter((function(e){return e.trim().toLocaleLowerCase().startsWith(r)})).length}(e.tags,t),n=function(e,t){var r=fo(t),n=new RegExp(r,"gi");return(e.match(n)||[]).length}(e.content,t);return 1e4*r+1*n}(e,t)})).reduce((function(e,t){return e+t}),0)},uo=function(e){return e.trim().length>=1},lo=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return e.trim()?[e]:[];var r=e.split(",").filter((function(e){return e.trim()})),n=ct(new Set(r));return n.sort((function(e,t){return e.length>t.length?-1:1}))},po=function(e,t){return t.length?function(e){return e.sort((function(e,t){return e.weight>t.weight?-1:1}))}(function(e){return e.filter((function(e){return e.weight}))}(e.map((function(e){return ao(ao({},e),{},{weight:io(e,t)})})))):e},fo=function(e){return e.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&")},_o=c(470).t,Eo=function(e){return"common.order.status.".concat(e)},So=function(e){var t=e.order,r=e.region,n=(e.isOwnOrder,e.isNewPrice),o=t.products,a=void 0===o?[]:o,c=t.estimated_escrow,s=void 0===c?0:c,i=t.total_price,u=void 0===i?0:i,l=t.voucher_price,d=void 0===l?0:l,p=t.price_before_discount,f=void 0===p?0:p,_=t.credit_card_promotion,E=void 0===_?0:_,S=a.reduce((function(e,t){return e+(t.coin_offset||0)}),0);return{shopeeCoin:S,payment:gt(n?s||u?u:f||u:f-d-E-S,r)}},Oo=he.PAY_CREDIT_CARD,ho=he.PAY_BANK_TRANSFER,vo=he.PAY_OFFLINE_PAYMENT,To=he.PAY_IPAY88,mo=he.PAY_FREE,go=he.PAY_COD,bo=he.PAY_ESUN,yo=he.PAY_BILL_PAYMENT,Ro=he.PAY_INDOMARET,Do=he.PAY_KREDIVO,Ao=he.PAY_NICEPAY_CC,Co=he.PAY_AIRPAY,Io=he.PAY_SHOPEE_WALLET,Po=he.PAY_SHOPEE_WALLET_V2,wo=he.PAY_AKULAKU,No=he.PAY_INSTALLMENT,Uo=he.PAY_IBANKING,xo=(g(co={},Oo,"cc"),g(co,ho,"bank_transfer"),g(co,vo,"offline"),g(co,To,"online"),g(co,mo,"waived"),g(co,go,"cod"),g(co,bo,"esun"),g(co,yo,"bill_payment"),g(co,Ro,"indomaret"),g(co,Do,"kredivo"),g(co,Ao,"cc_installment"),g(co,Co,"airpay"),g(co,Io,"shopee_wallet"),g(co,Po,"shopee_wallet_v2"),g(co,wo,"akulaku"),g(co,No,"installment"),g(co,Uo,"ibanking"),co),ko=function(e){var t=xo[e];return t?_o("common.order.pay_method.".concat(t)):""},Mo=function(e,t){var r=e.list_type,n=e.status_ext,o=e.order_type,a=e.payment_method,c=e.shipping_method,s=e.logistics_status,i=e.pickup_cutoff_time;if(n===me.ORDER_EXT_CANCEL_PENDING)return!1;var u=["MY","TW","VN","PH"].includes(t),l=!!i&&Date.now()>=new Date(i).getTime(),d=!0;switch(r){case ge.TOPAY:if(a===he.PAY_OFFLINE_PAYMENT)return d;break;case ge.TOSHIP:return l&&u&&a===he.PAY_COD&&s===Re.LOGISTICS_REQUEST_CREATED||(o===be.ESCROW?(n===me.ORDER_EXT_RETURN_PROCESSING||c>0&&s===Re.LOGISTICS_REQUEST_CREATED&&l)&&(d=!1):o===be.SIMPLE&&(d=!1)),d}return d},Lo=(g(so={},oe.DELETED,ae.DELETED),g(so,oe.BANNED,ae.BANNED),g(so,oe.SOLD_OUT,ae.SOLD_OUT),g(so,oe.DELISTED,ae.DELISTED),so),jo=function(e){return e===oe.NORMAL?"conversation_detail.conversation_origin.product_origin.product_stock":"common.product.".concat(Lo[e])},Go=function(e,t){return!(!e||t!==oe.DELETED)},Fo=function(e){return void 0!==e&&e!==oe.NORMAL},Ho=function(e){return void 0!==e&&e<=0},Vo=function(e,t){return Fo(e)||Ho(t)},Bo=1e3,Yo=1800,Qo=86400,Wo=[Qo,3600,60],qo=function(e){var t=e,r=Wo.map((function(e){var r=t>e?Math.floor(t/e):0;return t-=r*e,r}));return r.push(t),r},Ko=function(e){return"".concat(e>=10?"":"0").concat(e)},zo=function(){return Math.ceil(Date.now()/1e3).toString()},Xo=function(e){return e*Math.pow(10,9)+""},Jo=["zh-CN","zh-Hant","zh-Hans"],$o=function(e){var t=Lt().language||"en",r=Zt(t);return Jo.includes(r)?((100-e)/10).toFixed(e%10?1:0):"".concat(e,"%")},Zo=function(e,t,r,n,o){return n||t?e:e||o&&!!r},ea=c(470).t,ta=function(e){return e===H.FINISHED},ra=function(e,t){return e===t},na=function(e,t){return gt(e,t,{withUnit:e>=1e4})},oa=function(e,t,r,n){return ea("conversation_detail.workstation.voucher_panel.".concat(n?H.ONGOING:e,"_time"),{time:e===H.SCHEDULED?Ut(t,"MM.DD.YYYY h:mm"):Ut(r,"MM.DD.YYYY")})};function aa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sa=function(e,t,r){var n=e.categories,o=void 0===n?[]:n,a=e.other_faq_types,c=void 0===a?[]:a,s=e.intents,i=void 0===s?[]:s,u=e.questions,l=void 0===u?[]:u,d=[];return o.length&&o.forEach((function(e,r){d.push(ia({item:e,index:r,type:Z.Categories,isNewFaq:t}))})),c.length&&c.forEach((function(e,n){d.push(ia({item:e,index:n+o.length,type:Z.OtherFaqType,isNewFaq:t,locale:r}))})),i.length&&i.forEach((function(e,r){d.push(ia({item:e,index:r+o.length+c.length,type:Z.Intent,isNewFaq:t}))})),l.length&&l.forEach((function(e,r){d.push(ia({item:e,index:r,type:Z.Question,isNewFaq:t}))})),d},ia=function(e){var t=e.item,r=e.index,n=e.type,o=e.isNewFaq,a=e.locale,c={};switch(n){case Z.Categories:c={content:t.title,location:r};break;case Z.OtherFaqType:c={content:gn(t.faq_type_choice_translation,a),location:r};break;case Z.Intent:var s=t;c=ca(ca({},JSON.parse(s.pass_through_data)),{},{content:s.text,location:r});break;case Z.Question:c={content:t.text,location:r};break;case Z.ChatWithSeller:c={content:t.content}}return{data:JSON.stringify(ca(ca({},c),{},{is_intent_prediction:n===Z.Intent?$.Intent:$.Faq,is_default_hq:o?1:0})),type:1}},ua=c(470)})(),s})(),e.exports=n(r(37725),r(14906),r(58518),r(69483))}}]);